(globalThis["webpackChunkMMC_CLIENT"]=globalThis["webpackChunkMMC_CLIENT"]||[]).push([[907],{4083:(e,t,l)=>{e.exports=l.p+"img/Long_Events_Sheet.7ab3be03.png"},7123:(e,t,l)=>{e.exports=l.p+"img/Short_Events_Sheet.1b011d1e.png"},8626:(e,t,l)=>{e.exports=l.p+"img/Nodes_sheet.22b132a9.png"},8749:(e,t,l)=>{e.exports=l.p+"img/Channels_sheet.239e4369.png"},9907:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>hr});var a=l(1758),n=l(8734),o=l(8790),s=(l(9862),l(4907)),i=l(8336);const d=JSON.parse('{"name":"MMC-CLIENT","version":"0.17.0","description":"Module Management Console Client","productName":"MMC","author":"David Ellis","private":true,"scripts":{"lint":"eslint --ext .js,.vue ./","format":"prettier --write \\"**/*.{js,vue,scss,html,md,json}\\" --ignore-path .gitignore","test":"jest","test:unit:ui":"majestic","test:unit":"jest","test:unit:ci":"jest --ci","test:unit:coverage":"jest --coverage","test:unit:watch":"jest --watch","test:unit:watchAll":"jest --watchAll"},"dependencies":{"@quasar/extras":"^1.0.0","cbuslibrary":"^2.7.6","core-js":"^3.6.5","json-case-convertor":"^1.4.4","json-logic-js":"^2.0.5","quasar":"^2.0.0","sass":"^1.69.5","sheetjs":"^2.0.0","socket.io-client":"^4.4.1","stream":"^0.0.3","vue":"^3.0.0","vue-json-pretty":"^1.8.2","vue-router":"^4.0.0","xlsx":"^0.18.5","xml-js":"^1.6.11"},"devDependencies":{"@babel/eslint-parser":"^7.13.14","@quasar/app-webpack":"^3.13.2","@quasar/quasar-app-extension-testing-unit-jest":"^3.0.3","@vue/test-utils":"^2.4.6","eslint":"^7.14.0","eslint-config-prettier":"^8.1.0","eslint-plugin-jest":"^28.8.3","eslint-plugin-vue":"^7.0.0","eslint-webpack-plugin":"^2.4.0","jest":"^29.7.0","prettier":"^2.5.1"},"browserslist":["last 10 Chrome versions","last 10 Firefox versions","last 4 Edge versions","last 7 Safari versions","last 8 Android versions","last 8 ChromeAndroid versions","last 8 FirefoxAndroid versions","last 10 iOS versions","last 5 Opera versions"],"engines":{"node":">= 12.22.1","npm":">= 6.13.4","yarn":">= 1.21.1"}}');var r=l(5565);const u="CommonFunctions";function c(e,t){for(var l=0,a=e;a<=t;a++)l+=1<<a;return l}function m(e,t,l,a,n){if(void 0!=a&&void 0!=n)var o=c(a,n);else a=0,o=255;void 0==t&&(t=1),void 0==l&&(l=0);let s=e;s&=o,s>>=a,s*=t,s+=l;let i=0;return t<1&&(i=1),t<.1&&(i=2),t<.01&&(i=3),s=s.toFixed(i),s}function v(e,t,l,a,n,o){if(void 0!=n&&void 0!=o)var s=c(n,o);else s=255,n=0;void 0==l&&(l=1),void 0==a&&(a=0);let i=e,d=t-a;return d=(d/l).toFixed(0),d<<=n,i|=d&s,i&=d|~s,i}function b(e){let t;try{void 0!=e&&void 0!=e.linkedVariables&&(t=void 0!=e.linkedVariables.EV?e.linkedVariables.EV:void 0)}catch(e){r.Qn(u+`: getLinkedEventVariables ${e}`)}return t}function p(e){let t;return void 0!=e.linkedVariables&&(t=void 0!=e.linkedVariables.NV?e.linkedVariables.NV:void 0),t}const g="EventFunctions";function f(e,t,l){r.Qn(g+`: createNewEvent: ${t} : ${l}`);var a=!1,n=e.state.nodes[t];if(void 0==n.storedEventsNI[l]){n.storedEventsNI[l]={eventIdentifier:l,eventIndex:1,variables:{}},n.storedEventsNI[l].variables[0]=n.parameters[5];for(var o=1;o<=n.parameters[5];o++)n.storedEventsNI[l].variables[o]=0;a=!0}else r.Qn(g+`: createNewEvent: event already exists ${t} : ${l}`);return a}function y(e){r.Qn(g+": getEventDetails : opcode "+e.opCode);let t={type:void 0,state:void 0},l=e.opCode;return"90"==l||"B0"==l||"D0"==l||"F0"==l?(t.type="LONG",t.state="ON"):"98"==l||"B8"==l||"D8"==l||"F8"==l?(t.type="SHORT",t.state="ON"):"91"==l||"B1"==l||"D1"==l||"F1"==l?(t.type="LONG",t.state="OFF"):"99"!=l&&"B9"!=l&&"D9"!=l&&"F9"!=l||(t.type="SHORT",t.state="OFF"),t}function _(e,t){e.getters.node_useNENRD(t)?h(e,t):e.methods.request_all_node_events(t)}function h(e,t){try{let l=e.getters.node_numberOfEvents(t);return r.Qn(g+`: requestAllEventsByIndex: nodeNumber ${t} count ${l}`),e.methods.request_all_node_events_by_index(t,l),l}catch(e){r.Qn(g+`: requestAllEventsByIndex ${e}`)}}async function k(e,t){try{e.methods.delete_all_events(t),await r.yy(500),1==e.getters.node_useNENRD(t)&&h(e,t)}catch(e){r.Qn(g+`: deleteAllEvents ${e} `)}}async function N(e,t,l,a){try{if(r.Qn(g+`: eventDelete ${t} ${l} ${a} `),1==e.getters.node_useEventIndex(t)){if(void 0!=a){let l=r.xT(t,4)+r.xT(a,4);1==e.state.nodes[t].VLCB&&(l="00000000"),e.methods.event_teach_by_index(t,l,a,0,0,!1)}await r.yy(500),h(e,t)}else e.methods.remove_event(t,l,a);try{delete e.state.layout.nodeDetails[t].indexedEvents[a]}catch(e){}}catch(e){r.Qn(g+`: eventDelete ${e} `)}}function x(e,t,l,a,n,o,s,i){return 1==e.getters.node_useEventIndex(t)?(e.methods.event_teach_by_index(t,l,a,n,o,s,b(i)),"index"):(e.methods.event_teach_by_identifier(t,l,n,o,s,b(i)),"identifier")}function w(e,t,l,a,n){try{return 1==e.getters.node_useEventIndex(t)?e.getters.event_variable_by_index(t,a,n):e.getters.event_variable_by_identifier(t,l,n)}catch(e){r.Qn(g+`: getEventVariable: ${e}`)}}async function q(e,t,l,a,n){r.Qn(g+`: restoreEventVariables: node ${t} ${l} ${a}`);try{for(let o of Object.keys(n).sort(function(e,t){return e-t}))if(o>0){let s=n[o];r.Qn(g+`: restoreEventVariables: ${o} ${s}`);let i=!1;x(e,t,l,a,o,s,i),await r.yy(100)}return!0}catch(e){return r.Qn(g+": restoreEventVariables: "+e),!1}}l(310),l(95);var F=l(7072),V=l.n(F),C=l(3141),I=l(4667);const E={__name:"EventVariableBit",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventIndex:{type:Number,required:!0},eventVariableIndex:{type:Number,required:!0},bit:{type:Number,required:!0},label:{type:String,required:!1},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(0,a.WQ)("store"),o={0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128},s=(0,n.KR)(!1),i=(0,a.EW)(()=>w(l,t.nodeNumber,t.eventIdentifier,t.eventIndex,t.eventVariableIndex));(0,a.wB)(i,()=>{s.value=!!(i.value&o[t.bit])});const d=(e,t)=>{r()},r=()=>{let e=i.value;s.value?e|=o[t.bit]:e&=~o[t.bit],x(l,t.nodeNumber,t.eventIdentifier,t.eventIndex,t.eventVariableIndex,e,!0,b(t.configuration))};return(0,a.sV)(()=>{var e=w(l,t.nodeNumber,t.eventIdentifier,t.eventIndex,t.eventVariableIndex);s.value=!!(e&o[t.bit])}),(t,l)=>{const n=(0,a.g2)("q-checkbox"),o=(0,a.g2)("q-card-section");return(0,a.uX)(),(0,a.Wv)(o,{class:"no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{dense:"","min-width":"100",modelValue:s.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>s.value=e),d],label:e.label,"right-label":""},null,8,["modelValue","label"])]),_:1})}}};var A=l(4189),Q=l(7022),R=l(8582),L=l.n(R);const S=E,W=S;L()(E,"components",{QCardSection:A.A,QCheckbox:Q.A});const B={class:"text-h6"},T={class:"text-subtitle2"},D={__name:"EventVariableBitArray",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventIndex:{type:Number,required:!0},eventVariableIndex:{type:Number,required:!0},bitCollection:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},configuration:{type:Object,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)(()=>{}),(t,l)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding",style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,{class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",B,[(0,a.eW)((0,o.v_)(e.displayTitle)+" ",1),(0,a.bF)(s,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,o.v_)(e.eventVariableIndex),1)]),_:1})]),(0,a.Lk)("div",T,(0,o.v_)(e.displaySubTitle),1),(0,a.bF)(s,{class:"no-margin no-padding"},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.bitCollection,t=>((0,a.uX)(),(0,a.CE)("div",{key:t},[(0,a.bF)((0,n.R1)(W),{nodeNumber:e.nodeNumber,eventVariableIndex:e.eventVariableIndex,eventIdentifier:e.eventIdentifier,eventIndex:e.eventIndex,bit:t.bitPosition,label:t.label,configuration:e.configuration},null,8,["nodeNumber","eventVariableIndex","eventIdentifier","eventIndex","bit","label","configuration"])]))),128))]),_:1})]),_:1})]),_:1})}}};var K=l(3316);const U=D,O=U;L()(D,"components",{QCard:K.A,QCardSection:A.A});const X={class:"text-h6"},M={class:"text-subtitle2"},z={__name:"EventVariableBitSingle",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventIndex:{type:Number,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},bit:{type:Number,required:!0},configuration:{type:Object,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)(()=>{}),(t,l)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",X,[(0,a.eW)((0,o.v_)(e.displayTitle)+" ",1),(0,a.bF)(s,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,o.v_)(e.eventVariableIndex),1)]),_:1})]),(0,a.Lk)("div",M,(0,o.v_)(e.displaySubTitle),1),(0,a.bF)((0,n.R1)(W),{nodeNumber:e.nodeNumber,eventIdentifier:e.eventIdentifier,eventIndex:e.eventIndex,eventVariableIndex:e.eventVariableIndex,bit:e.bit,configuration:e.configuration},null,8,["nodeNumber","eventIdentifier","eventIndex","eventVariableIndex","bit","configuration"])]),_:1})]),_:1})}}},P=z,$=P;L()(z,"components",{QCard:K.A,QCardSection:A.A});const G={class:"q-pa-xs no-margin"},j={style:{border:"2px solid grey"},class:"q-py-none no-margin"},H={class:"GroupTitle q-py-none no-margin"},Y={__name:"EventVariableGroup",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventIndex:{type:Number,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)(()=>{}),(t,l)=>{const s=(0,a.g2)("q-card-section");return(0,a.uX)(),(0,a.CE)("div",G,[(0,a.Lk)("div",j,[(0,a.Lk)("div",H,(0,o.v_)(e.configuration.displayTitle),1),(0,a.bF)(s,{class:"q-py-none no-margin text-body1"},{default:(0,a.k6)(()=>[(0,a.Lk)("b",null,(0,o.v_)(e.configuration.displaySubTitle),1)]),_:1}),(0,a.bF)(s,{class:"q-py-none no-margin row"},{default:(0,a.k6)(()=>[(0,a.bF)((0,n.R1)(ze),{configuration:e.configuration.groupItems,nodeNumber:e.nodeNumber,eventIdentifier:e.eventIdentifier,eventIndex:e.eventIndex},null,8,["configuration","nodeNumber","eventIdentifier","eventIndex"])]),_:1})])])}}};var J=l(2807);const Z=(0,J.A)(Y,[["__scopeId","data-v-0ee910cf"]]),ee=Z;L()(Y,"components",{QCardSection:A.A});const te={class:"text-h6"},le={class:"text-subtitle2"},ae={__name:"EventVariableNumber",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventIndex:{type:Number,default:0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayOffset:{type:Number,required:!1,default:0},displayScale:{type:Number,required:!1,default:1},displayUnits:{type:String,default:""},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(0,a.WQ)("store"),s=(0,n.KR)(),i=(0,a.EW)(()=>{let e=255*t.displayScale+t.displayOffset;return e>1e5?"######":e>1e4?"#####":e>1e3?"####":e>100?"###":e>10?"##.#":e>1?"#.##":".###"}),d=(0,a.EW)(()=>{let e=0;return t.displayScale<1&&(e=1),t.displayScale<.1&&(e=2),t.displayScale<.01&&(e=3),(t.min*t.displayScale+t.displayOffset).toFixed(e)}),r=(0,a.EW)(()=>{let e=0;try{let l=0;t.displayScale<1&&(l=1),t.displayScale<.1&&(l=2),t.displayScale<.01&&(l=3);let a=2**(t.endBit-t.startBit+1)-1,n=t.max<a?t.max:a;e=(n*t.displayScale+t.displayOffset).toFixed(l)}catch{}return e}),u=(0,a.EW)(()=>w(l,t.nodeNumber,t.eventIdentifier,t.eventIndex,t.eventVariableIndex));(0,a.wB)(u,()=>{s.value=m(u.value,t.displayScale,t.displayOffset,t.startBit,t.endBit)});const c=e=>{let a=u.value,n=Number(e);n<d.value&&(n=d.value),n>r.value&&(n=r.value),a=v(a,n,t.displayScale,t.displayOffset,t.startBit,t.endBit),x(l,t.nodeNumber,t.eventIdentifier,t.eventIndex,t.eventVariableIndex,a,!0,b(t.configuration)),s.value=m(u.value,t.displayScale,t.displayOffset,t.startBit,t.endBit)};return(0,a.sV)(()=>{s.value=m(u.value,t.displayScale,t.displayOffset,t.startBit,t.endBit)}),(t,l)=>{const n=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-badge"),m=(0,a.g2)("q-input"),v=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(v,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",te,[(0,a.eW)((0,o.v_)(e.displayTitle)+" ",1),(0,a.bF)(n,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,o.v_)(e.eventVariableIndex),1)]),_:1})]),(0,a.Lk)("div",le,(0,o.v_)(e.displaySubTitle),1),(0,a.bF)(u,{color:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)(" range "+(0,o.v_)(d.value)+" to "+(0,o.v_)(r.value)+" "+(0,o.v_)(e.displayUnits),1)]),_:1}),(0,a.bF)(m,{class:"ev_input_box",mask:i.value,"reverse-fill-mask":"",debounce:"10",dense:"",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),outlined:"",onChange:c},null,8,["mask","modelValue"])]),_:1})]),_:1})}}};var ne=l(3954),oe=l(7837),se=l(7156);const ie=(0,J.A)(ae,[["__scopeId","data-v-470c4b55"]]),de=ie;L()(ae,"components",{QCard:K.A,QCardSection:A.A,QBadge:ne.A,QInput:oe.A,QField:se.A});var re=l(8433),ue=l.n(re),ce=l(2490),me=l.n(ce);class ve{constructor(){this.node=void 0,this.eventIdentifier=void 0;var e=function(e){return 1==this.store.getters.node_useEventIndex(this.nodeNumber)?(r.Qn(`mdfLogic.parse EVoperator by Index ${this.eventIdentifier} ${e}`),this.node.eventsByIndex[this.eventIndex].variables[e]):(r.Qn(`mdfLogic.parse EVoperator by Identifier ${this.eventIdentifier} ${e}`),this.node.storedEventsNI[this.eventIdentifier].variables[e])}.bind(this);ue().add_operation("ev",e);var t=function(e,t){let l,a=!1;return l=this.store.getters.node_useEventIndex(this.nodeNumber)?this.node.eventsByIndex[this.eventIndex].variables[e]:this.node.storedEventsNI[this.eventIdentifier].variables[e],(l&2**t)>0&&(a=!0),a}.bind(this);ue().add_operation("evbit",t);var l=function(){return this.eventIndex}.bind(this);ue().add_operation("index",l);var a=function(e){return this.node.parameters[e]}.bind(this);ue().add_operation("np",a);var n=function(e,t){let l=!1;return(this.node.parameters[e]&2**t)>0&&(l=!0),l}.bind(this);ue().add_operation("npbit",n);var o=function(e){return this.node.nodeVariables[e]}.bind(this);ue().add_operation("nv",o);var s=function(e,t){let l=!1;return(this.node.nodeVariables[e]&2**t)>0&&(l=!0),l}.bind(this);ue().add_operation("nvbit",s)}evaluate(e,t,l,a,n){this.store=e,this.nodeNumber=t,this.node=e.state.nodes[t],this.eventIdentifier=a,this.eventIndex=n;let o=me().lowerCaseKeys(l);try{let e=ue().apply(o);return e}catch(e){return r.Qn("mdfLogic.parse "+e),!1}}}function be(e,t,l){var a=null;const n=me().upperCaseKeys(t).NV;if(n){var o=l.state.nodes[e].nodeVariables[n];for(var s in t.labels)o==t.labels[s].value&&(a=t.labels[s].label)}return a}function pe(e,t,l,a,n){var o=!0;if(void 0!=t.evBit){if(l.getters.node_useEventIndex(e))if(void 0!=n)var s=l.state.nodes[e].eventsByIndex[n];else console.log("parseLogicElement: ERROR: evBit - event index not defined ");else if(void 0!=a)s=l.state.nodes[e].storedEventsNI[a];else console.log("parseLogicElement: ERROR: evBit - event eventIdentifier not defined ");if(s){var i=s.variables[t.evBit.index];i=(i&2**t.evBit.bit)>>t.evBit.bit,o=ge(i,t)}else console.log("parseLogicElement: ERROR: evBit - event variables undefined ")}if(void 0!=t.ev){if(l.getters.node_useEventIndex(e))if(void 0!=n)s=l.state.nodes[e].eventsByIndex[n];else console.log("parseLogicElement: ERROR: evBit - event index not defined ");else if(void 0!=a)s=l.state.nodes[e].storedEventsNI[a];else console.log("parseLogicElement: ERROR: evBit - event eventIdentifier not defined ");if(s){i=s.variables[t.ev];o=ge(i,t)}else console.log("parseLogicElement: ERROR: ev - event variables undefined ")}if(void 0!=t.nvBit){i=l.state.nodes[e].nodeVariables[t.nvBit.index];i=(i&2**t.nvBit.bit)>>t.nvBit.bit,o=ge(i,t)}if(void 0!=t.nv){i=l.state.nodes[e].nodeVariables[t.nv];o=ge(i,t)}if(void 0!=t.JLL){let s=new ve;o=s.evaluate(l,e,t.JLL,a,n)}return o}function ge(e,t){var l=!0;return void 0!=t.equals&&t.equals!=e&&(l=!1),void 0!=t.greaterThan&&e<=t.greaterThan&&(l=!1),void 0!=t.in&&(l=!1,t.in.forEach(function(t){e==t&&(l=!0)})),void 0!=t.lessThan&&e>=t.lessThan&&(l=!1),void 0!=t.notEqual&&t.notEqual==e&&(l=!1),l}const fe={class:"text-h6"},ye={class:"text-subtitle2"},_e={__name:"EventVariableSelect",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventIndex:{type:Number,default:0},eventVariableIndex:{type:Number,required:!0},bitMask:{type:Number,default:255},name:{type:String,required:!1},options:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(t.name?t.name:t.eventVariableIndex,(0,a.WQ)("store")),s=(0,n.KR)();var i=(0,n.KR)();const d=(0,a.EW)(()=>w(l,t.nodeNumber,t.eventIdentifier,t.eventIndex,t.eventVariableIndex));(0,a.wB)(d,()=>{s.value=d.value&t.bitMask});const r=e=>{let a=d.value;a|=e.value&t.bitMask,a&=e.value|~t.bitMask,x(l,t.nodeNumber,t.eventIdentifier,t.eventIndex,t.eventVariableIndex,a,!0,b(t.configuration))};return(0,a.sV)(()=>{let e=w(l,t.nodeNumber,t.eventIdentifier,t.eventIndex,t.eventVariableIndex);for(var a in s.value=e&t.bitMask,i.value=[],t.options)if(void 0!=t.options[a].overload){var n=be(t.nodeNumber,t.options[a].overload,l);if(n){var o={value:t.options[a].value,label:n};i.value.push(o)}}else void 0!=t.options[a].label&&i.value.push(t.options[a])}),(t,l)=>{const d=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-select"),c=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(c,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",fe,[(0,a.eW)((0,o.v_)(e.displayTitle)+" ",1),(0,a.bF)(d,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,o.v_)(e.eventVariableIndex),1)]),_:1})]),(0,a.Lk)("div",ye,(0,o.v_)(e.displaySubTitle),1),(0,a.bF)(u,{modelValue:s.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>s.value=e),r],dense:"",options:(0,n.R1)(i),"popup-content-class":"no-margin no-padding","map-options":""},null,8,["modelValue","options"])]),_:1})]),_:1})}}};var he=l(4940);const ke=_e,Ne=ke;L()(_e,"components",{QCard:K.A,QCardSection:A.A,QSelect:he.A});const xe={class:"text-h6"},we={class:"text-subtitle2"},qe="EventVariableSlider",Fe={__name:"EventVariableSlider",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventIndex:{type:Number,default:0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayScale:{type:Number,default:1},displayUnits:{type:String,default:""},displayOffset:{type:Number,default:0},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(0,a.WQ)("store"),s=(0,n.KR)(!1),i=(0,n.KR)(""),d=(0,a.EW)(()=>{for(var e=0,l=t.startBit;l<=t.endBit;l++)e+=1<<l;return e}),r=(0,a.EW)(()=>{var e=u.value*t.displayScale+t.displayOffset;return t.displayScale>=1||(e=t.displayScale>=.1?e.toFixed(1):t.displayScale>=.01?e.toFixed(2):e.toFixed(3)),e}),u=(0,a.EW)({get(){return w(l,t.nodeNumber,t.eventIdentifier,t.eventIndex,t.eventVariableIndex)},set(e){let a=w(l,t.nodeNumber,t.eventIdentifier,t.eventIndex,t.eventVariableIndex);if(e<=t.max&&e>=t.min){let n=e;n<<=t.startBit,a|=n&d.value,a&=n|~d.value,s.value=!1,i.value="",x(l,t.nodeNumber,t.eventIdentifier,t.eventIndex,t.eventVariableIndex,a,!0,b(t.configuration))}else console.log(qe+`: Invalid Value : ${e}`),i.value="Invalid Value",s.value=!0}});(0,a.sV)(()=>{});const c=()=>{console.log(qe+": clickNegative"),u.value>t.min&&u.value--},m=()=>{console.log(qe+": clickNegative"),u.value>t.min+5?u.value-=5:u.value=t.min},v=()=>{console.log(qe+": clickPositive"),u.value<t.max&&u.value++},p=()=>{console.log(qe+": clickPositive"),u.value<t.max-5?u.value+=5:u.value=t.max};return(t,l)=>{const n=(0,a.g2)("q-card-section"),s=(0,a.g2)("q-badge"),i=(0,a.g2)("q-slider"),d=(0,a.g2)("q-btn"),b=(0,a.g2)("q-space"),g=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(g,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{style:{height:"150px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",xe,[(0,a.eW)((0,o.v_)(e.displayTitle)+" ",1),(0,a.bF)(n,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,o.v_)(e.eventVariableIndex),1)]),_:1})]),(0,a.Lk)("div",we,(0,o.v_)(e.displaySubTitle),1),(0,a.bF)(s,{color:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(r.value)+" "+(0,o.v_)(e.displayUnits),1)]),_:1}),(0,a.bF)(i,{"model-value":u.value,max:e.max,min:e.min,onChange:l[0]||(l[0]=e=>{u.value=e})},null,8,["model-value","max","min"]),(0,a.bF)(g,{flat:"",class:"row no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"left",dense:"",color:"blue",icon:"remove",size:"sm",onClick:l[1]||(l[1]=e=>c()),"no-caps":""})]),_:1}),(0,a.bF)(b),(0,a.bF)(n,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"left",dense:"",color:"blue",label:"-5",size:"sm",onClick:l[2]||(l[2]=e=>m()),"no-caps":""})]),_:1}),(0,a.bF)(b),(0,a.bF)(b),(0,a.bF)(b),(0,a.bF)(b),(0,a.bF)(b),(0,a.bF)(b),(0,a.bF)(n,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"right",dense:"",color:"blue",label:"+5",size:"sm",onClick:l[3]||(l[3]=e=>p()),"no-caps":""})]),_:1}),(0,a.bF)(b),(0,a.bF)(n,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"right",dense:"",color:"blue",icon:"add",size:"sm",onClick:l[4]||(l[4]=e=>v()),"no-caps":""})]),_:1})]),_:1})]),_:1})]),_:1})}}};var Ve=l(1444),Ce=l(1693),Ie=l(3676);const Ee=Fe,Ae=Ee;L()(Fe,"components",{QCard:K.A,QCardSection:A.A,QBadge:ne.A,QSlider:Ve.A,QBtn:Ce.A,QSpace:Ie.A});const Qe={class:"no-padding no-margin"},Re={class:"no-padding no-margin"},Le={class:"no-padding no-margin",style:{border:"1px solid grey"}},Se={__name:"EventVariableTabs",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventIndex:{type:Number,required:!0}},setup(e){const t=e,l=(0,n.KR)(),s=(0,n.KR)();(0,a.WQ)("store");return(0,a.sV)(()=>{l.value=t.configuration.tabPanels,s.value=l.value[0].displayTitle}),(e,i)=>{const d=(0,a.g2)("q-tab"),r=(0,a.g2)("q-tabs"),u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-tab-panel"),m=(0,a.g2)("q-tab-panels");return(0,a.uX)(),(0,a.CE)("div",Qe,[(0,a.bF)(r,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),"outside-arrows":"","narrow-indicator":"",dense:"",style:{"max-width":"92vw"}},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,e=>((0,a.uX)(),(0,a.Wv)(d,{key:e.displayTitle,label:e.displayTitle,name:e.displayTitle},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),(0,a.Lk)("div",Re,[(0,a.bF)(m,{"keep-alive":"",modelValue:s.value,"onUpdate:modelValue":i[1]||(i[1]=e=>s.value=e)},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,e=>((0,a.uX)(),(0,a.Wv)(c,{key:e.displayTitle,name:e.displayTitle},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Le,[(0,a.bF)(u,{class:"q-py-none no-margin text-body1"},{default:(0,a.k6)(()=>[(0,a.Lk)("b",null,(0,o.v_)(e.displaySubTitle),1)]),_:2},1024),(0,a.bF)(u,{class:"row"},{default:(0,a.k6)(()=>[(0,a.bF)((0,n.R1)(ze),{configuration:e.items,nodeNumber:t.nodeNumber,eventIdentifier:t.eventIdentifier,eventIndex:t.eventIndex},null,8,["configuration","nodeNumber","eventIdentifier","eventIndex"])]),_:2},1024)])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])])}}};var We=l(2980),Be=l(327),Te=l(9041),De=l(1746);const Ke=Se,Ue=Ke;L()(Se,"components",{QTabs:We.A,QTab:Be.A,QTabPanels:Te.A,QTabPanel:De.A,QCardSection:A.A});const Oe={class:"q-pa-xs row"},Xe={__name:"EventVariables",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventIndex:{type:Number,required:!0}},setup(e){const t=e,l=(0,a.WQ)("store"),o=e=>{var a=!0;return e.visibilityLogic&&(a=pe(t.nodeNumber,e.visibilityLogic,l,t.eventIdentifier,t.eventIndex)),a};return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(()=>{}),(l,s)=>((0,a.uX)(),(0,a.CE)("div",Oe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.configuration,e=>((0,a.uX)(),(0,a.CE)("div",{key:e},["EventVariableBitArray"==e.type&&o(e)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(O),{key:0,nodeNumber:t.nodeNumber,eventIdentifier:t.eventIdentifier,eventIndex:t.eventIndex,eventVariableIndex:e.eventVariableIndex,bitCollection:e.bitCollection,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,configuration:e},null,8,["nodeNumber","eventIdentifier","eventIndex","eventVariableIndex","bitCollection","displayTitle","displaySubTitle","configuration"])):(0,a.Q3)("",!0),"EventVariableBitSingle"==e.type&&o(e)?((0,a.uX)(),(0,a.Wv)((0,n.R1)($),{key:1,nodeNumber:t.nodeNumber,eventIdentifier:t.eventIdentifier,eventIndex:t.eventIndex,eventVariableIndex:e.eventVariableIndex,bit:e.bit,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,configuration:e},null,8,["nodeNumber","eventIdentifier","eventIndex","eventVariableIndex","bit","displayTitle","displaySubTitle","configuration"])):(0,a.Q3)("",!0),"EventVariableGroup"==e.type&&o(e)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(ee),{key:2,"node-number":t.nodeNumber,eventIdentifier:t.eventIdentifier,eventIndex:t.eventIndex,configuration:e},null,8,["node-number","eventIdentifier","eventIndex","configuration"])):(0,a.Q3)("",!0),"EventVariableNumber"==e.type&&o(e)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(de),{key:3,"node-number":t.nodeNumber,eventIdentifier:t.eventIdentifier,eventIndex:t.eventIndex,eventVariableIndex:e.eventVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayOffset:e.displayOffset,displayUnits:e.displayUnits,startBit:e.startBit,endBit:e.endBit,min:e.min,max:e.max,configuration:e},null,8,["node-number","eventIdentifier","eventIndex","eventVariableIndex","displayTitle","displaySubTitle","displayScale","displayOffset","displayUnits","startBit","endBit","min","max","configuration"])):(0,a.Q3)("",!0),"EventVariableSelect"==e.type&&o(e)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(Ne),{key:4,nodeNumber:t.nodeNumber,eventIdentifier:t.eventIdentifier,eventIndex:t.eventIndex,eventVariableIndex:e.eventVariableIndex,bitMask:e.bitMask,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,options:e.options,configuration:e},null,8,["nodeNumber","eventIdentifier","eventIndex","eventVariableIndex","bitMask","displayTitle","displaySubTitle","options","configuration"])):(0,a.Q3)("",!0),"EventVariableSlider"==e.type&&o(e)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(Ae),{key:5,"node-number":t.nodeNumber,eventIdentifier:t.eventIdentifier,eventIndex:t.eventIndex,eventVariableIndex:e.eventVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayUnits:e.displayUnits,displayOffset:e.displayOffset,min:e.min,max:e.max,startBit:e.startBit,endBit:e.endBit,configuration:e},null,8,["node-number","eventIdentifier","eventIndex","eventVariableIndex","displayTitle","displaySubTitle","displayScale","displayUnits","displayOffset","min","max","startBit","endBit","configuration"])):(0,a.Q3)("",!0),"EventVariableTabs"==e.type&&o(e)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(Ue),{key:6,"node-number":t.nodeNumber,eventIdentifier:t.eventIdentifier,eventIndex:t.eventIndex,configuration:e},null,8,["node-number","eventIdentifier","eventIndex","configuration"])):(0,a.Q3)("",!0)]))),128))]))}},Me=Xe,ze=Me,Pe="EventRawVariableSingle",$e={__name:"EventRawVariableSingle",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventIndex:{type:Number,required:!0},eventVariableIndex:{type:Number,required:!0},numberBase:{type:String,default:"decimal"},configuration:{type:Object}},setup(e){const t=e,l="Variable "+t.eventVariableIndex,o=(0,a.WQ)("store"),s=(0,n.KR)(!1),i=(0,n.KR)(""),d=(0,n.KR)(),u=(0,a.EW)(()=>w(o,t.nodeNumber,t.eventIdentifier,t.eventIndex,t.eventVariableIndex));(0,a.wB)(u,()=>{v(u.value)});const c=(0,a.EW)(()=>t.numberBase);(0,a.wB)(c,()=>{v(u.value)});const m=e=>{try{let l=e,a=e.toUpperCase().split("X");l=a.length>1?parseInt(a[1],16):parseInt(a[0]),l<0||l>255||Number.isNaN(l)?(console.log(Pe+`: value error ${l}`),s.value=!0,i.value="Invalid Value"):(i.value="",s.value=!1,x(o,t.nodeNumber,t.eventIdentifier,t.eventIndex,t.eventVariableIndex,l,!0,b(t.configuration)))}catch(e){console.log(Pe+": update_event : "+e)}},v=e=>{"decimal"==t.numberBase?d.value=e:d.value="0x"+(0,r.xT)(e,2)};return(0,a.sV)(()=>{v(u.value)}),(e,t)=>{const n=(0,a.g2)("q-input"),o=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(o,{class:"q-pa-xs",flat:"",style:{width:"120px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{class:"bg-white",filled:"",label:l,mask:"NNNN",debounce:"100",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:m},null,8,["modelValue","error-message","error"])]),_:1})}}},Ge=$e,je=Ge;L()($e,"components",{QCard:K.A,QInput:oe.A});const He={class:"text-h6"},Ye={class:"q-pa-none row"},Je="EventRawVariables",Ze={__name:"EventRawVariables",props:{nodeNumber:{type:Number,default:0},eventIdentifier:{type:String,required:!0},eventIndex:{type:Number,required:!0},configuration:{type:Object}},setup(e){const t=(0,a.WQ)("store"),l=(0,n.KR)("decimal"),s=e,i=()=>{console.log(Je+": clickToggle"),l.value="decimal"==l.value?l.value="hex":l.value="decimal"};return(d,r)=>{const u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-btn"),m=(0,a.g2)("q-card-actions"),v=(0,a.g2)("q-card"),b=(0,a.g2)("q-separator");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(v,{flat:"",class:"q-pa-none q-ma-none row justify-between"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{class:"text-primary"},{default:(0,a.k6)(()=>r[1]||(r[1]=[(0,a.Lk)("div",{class:"text-h6"},"Raw view",-1)])),_:1,__:[1]}),(0,a.bF)(m,{class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{size:"sm",color:"blue",label:"Toggle",onClick:r[0]||(r[0]=e=>i())}),r[2]||(r[2]=(0,a.eW)("    ")),(0,a.Lk)("div",He," display is in "+(0,o.v_)(l.value),1)]),_:1,__:[2]}),(0,a.bF)(u,null,{default:(0,a.k6)(()=>r[3]||(r[3]=[(0,a.Lk)("div",{class:"text-body"},"Enter value in decimal, or hexadecimal preceeded by '0x' (e.g. 0x55), irrespective of display format ",-1)])),_:1,__:[3]})]),_:1}),(0,a.Lk)("div",Ye,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(t).state.nodes[s.nodeNumber].parameters[5],t=>((0,a.uX)(),(0,a.Wv)((0,n.R1)(je),{eventVariableIndex:t,nodeNumber:s.nodeNumber,eventIdentifier:s.eventIdentifier,eventIndex:e.eventIndex,configuration:e.configuration,key:t,numberBase:l.value},null,8,["eventVariableIndex","nodeNumber","eventIdentifier","eventIndex","configuration","numberBase"]))),128)),(0,a.bF)(b)])],64)}}};var et=l(2669),tt=l(386);const lt=Ze,at=lt;L()(Ze,"components",{QCard:K.A,QCardSection:A.A,QCardActions:et.A,QBtn:Ce.A,QSeparator:tt.A});const nt={class:"text-caption"},ot={class:"text-h6"},st="WaitingOnBusTrafficDialog",it={__name:"WaitingOnBusTrafficDialog",props:{modelValue:{type:Boolean,required:!0},message:{type:String,required:!0},callingModule:{type:String,default:""}},emits:["update:modelValue","WaitingOnBusTrafficDialogEvent"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),n=e,s=t,i=(0,a.EW)({get(){return n.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,async()=>{1==i.value&&await d()});const d=async()=>{l.state.cbusTrafficTimeStamp=Date.now();while(Date.now()-l.state.cbusTrafficTimeStamp<1e3)await(0,r.yy)(10);(0,r.Qn)(st+": waitOnBusTraffic ended "+(Date.now()-l.state.cbusTrafficTimeStamp)),s("WaitingOnBusTrafficDialogEvent","finished"),i.value=!1};return(t,l)=>{const n=(0,a.g2)("q-card-section"),s=(0,a.g2)("q-spinner-orbit"),d=(0,a.g2)("q-btn"),r=(0,a.g2)("q-card-actions"),u=(0,a.g2)("q-card"),c=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(c,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",nt,(0,o.v_)(e.callingModule),1),(0,a.Lk)("div",ot,(0,o.v_)(e.message),1),l[1]||(l[1]=(0,a.Lk)("div",{class:"text-h6"},"Please wait",-1))]),_:1,__:[1]}),(0,a.bF)(n,{class:"text-h6",align:"center"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{color:"primary",size:"2em"})]),_:1}),(0,a.bF)(r,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(d,{flat:"",label:"Close"},null,512),[[m]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};var dt=l(2156),rt=l(7288),ut=l(8672);const ct=it,mt=ct;L()(it,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QSpinnerOrbit:rt.A,QCardActions:et.A,QBtn:Ce.A}),L()(it,"directives",{ClosePopup:ut.A});const vt={class:"text-h6"},bt={class:"text-h6"},pt="NodeBackupDialog",gt={__name:"NodeBackupDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,n.KR)(!1),u=(0,n.KR)(""),c=(0,n.KR)(""),m=(0,n.KR)("starting"),v=e,b=t,p=(0,a.EW)({get(){return v.modelValue},set(e){b("update:modelValue",e)}});(0,a.wB)(p,()=>{p.value&&g()});const g=async()=>{console.log(pt+": backupNode "+v.nodeNumber);var e=!1,t="",a="negative";try{let e=17;1==i.state.layout.connectionDetails.FCU_Compatibility&&(e=16);let t=V().encodeMODE(0,e);i.methods.send_cbus_message(t)}catch(e){console.log(pt+`: backupNode ${e}`)}m.value="refresh event variables",_(i,v.nodeNumber);let n=Date.now();m.value="loading node variables",e=await f(),0==e&&(console.log(pt+": backupNode "+v.nodeNumber+" failed to load Node variables"),t="Node variable load failed"),m.value="waiting for events";while(Date.now()-n<1e3)await r.yy(100);e&&(m.value="loading event variables",e=await y(),0==e&&(console.log(pt+": backupNode "+v.nodeNumber+" failed to load Event variables"),t="Event variable load failed")),e?(i.methods.save_node_backup(v.nodeNumber,i.state.nodes[v.nodeNumber]),m.value="Backup completed",i.eventBus.emit("NODE_BACKUP_COMPLETED")):(m.value=t,l.notify({message:t,timeout:1e3,type:a,position:"center",actions:[{label:"Dismiss",handler:()=>{}}]}))},f=async()=>{var e=!1;i.methods.request_all_node_variables(v.nodeNumber),c.value="Loading Node Variables",u.value="",d.value=!0;var t=Date.now();while(Date.now()-t<6e4){if(u.value.length>0){e=!0;break}await r.yy(100)}return d.value=!1,e},y=async()=>{var e=!1;try{if(c.value="Loading Event Variables",u.value="",d.value=!0,1==i.getters.node_useEventIndex(v.nodeNumber)){r.Qn(pt+": loadEventVariables: node_useEventIndex");let e=i.getters.node_numberOfEvents(v.nodeNumber);r.Qn(pt+`: loadEventVariables: events ${e}`);for(var t=1;t<=e;t++)r.Qn(pt+`: loadEventVariables: variables index ${t}`),i.methods.request_event_variables_by_index(v.nodeNumber,t)}else i.methods.requestAllEventVariablesForNode(v.nodeNumber);var l=Date.now();while(Date.now()-l<3e5){if(u.value.length>0){e=!0;break}await r.yy(100)}d.value=!1}catch(e){console.log(pt+": loadEventVariables: "+e)}return e};return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(t,l)=>{const s=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),v=(0,a.g2)("q-card"),b=(0,a.g2)("q-dialog"),g=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(b,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=e=>p.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(v,{style:{"min-width":"450px","min-height":"300px"}},{default:(0,a.k6)(()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",vt," Backup node "+(0,o.v_)((0,n.R1)(i).getters.node_name(e.nodeNumber)),1)]),_:1}),(0,a.bF)(v,{style:{height:"200px"},class:"q-pa-sm q-ma-sm"},{default:(0,a.k6)(()=>[l[3]||(l[3]=(0,a.Lk)("div",{class:"text-primary"},"status",-1)),(0,a.Lk)("div",bt,(0,o.v_)(m.value),1)]),_:1,__:[3]})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(mt),{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value=e),callingModule:"Node Backup",message:c.value,onWaitingOnBusTrafficDialogEvent:l[2]||(l[2]=e=>u.value=e)},null,8,["modelValue","message"])],64)}}};var ft=l(6868);const yt=gt,_t=yt;L()(gt,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A}),L()(gt,"directives",{ClosePopup:ut.A});var ht=l(9104);const kt={class:"text-h6"},Nt="NodeChannelNamesDialog",xt={__name:"NodeChannelNamesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},numberOfChannels:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=e,i=t,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}}),r=(0,n.KR)([]),u=[{name:"channelNumber",field:"channelNumber",required:!0,label:"Channel Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name (click to edit)",align:"left",sortable:!0}],c=async()=>{r.value=[];for(let e=1;e<=s.numberOfChannels;e++)r.value.push({channelNumber:e,name:l.getters.node_channel_name(s.nodeNumber,e)})},m=(e,t)=>{console.log(Nt+`: nameChanged: ${t} ${e}`),l.setters.node_channel_name(s.nodeNumber,t,e),c()};(0,a.$u)(()=>{c()});return(t,s)=>{const i=(0,a.g2)("q-btn"),c=(0,a.g2)("q-banner"),v=(0,a.g2)("q-td"),b=(0,a.g2)("q-input"),p=(0,a.g2)("q-popup-edit"),g=(0,a.g2)("q-tr"),f=(0,a.g2)("q-table"),y=(0,a.g2)("q-card-section"),_=(0,a.g2)("q-card"),h=(0,a.g2)("q-dialog"),k=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(h,{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(_,{style:{"min-width":"500px"}},{default:(0,a.k6)(()=>[(0,a.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",kt," Edit channel names for : "+(0,o.v_)((0,n.R1)(l).getters.node_name(e.nodeNumber)),1)]),_:1}),(0,a.bF)(_,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(y,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none-xs"},{default:(0,a.k6)(()=>[(0,a.bF)(f,{flat:"",bordered:"",dense:"",rows:r.value,columns:u,"row-key":"channelNumber","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)(e=>[(0,a.bF)(g,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(v,{key:"channelNumber",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.channelNumber),1)]),_:2},1032,["props"]),(0,a.bF)(v,{key:"name",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.name)+" ",1),(0,a.bF)(p,{modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,buttons:"",onSave:t=>m(t,e.row.channelNumber)},{default:(0,a.k6)(e=>[(0,a.bF)(b,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,dense:"",autofocus:"",counter:"",onKeyup:(0,ht.jR)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};var wt=l(9212),qt=l(4488),Ft=l(5262),Vt=l(3486);const Ct=xt,It=Ct;L()(xt,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QTable:wt.A,QTr:qt.A,QTd:Ft.A,QPopupEdit:Vt.A,QInput:oe.A}),L()(xt,"directives",{ClosePopup:ut.A});const Et={class:"text-h6"},At="MDFDownloadDialog",Qt={__name:"MDFDownloadDialog",props:{modelValue:{type:Boolean,required:!0},moduleDescriptorFilename:{type:String}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),n=e,s=t,i=(0,a.EW)({get(){return n.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,()=>{console.log(At+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const d=async e=>{console.log(At+": actionDownload"),await(0,r.yy)(500);let t=JSON.stringify(l.state.exported_MDF,null,"  "),a=document.createElement("a");a.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)};return(t,l)=>{const n=(0,a.g2)("q-btn"),s=(0,a.g2)("q-banner"),r=(0,a.g2)("q-card-actions"),u=(0,a.g2)("q-card"),c=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(c,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(n,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Et," Download "+(0,o.v_)(e.moduleDescriptorFilename),1)]),_:1}),(0,a.bF)(u,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(r,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(n,{color:"positive",label:"Download",onClick:l[0]||(l[0]=t=>d(e.moduleDescriptorFilename))},null,512),[[m,2]])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Rt=Qt,Lt=Rt;L()(Qt,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardActions:et.A}),L()(Qt,"directives",{ClosePopup:ut.A});const St={class:"text-subtitle2"},Wt="MDFUploadDialog",Bt={__name:"MDFUploadDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,n.KR)(),r=e,u=t,c=(0,a.EW)({get(){return r.modelValue},set(e){u("update:modelValue",e)}});(0,a.wB)(c,()=>{console.log(Wt+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const m=()=>{if(d.value){var e=d.value.name;console.log(Wt+": selected filename "+e);let t=new FileReader;t.readAsText(d.value),t.onload=function(){try{var a=JSON.parse(t.result);a["moduleDescriptorFilename"]=e,console.log(Wt+": actionUpload: "+a.moduleDescriptorFilename),i.methods.import_module_descriptor(r.nodeNumber,a)}catch(e){l.notify({message:"Module Descriptor file upload has failed",caption:"please check the file is valid JSON, and try again",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]})}},d.value=null}else console.log(Wt+": actionUpload: uploadFile no value ")};return(e,t)=>{const l=(0,a.g2)("q-btn"),s=(0,a.g2)("q-banner"),r=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-file"),v=(0,a.g2)("q-card-actions"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),g=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(p,{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=e=>c.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(b,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])]),default:(0,a.k6)(()=>[t[3]||(t[3]=(0,a.Lk)("div",{class:"text-h6"}," MDF upload ",-1))]),_:1,__:[3]}),(0,a.bF)(r,null,{default:(0,a.k6)(()=>t[4]||(t[4]=[(0,a.Lk)("div",{class:"text-subtitle2"},"Select a file to upload",-1),(0,a.Lk)("div",{class:"text-subtitle2"},[(0,a.eW)(" The file will be stored with it's original filename"),(0,a.Lk)("br"),(0,a.eW)(" If the module name is currently unknown, the 'name' portion from the filename will be used"),(0,a.Lk)("br"),(0,a.eW)(" The filename format is moduleName-moduleIdentity-moduleVersion.json ")],-1)])),_:1,__:[4]}),(0,a.bF)(u,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),label:"Pick one file",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"]),(0,a.bF)(r,null,{default:(0,a.k6)(()=>[t[8]||(t[8]=(0,a.Lk)("div",{class:"text-subtitle2"},"Current node:",-1)),(0,a.Lk)("div",St,[(0,a.eW)(" Module name: "+(0,o.v_)((0,n.R1)(i).state.nodes[(0,n.R1)(i).state.selected_node].moduleName),1),t[5]||(t[5]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Module identifier: "+(0,o.v_)((0,n.R1)(i).state.nodes[(0,n.R1)(i).state.selected_node].moduleIdentifier),1),t[6]||(t[6]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Module version: "+(0,o.v_)((0,n.R1)(i).state.nodes[(0,n.R1)(i).state.selected_node].moduleVersion),1),t[7]||(t[7]=(0,a.Lk)("br",null,null,-1))])]),_:1,__:[8]}),(0,a.bF)(r,null,{default:(0,a.k6)(()=>t[9]||(t[9]=[(0,a.Lk)("div",{class:"text-subtitle2"},"If this module descriptor already exists on the server, it will be overwritten ",-1)])),_:1,__:[9]}),(0,a.bF)(v,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{color:"positive",label:"Upload",onClick:t[1]||(t[1]=e=>m())},null,512),[[g]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};var Tt=l(9980);const Dt=Bt,Kt=Dt;L()(Bt,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QFile:Tt.A,QCardActions:et.A}),L()(Bt,"directives",{ClosePopup:ut.A});const Ut={class:"text-subtitle2"},Ot={class:"q-pa-xs row"},Xt={class:"text-body2"},Mt="MDFDialog",zt={__name:"MDFDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,n.KR)(!1),u=(0,n.KR)(!1),c=(0,n.KR)(),m=(0,n.KR)(),v=(0,n.KR)(),b=(0,n.KR)(!1),p=e,g=t,f=(0,a.EW)({get(){return p.modelValue},set(e){g("update:modelValue",e)}});(0,a.wB)(f,()=>{b.value=!1,q(),F(),h()});const y=(0,a.EW)(()=>i.state.MDFupdateTimestamp);(0,a.wB)(y,()=>{q(),F(),h()});const _=(0,a.EW)(()=>i.state.server.nodes[p.nodeNumber]);(0,a.wB)(_,()=>{q(),F()});const h=()=>{m.value="",v.value="";try{m.value=i.state.nodeDescriptors[p.nodeNumber].moduleDescriptorFilename,m.value&&(v.value=i.state.nodeDescriptors[p.nodeNumber].moduleDescriptorLocation)}catch{}},k=(0,n.KR)([]),N=[{name:"file",field:"file",required:!0,label:"File",align:"left",sortable:!0},{name:"timestamp",field:"timestamp",required:!0,label:"Timestamp",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],x=(0,n.KR)([]),w=[{name:"file",field:"file",required:!0,label:"File",align:"left",sortable:!0},{name:"timestamp",field:"timestamp",required:!0,label:"Timestamp",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],q=async()=>{void 0!=_.value&&(k.value=[],void 0!=_.value.SYSTEM_MDF_List&&_.value.SYSTEM_MDF_List.forEach(e=>{k.value.push({file:e[0],timestamp:r.Fm(e[1])})}),k.value.sort(function(e,t){return e.file<t.file?-1:1}))},F=async()=>{void 0!=_.value&&(x.value=[],void 0!=_.value.USER_MDF_List&&_.value.USER_MDF_List.forEach(e=>{let t=!1;void 0!=_.value.SYSTEM_MDF_List&&_.value.SYSTEM_MDF_List.forEach(l=>{l[0].toUpperCase()==e[0].toUpperCase()&&l[1]>e[1]&&(t=!0)}),x.value.push({file:e[0],timestamp:r.Fm(e[1]),obsolete:t})}),x.value.sort(function(e,t){return e.file<t.file?-1:1}))};(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(()=>{});const V=e=>{console.log(Mt+": clickDelete "+e);l.notify({message:"Are you sure you want to delete file "+e,timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.request_MDF_delete(e,p.nodeNumber)}},{label:"NO",color:"white",handler:()=>{}}]})},C=()=>{console.log(Mt+": clickToggleModuleDescriptor"),b.value=!b.value},I=e=>{console.log(Mt+": clickSystemDownload"),i.methods.request_MDF_export("SYSTEM",e),c.value=e,d.value=!0},E=e=>{console.log(Mt+": clickUserDownload"),i.methods.request_MDF_export("USER",e),c.value=e,d.value=!0},A=()=>{console.log(Mt+": clickUpload"),u.value=!0};return(t,l)=>{const s=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),g=(0,a.g2)("q-card-section"),y=(0,a.g2)("q-card-actions"),_=(0,a.g2)("q-card"),h=(0,a.g2)("q-td"),q=(0,a.g2)("q-tr"),F=(0,a.g2)("q-table"),Q=(0,a.g2)("q-chip"),R=(0,a.g2)("q-dialog"),L=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(R,{modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=e=>f.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(_,{class:"q-pa-none q-ma-none",style:{"min-width":"1100px","min-height":"60vh"}},{default:(0,a.k6)(()=>[(0,a.bF)(g,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[L,3]])]),default:(0,a.k6)(()=>[l[5]||(l[5]=(0,a.Lk)("div",{class:"text-h6"}," Module Descriptor File Management ",-1))]),_:1,__:[5]})]),_:1}),(0,a.bF)(g,{style:{"max-height":"85vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(_,{flat:"",style:{"min-width":"950px"},class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{style:{width:"450px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[l[12]||(l[12]=(0,a.Lk)("div",{class:"text-h6"},"Current node:",-1)),(0,a.Lk)("div",Ut,[(0,a.eW)(" Module name: "+(0,o.v_)((0,n.R1)(i).state.nodes[e.nodeNumber].moduleName),1),l[6]||(l[6]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Module identifier: "+(0,o.v_)((0,n.R1)(i).state.nodes[e.nodeNumber].moduleIdentifier),1),l[7]||(l[7]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Module version: "+(0,o.v_)((0,n.R1)(i).state.nodes[e.nodeNumber].moduleVersion),1),l[8]||(l[8]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Processor type: "+(0,o.v_)((0,n.R1)(i).state.nodes[e.nodeNumber].cpuName),1),l[9]||(l[9]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Processor code: "+(0,o.v_)((0,n.R1)(i).state.nodes[e.nodeNumber].parameters[9]),1),l[10]||(l[10]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Current module descriptor: "+(0,o.v_)(m.value),1),l[11]||(l[11]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Current descriptor location: "+(0,o.v_)(v.value),1)])]),_:1,__:[12]}),(0,a.bF)(g,{style:{width:"600px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[l[13]||(l[13]=(0,a.Lk)("div",{class:"text-subtitle2"},[(0,a.eW)(" The file is matched using the module identifier, version number and processor code, the name portion is not used"),(0,a.Lk)("br"),(0,a.eW)(" If no match is found, then it will fall back to using just the module identifier and the version number"),(0,a.Lk)("br"),(0,a.eW)(" Modules that need files using the processor code are the exception, most won't use it"),(0,a.Lk)("br"),(0,a.eW)(" User files always take precedence if same filename exists in System, allowing permanent override of System files"),(0,a.Lk)("br"),(0,a.eW)(" User file timestamp is in red if a newer System file exists - to use the newer System file, delete the User file"),(0,a.Lk)("br")],-1)),(0,a.bF)(y,{class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{color:"positive",size:"sm",label:"Upload new file",onClick:l[0]||(l[0]=e=>A())})]),_:1})]),_:1,__:[13]})]),_:1}),(0,a.bF)(_,{flat:"",style:{"max-height":"70vh","min-width":"950px"},class:"no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{flat:"",class:"no-margin q-pa-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(_,{flat:"",style:{"max-height":"49vh"},class:"scroll no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{class:"no-margin q-pa-xs",style:{"min-width":"430px"}},{default:(0,a.k6)(()=>[l[14]||(l[14]=(0,a.Lk)("div",{class:"text-h6"},"System files for this module type",-1)),(0,a.bF)(F,{flat:"",bordered:"",dense:"",rows:k.value,columns:N,"row-key":"file","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)(e=>[(0,a.bF)(q,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(h,{key:"file",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.file),1)]),_:2},1032,["props"]),(0,a.bF)(h,{key:"timestamp",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.timestamp),1)]),_:2},1032,["props"]),(0,a.bF)(h,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Download",onClick:t=>I(e.row.file),"no-caps":""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1,__:[14]})]),_:1}),(0,a.bF)(_,{flat:"",style:{"max-height":"50vh"},class:"scroll no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{class:"no-margin q-py-xs",style:{"min-width":"500px"}},{default:(0,a.k6)(()=>[l[15]||(l[15]=(0,a.Lk)("div",{class:"text-h6"},"User files for this module type",-1)),(0,a.bF)(F,{flat:"",bordered:"",dense:"",rows:x.value,columns:w,"row-key":"file","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)(e=>[(0,a.bF)(q,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(h,{key:"file",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.file),1)]),_:2},1032,["props"]),(0,a.bF)(h,{key:"timestamp",props:e},{default:(0,a.k6)(()=>[e.row.obsolete?((0,a.uX)(),(0,a.Wv)(Q,{key:0,dense:"",color:"white","text-color":"red"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.timestamp),1)]),_:2},1024)):((0,a.uX)(),(0,a.Wv)(Q,{key:1,dense:"",color:"white","text-color":"black"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.timestamp),1)]),_:2},1024))]),_:2},1032,["props"]),(0,a.bF)(h,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Download",onClick:t=>E(e.row.file),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Delete",onClick:t=>V(e.row.file),"no-caps":""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1,__:[15]})]),_:1})]),_:1})]),_:1}),(0,a.bF)(y,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{flat:"",label:"Toggle current module descriptor view",onClick:l[1]||(l[1]=e=>C())})]),_:1}),b.value?((0,a.uX)(),(0,a.Wv)(g,{key:0,class:"q-pa-sm"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Ot,[l[16]||(l[16]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Module descriptor"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",Xt,[(0,a.Lk)("pre",null,(0,o.v_)((0,n.R1)(i).state.nodeDescriptors[p.nodeNumber]),1)])])]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(Lt),{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=e=>d.value=e),moduleDescriptorFilename:c.value},null,8,["modelValue","moduleDescriptorFilename"]),(0,a.bF)((0,n.R1)(Kt),{modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=e=>u.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}};var Pt=l(6760);const $t=zt,Gt=$t;L()(zt,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QCardActions:et.A,QTable:wt.A,QTr:qt.A,QTd:Ft.A,QChip:Pt.A}),L()(zt,"directives",{ClosePopup:ut.A});const jt={class:"text-h6"},Ht={key:0},Yt={key:0,class:"text-h6"},Jt={class:"q-pa-xs row"},Zt={class:"q-pa-xs row"},el={class:"text-body2"},tl={class:"q-pa-xs row"},ll={class:"text-body2"},al="EventVariablesDialog",nl={__name:"EventVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0},eventIdentifier:{required:!0},eventIndex:{default:0},newEvent:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),{registerTimeout:i}=(0,I.A)(),d=(0,a.WQ)("store"),u=(0,n.KR)(!1),c=(0,n.KR)(!1),m=(0,n.KR)(!1),v=(0,n.KR)(!1),p=(0,n.KR)(!1),g=(0,n.KR)(!1),y=(0,n.KR)(!1),h=(0,n.KR)(),k=(0,n.KR)(),N=(0,n.KR)(0),w=(0,n.KR)(""),q=(0,n.KR)(""),F=(0,n.KR)(!1);var V=Date.now();const E=(0,n.KR)(),A=e,Q=t,R=(0,a.EW)({get(){return A.modelValue},set(e){Q("update:modelValue",e)}});(0,a.wB)(R,()=>{1==R.value&&(V=Date.now(),g.value=!1,void 0==S.value?(c.value=!0,v.value=!0,k.value=void 0):(c.value=!1,v.value=!1,k.value=S.value,h.value=d.state.nodeDescriptors[A.nodeNumber].eventVariableInformation,L()),d.getters.node_useSlots(A.nodeNumber)?E.value="slot":E.value="index",N.value=(0,C.r)(d,A.nodeNumber))});const L=()=>{let e=l.notify({message:"updating channel names",caption:"please wait....",timeout:0,position:"center",color:"primary"});i(()=>{k.value=(0,r.Gk)(d,S.value,A.nodeNumber),e()},300)};(0,a.wB)(m,()=>{try{0==m.value&&L()}catch{}});const S=(0,a.EW)(()=>{var e=void 0;try{e=d.state.nodeDescriptors[A.nodeNumber].eventVariables}catch{}return e});(0,a.wB)(S,()=>{1==R.value&&(void 0==S.value?(c.value=!0,v.value=!0):(v.value=!1,h.value=d.state.nodeDescriptors[A.nodeNumber].eventVariableInformation,L()),N.value=(0,C.r)(d,A.nodeNumber))}),(0,a.$u)(async()=>{});const W=()=>{(0,r.Qn)(al+`: clickChannelNames: number ${N.value}`),N.value>0&&(m.value=!0)},B=async()=>{if((0,r.Qn)(al+": clickClose: node "+A.nodeNumber+" eventIdentifier "+A.eventIdentifier),A.newEvent){(0,r.Qn)(al+": clickClose: new event");try{var e=d.state.nodes[A.nodeNumber];try{var t=e.storedEventsNI[A.eventIdentifier].variables[1];void 0==t&&(t=0)}catch(e){f(d,A.nodeNumber,A.eventIdentifier),t=0}x(d,A.nodeNumber,A.eventIdentifier,A.eventIndex,1,t,!0,b(S.value)),await(0,r.yy)(250),_(A.nodeNumber)}catch(e){(0,r.Qn)(al+": clickClose "+e)}}let a=d.state.nodes[A.nodeNumber].NodeModifiedTimestamp-V>0;a&&d.state.notification_settings.backup_notify&&l.notify({message:"Variables changed - Do you want to take a backup?",caption:"Yes, No or 'Don't remind me again'",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{F.value=!0}},{label:"NO",color:"white",handler:()=>{}},{label:"Don't remind me again",color:"white",handler:()=>{d.state.notification_settings.backup_notify=!1}}]})},T=async()=>{(0,r.Qn)(al+": clickRefresh"),d.methods.request_event_variables_by_identifier(A.nodeNumber,A.eventIdentifier),q.value="Loading Event Variables",u.value=!0},D=()=>{(0,r.Qn)(al+": clickToggleVariablesDescriptor"),g.value=!g.value},K=()=>{(0,r.Qn)(al+": clickToggleRaw"),c.value=!c.value},U=()=>{(0,r.Qn)(al+": clickToggleStoredEvents:"),y.value=!y.value},O=()=>{(0,r.Qn)(al+": clickUpdateModuleDescriptor"),d.methods.request_matching_mdf_list(A.nodeNumber,"USER"),d.methods.request_matching_mdf_list(A.nodeNumber,"SYSTEM"),p.value=!0};return(t,l)=>{const s=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),r=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-separator"),f=(0,a.g2)("q-card"),_=(0,a.g2)("q-card-actions"),x=(0,a.g2)("q-dialog"),V=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(x,{modelValue:R.value,"onUpdate:modelValue":l[7]||(l[7]=e=>R.value=e),persistent:"","full-width":"","full-height":"",position:"right"},{default:(0,a.k6)(()=>[(0,a.bF)(f,{class:"q-pa-none q-ml-xl"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[0==!N.value?((0,a.uX)(),(0,a.Wv)(s,{key:0,class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"channel names",onClick:l[0]||(l[0]=e=>W())})):(0,a.Q3)("",!0),(0,a.bF)(s,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:l[1]||(l[1]=e=>O())}),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:l[2]||(l[2]=e=>T())}),(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close",onClick:B},null,512),[[V]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",jt,[(0,a.eW)(" Node: "+(0,o.v_)((0,n.R1)(d).getters.node_name(A.nodeNumber))+"       ",1),(0,n.R1)(d).getters.node_useEventIndex(e.nodeNumber)?((0,a.uX)(),(0,a.CE)("span",Ht,(0,o.v_)(E.value)+": "+(0,o.v_)(e.eventIndex)+"       ",1)):(0,a.Q3)("",!0),(0,a.eW)(" event: "+(0,o.v_)((0,n.R1)(d).getters.event_name(A.eventIdentifier))+"       ",1)])]),_:1})]),_:1}),(0,a.bF)(f,{class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{class:"scroll no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bF)(s,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:l[3]||(l[3]=e=>O())})]),default:(0,a.k6)(()=>[v.value?((0,a.uX)(),(0,a.CE)("div",Yt," *** Descriptor not loaded for this node *** ")):(0,a.Q3)("",!0)]),_:1}),h.value?((0,a.uX)(),(0,a.Wv)(r,{key:0,class:"q-pa-none q-ma-none text-h6"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(h.value),1)]),_:1})):(0,a.Q3)("",!0),(0,a.Lk)("div",Jt,[(0,n.R1)(d).state.nodeDescriptors[A.nodeNumber]?((0,a.uX)(),(0,a.Wv)((0,n.R1)(ze),{key:0,configuration:k.value,nodeNumber:A.nodeNumber,eventIdentifier:A.eventIdentifier,eventIndex:A.eventIndex},null,8,["configuration","nodeNumber","eventIdentifier","eventIndex"])):(0,a.Q3)("",!0)]),(0,a.bF)(b),c.value?((0,a.uX)(),(0,a.Wv)(r,{key:1,class:"q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)((0,n.R1)(at),{nodeNumber:e.nodeNumber,eventIdentifier:e.eventIdentifier,eventIndex:e.eventIndex,configuration:k.value},null,8,["nodeNumber","eventIdentifier","eventIndex","configuration"]),(0,a.bF)(b)]),_:1})):(0,a.Q3)("",!0),y.value?((0,a.uX)(),(0,a.Wv)(r,{key:2,class:"q-pa-xs"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Zt,[l[13]||(l[13]=(0,a.Lk)("div",{class:"text-primary text-h6"},[(0,a.eW)("Stored event"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",el,[(0,a.Lk)("pre",null,(0,o.v_)((0,n.R1)(d).state.nodes[e.nodeNumber].storedEventsNI[e.eventIdentifier]),1)])]),(0,a.bF)(b)]),_:1})):(0,a.Q3)("",!0),g.value?((0,a.uX)(),(0,a.Wv)(r,{key:3,class:"q-pa-xs"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",tl,[l[14]||(l[14]=(0,a.Lk)("div",{class:"text-primary text-h6"},[(0,a.eW)("Variables descriptor"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",ll,[(0,a.Lk)("pre",null,(0,o.v_)(S.value),1)])]),(0,a.bF)(b)]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1}),(0,a.bF)(_,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{flat:"",label:"Toggle raw view",onClick:l[4]||(l[4]=e=>K())}),(0,a.bF)(s,{flat:"",label:"Toggle stored event view",onClick:l[5]||(l[5]=e=>U())}),(0,a.bF)(s,{flat:"",label:"Toggle variables descriptor view",onClick:l[6]||(l[6]=e=>D())})]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(Gt),{modelValue:p.value,"onUpdate:modelValue":l[8]||(l[8]=e=>p.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,n.R1)(_t),{modelValue:F.value,"onUpdate:modelValue":l[9]||(l[9]=e=>F.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)(It,{modelValue:m.value,"onUpdate:modelValue":l[10]||(l[10]=e=>m.value=e),nodeNumber:e.nodeNumber,numberOfChannels:N.value},null,8,["modelValue","nodeNumber","numberOfChannels"]),(0,a.bF)((0,n.R1)(mt),{modelValue:u.value,"onUpdate:modelValue":l[11]||(l[11]=e=>u.value=e),callingModule:"EventVariablesDialog",message:q.value,onWaitingOnBusTrafficDialogEvent:l[12]||(l[12]=e=>w.value=e)},null,8,["modelValue","message"])],64)}}},ol=nl,sl=ol;L()(nl,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QSeparator:tt.A,QCardActions:et.A}),L()(nl,"directives",{ClosePopup:ut.A});const il={class:"text-h6"},dl={class:"q-gutter-sm"},rl={key:0},ul="EventIdentityDialog",cl={__name:"EventIdentityDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},eventIndex:{default:0},eventIdentifier:{default:"0000000"},bannerText:{type:String,default:"index"}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,n.KR)(),i=(0,n.KR)(),d=(0,n.KR)(!0),u=(0,n.KR)(),c=(0,n.KR)(!1),m=(0,n.KR)(),v=e,b=t,p=(0,a.EW)({get(){return v.modelValue},set(e){b("update:modelValue",e)}});(0,a.wB)(p,()=>{console.log(ul+": WATCH model"),1==p.value&&(r.Qn(ul+`: watch model: ${v.eventIdentifier}`),s.value=parseInt(v.eventIdentifier.substring(0,4),16),i.value=parseInt(v.eventIdentifier.substring(4,8),16),0==s.value?u.value="short":u.value="long")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const g=async()=>{r.Qn(ul+": clickAddEventIdentifier"),"short"==u.value&&(s.value=0);let e=parseInt(s.value).toString(16).toUpperCase().padStart(4,0);if(e+=parseInt(i.value).toString(16).toUpperCase().padStart(4,0),r.Qn(ul+`: clickAddEventIdentifier: entered_event_identifier ${e} `),1==l.getters.node_useEventIndex(v.nodeNumber)){l.methods.event_teach_by_index(v.nodeNumber,e,v.eventIndex,0,0,!0),await r.yy(500);let t=V().encodeNENRD(v.nodeNumber,v.eventIndex);l.methods.send_cbus_message(t)}else l.methods.event_teach_by_identifier(v.nodeNumber,e,1,1),l.methods.event_teach_by_identifier(v.nodeNumber,e,2,v.eventIndex),m.value=e,c.value=!0},f=()=>{r.Qn(ul+": clickLongEvent"),s.value=v.nodeNumber},y=()=>{r.Qn(ul+": clickShortEvent"),s.value=0};return(t,l)=>{const r=(0,a.g2)("q-btn"),v=(0,a.g2)("q-banner"),b=(0,a.g2)("q-card-section"),_=(0,a.g2)("q-radio"),h=(0,a.g2)("q-input"),k=(0,a.g2)("q-card-actions"),N=(0,a.g2)("q-card"),x=(0,a.g2)("q-dialog"),w=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(x,{modelValue:p.value,"onUpdate:modelValue":l[7]||(l[7]=e=>p.value=e)},{default:(0,a.k6)(()=>[(0,a.bF)(N,{style:{"min-width":"400px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(v,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[w]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",il," Event for "+(0,o.v_)(e.bannerText)+" "+(0,o.v_)(e.eventIndex),1)]),_:1})]),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",dl,[(0,a.bF)(_,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value=e),val:"long",label:"Long event",onClick:l[1]||(l[1]=e=>f())},null,8,["modelValue"]),(0,a.bF)(_,{modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=e=>u.value=e),val:"short",label:"Short event",onClick:l[3]||(l[3]=e=>y())},null,8,["modelValue"])])]),_:1}),(0,a.Lk)("div",null,[(0,a.bF)(b,null,{default:(0,a.k6)(()=>l[9]||(l[9]=[(0,a.Lk)("div",null,"Node Number",-1)])),_:1,__:[9]}),(0,a.bF)(b,{class:"q-pt-none"},{default:(0,a.k6)(()=>[(0,a.bF)(h,{disable:"short"==u.value,dense:"",modelValue:s.value,"onUpdate:modelValue":l[4]||(l[4]=e=>s.value=e),autofocus:""},null,8,["disable","modelValue"])]),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)(()=>l[10]||(l[10]=[(0,a.Lk)("div",null,"Event Number",-1)])),_:1,__:[10]}),(0,a.bF)(b,{class:"q-pt-none"},{default:(0,a.k6)(()=>[(0,a.bF)(h,{dense:"",modelValue:i.value,"onUpdate:modelValue":l[5]||(l[5]=e=>i.value=e),autofocus:""},null,8,["modelValue"])]),_:1})]),null!=u.value?((0,a.uX)(),(0,a.CE)("div",rl,[(0,a.bF)(k,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[d.value?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(r,{key:0,label:"Save Event",onClick:l[6]||(l[6]=e=>g())},null,512)),[[w]]):(0,a.Q3)("",!0)]),_:1})])):(0,a.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(sl),{modelValue:c.value,"onUpdate:modelValue":l[8]||(l[8]=e=>c.value=e),nodeNumber:e.nodeNumber,eventIdentifier:m.value,eventIndex:e.eventIndex},null,8,["modelValue","nodeNumber","eventIdentifier","eventIndex"])],64)}}};var ml=l(7878);const vl=cl,bl=vl;L()(cl,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QRadio:ml.A,QInput:oe.A,QCardActions:et.A}),L()(cl,"directives",{ClosePopup:ut.A});const pl={class:"text-h6"},gl="ActivateSlotDialog",fl={__name:"ActivateSlotDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,n.KR)([]),i=(0,n.KR)(),d=(0,n.KR)(!1),u=(0,n.KR)(),c=e,m=[{name:"eventIndex",field:"eventIndex",label:"Index",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!0}],v=t,b=(0,a.EW)({get(){return c.modelValue},set(e){v("update:modelValue",e)}});(0,a.wB)(b,()=>{l.getters.node_useSlots(c.nodeNumber)?u.value="slot":u.value="index",g()});const p=(0,a.EW)(()=>l.state.nodes.updateTimestamp);(0,a.wB)(p,()=>{c.nodeNumber&&g()}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const g=()=>{s.value=[];try{let e=l.getters.node_eventCapacity(c.nodeNumber);for(let t=1;t<=e;t++)if(void 0==l.state.nodes[c.nodeNumber].eventsByIndex[t]||"00000000"==l.state.nodes[c.nodeNumber].eventsByIndex[t].eventIdentifier){let e={eventIdentifier:"",nodeNumber:""};e["eventIndex"]=t,e["eventNumber"]="",e["eventType"]="",s.value.push(e)}s.value.sort(function(e,t){return e.eventIndex<t.eventIndex?-1:1})}catch(e){r.Qn(gl+`: update_rows: ${e} `)}},f=e=>{r.Qn(gl+`: clickEvent: eventIndex ${e}`),i.value=e,d.value=!0};return(t,l)=>{const r=(0,a.g2)("q-btn"),c=(0,a.g2)("q-banner"),v=(0,a.g2)("q-card-section"),p=(0,a.g2)("q-td"),g=(0,a.g2)("q-tr"),y=(0,a.g2)("q-table"),_=(0,a.g2)("q-card"),h=(0,a.g2)("q-dialog"),k=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(h,{modelValue:b.value,"onUpdate:modelValue":l[0]||(l[0]=e=>b.value=e)},{default:(0,a.k6)(()=>[(0,a.bF)(_,{style:{"min-width":"400px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(v,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",pl," Activate "+(0,o.v_)(u.value),1)]),_:1})]),_:1}),(0,a.bF)(v,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>l[2]||(l[2]=[(0,a.eW)(" Click the associated Event to activate a particular index ")])),_:1,__:[2]}),(0,a.bF)(_,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none-xs"},{default:(0,a.k6)(()=>[(0,a.bF)(y,{bordered:"",dense:"",rows:s.value,columns:m,"row-key":"eventIndex","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(g,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(p,{key:"eventIndex",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventIndex),1)]),_:2},1032,["props"]),(0,a.bF)(p,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(r,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Event","no-caps":"",onClick:t=>f(e.row.eventIndex)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(bl),{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value=e),nodeNumber:e.nodeNumber,eventIndex:i.value},null,8,["modelValue","nodeNumber","eventIndex"])],64)}}},yl=fl,_l=yl;L()(fl,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QTable:wt.A,QTr:qt.A,QTd:Ft.A}),L()(fl,"directives",{ClosePopup:ut.A});const hl={class:"text-h6"},kl={key:0,class:"text-h6"},Nl={key:0},xl="AddEventDialog",wl={__name:"AddEventDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:void 0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),i=(0,s.A)(),d=(0,n.KR)(),r=(0,n.KR)(),u=(0,n.KR)(),c=(0,n.KR)(),m=(0,n.KR)(!1),v=(0,n.KR)(!1),b=(0,n.KR)(!0),p=(0,n.KR)(!1),g=(0,n.KR)(),y=(0,n.KR)(!1),_=(0,n.KR)(""),h=(0,n.KR)("");var k=null;const N=e,x=t,w=(0,a.EW)({get(){return N.modelValue},set(e){x("update:modelValue",e)}});(0,a.wB)(w,()=>{1==w.value&&(g.value=void 0,void 0==N.nodeNumber?h.value="Add event":h.value="Add event for node "+l.getters.node_name(N.nodeNumber))}),(0,a.wB)(r,()=>{void 0==d.value&&"short"!=g.value||(v.value=!0)}),(0,a.wB)(d,()=>{void 0!=r.value&&(v.value=!0)});const q=e=>{e&&e in l.state.layout.eventDetails&&(p.value=!0,u.value=l.getters.event_name(e),c.value=l.getters.event_group(e))};(0,a.$u)(()=>{void 0!=N.nodeNumber&&0==l.getters.node_eventCapacity(N.nodeNumber)&&b.value,d.value=null,r.value=null,u.value=null,g.value=null,m.value=!1,v.value=!1,p.value=!1});const F=()=>{console.log(xl+": clickAddEvent "+d.value+" "+r.value),_.value=k,void 0!=N.nodeNumber&&f(l,N.nodeNumber,_.value)&&(y.value=!0),p.value||(l.setters.event_name(_.value,u.value),l.setters.event_group(_.value,c.value)),w.value=!1},V=()=>{console.log(xl+": clickNext "),"short"==g.value&&(d.value=0),k=parseInt(d.value).toString(16).toUpperCase().padStart(4,0),k+=parseInt(r.value).toString(16).toUpperCase().padStart(4,0),console.log(xl+": entered_event_identifier: "+k),q(k),console.log(xl+": eventAlreadyExistsInLayoutData: "+p.value);var e=!1;if(N.nodeNumber?void 0!=l.state.nodes[N.nodeNumber].storedEventsNI[k]&&(e=!0):p.value&&(e=!0),e){i.notify({message:"This event already exists",timeout:0,position:"center",color:"primary",actions:[{label:"continue",color:"white",handler:async()=>{}}]})}else m.value=!0};return(t,l)=>{const s=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),f=(0,a.g2)("q-card-section"),k=(0,a.g2)("q-radio"),N=(0,a.g2)("q-space"),x=(0,a.g2)("q-input"),q=(0,a.g2)("q-card"),C=(0,a.g2)("q-card-actions"),I=(0,a.g2)("q-dialog"),E=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(I,{modelValue:w.value,"onUpdate:modelValue":l[9]||(l[9]=e=>w.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(q,{style:{width:"600px","min-height":"200px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[E]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",hl,(0,o.v_)(h.value),1)]),_:1}),(0,a.bF)(f,null,{default:(0,a.k6)(()=>[0==b.value?((0,a.uX)(),(0,a.CE)("div",kl," This module does not support any stored events ")):(0,a.Q3)("",!0)]),_:1}),b.value?((0,a.uX)(),(0,a.CE)("div",Nl,[(0,a.bF)(f,{class:"q-py-none q-ma-xs row"},{default:(0,a.k6)(()=>[(0,a.bF)(k,{dense:"",modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=e=>g.value=e),val:"long",label:"Long event"},null,8,["modelValue"]),(0,a.bF)(N),(0,a.bF)(k,{dense:"",modelValue:g.value,"onUpdate:modelValue":l[1]||(l[1]=e=>g.value=e),val:"short",label:"Short event"},null,8,["modelValue"]),(0,a.bF)(N),(0,a.bF)(N)]),_:1}),(0,a.bF)(q,{style:{"min-height":"280px"}},{default:(0,a.k6)(()=>[(0,a.bF)(f,{style:{"min-height":"80px"},class:"q-pa-xs q-ma-none"},{default:(0,a.k6)(()=>["long"==g.value?((0,a.uX)(),(0,a.Wv)(f,{key:0,class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>l[11]||(l[11]=[(0,a.Lk)("div",{class:"text-body"},"Consumed events will need the number of the node that produces the event",-1),(0,a.Lk)("div",{class:"text-body"},"Events produced by this node will need the number of this node, as well as editing the event variables",-1)])),_:1,__:[11]})):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(q,{class:"q-py-none q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(q,{style:{width:"200px"}},{default:(0,a.k6)(()=>["long"==g.value?((0,a.uX)(),(0,a.Wv)(f,{key:0},{default:(0,a.k6)(()=>[(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>l[12]||(l[12]=[(0,a.Lk)("div",{class:"text-h6"},"Node Number",-1)])),_:1,__:[12]}),(0,a.bF)(f,{class:"q-px-xs q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{dense:"",modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=e=>d.value=e),type:"number",autofocus:"",rules:[e=>e<=65535||"Please use value no greater than 65535"]},null,8,["modelValue","rules"])]),_:1}),(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>l[13]||(l[13]=[(0,a.Lk)("div",{class:"text-h6"},"Event Number",-1)])),_:1,__:[13]}),(0,a.bF)(f,{class:"q-px-xs q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{dense:"",modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value=e),type:"number",rules:[e=>e<=65535||"Please use value no greater than 65535"]},null,8,["modelValue","rules"])]),_:1})]),_:1})):(0,a.Q3)("",!0),"short"==g.value?((0,a.uX)(),(0,a.Wv)(f,{key:1},{default:(0,a.k6)(()=>[(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>l[14]||(l[14]=[(0,a.Lk)("div",{class:"text-h6"},"Device Number",-1)])),_:1,__:[14]}),(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{dense:"",modelValue:r.value,"onUpdate:modelValue":l[4]||(l[4]=e=>r.value=e),type:"number",autofocus:"",rules:[e=>e<=65535||"Please use value no greater than 65535"]},null,8,["modelValue","rules"])]),_:1})]),_:1})):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(f,{style:{width:"200px"}},{default:(0,a.k6)(()=>[m.value||null==g.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(C,{key:0,align:"right",class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{disable:!v.value,color:"blue",label:"check event",onClick:l[5]||(l[5]=e=>V())},null,8,["disable"]),[[E]])]),_:1})),m.value?((0,a.uX)(),(0,a.Wv)(f,{key:1,class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>l[15]||(l[15]=[(0,a.Lk)("div",{class:"text-h6",style:{color:"dodgerblue"}},"Event OK",-1)])),_:1,__:[15]})):(0,a.Q3)("",!0)]),_:1})]),_:1})]),_:1}),(0,a.bF)(f,{class:"q-py-xs q-ma-none"},{default:(0,a.k6)(()=>[l[18]||(l[18]=(0,a.Lk)("div",{class:"text-body"},"Event Name and Event Group are optional values",-1)),l[19]||(l[19]=(0,a.Lk)("div",{class:"text-body"},"Input will be disabled if previously entered",-1)),(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>l[16]||(l[16]=[(0,a.Lk)("div",{class:"text-h6"},"Event Name",-1)])),_:1,__:[16]}),(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{disable:p.value,dense:"",modelValue:u.value,"onUpdate:modelValue":l[6]||(l[6]=e=>u.value=e)},null,8,["disable","modelValue"])]),_:1}),(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>l[17]||(l[17]=[(0,a.Lk)("div",{class:"text-h6"},"Event Group",-1)])),_:1,__:[17]}),(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{disable:p.value,dense:"",modelValue:c.value,"onUpdate:modelValue":l[7]||(l[7]=e=>c.value=e)},null,8,["disable","modelValue"])]),_:1})]),_:1,__:[18,19]}),(0,a.bF)(f,{class:"q-py-xs q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(C,{align:"right",class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{disable:!m.value,color:"blue",label:"Add Event",onClick:l[8]||(l[8]=e=>F())},null,8,["disable"]),[[E]])]),_:1})]),_:1})])):(0,a.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(sl),{modelValue:y.value,"onUpdate:modelValue":l[10]||(l[10]=e=>y.value=e),nodeNumber:e.nodeNumber,eventIdentifier:_.value,newEvent:!0},null,8,["modelValue","nodeNumber","eventIdentifier"])],64)}}},ql=wl,Fl=ql;L()(wl,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QRadio:ml.A,QSpace:Ie.A,QInput:oe.A,QCardActions:et.A}),L()(wl,"directives",{ClosePopup:ut.A});const Vl={class:"text-h6"},Cl="AdvancedEventsDialog",Il={__name:"AdvancedEventsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=e,u=t,c=(0,a.EW)({get(){return d.modelValue},set(e){u("update:modelValue",e)}}),m=()=>{r.Qn(Cl+": deleteAllEvents "+d.nodeNumber);l.notify({message:"Are you sure you want to delete all events for node "+i.getters.node_name(d.nodeNumber),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{k(i,d.nodeNumber)}},{label:"NO",color:"white",handler:()=>{}}]})},v=()=>{r.Qn(Cl+": clickSendNERD "+d.nodeNumber),i.methods.request_all_node_events(d.nodeNumber)},b=()=>{r.Qn(Cl+": clickSendNENRD "+d.nodeNumber),h(i,d.nodeNumber)};return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(t,l)=>{const s=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),r=(0,a.g2)("q-card-actions"),u=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),g=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(p,{modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=e=>c.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"min-width":"600px"}},{default:(0,a.k6)(()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Vl," Advanced events functions for node "+(0,o.v_)((0,n.R1)(i).getters.node_name(e.nodeNumber)),1)]),_:1}),(0,a.bF)(r,{align:"left",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Delete all events",onClick:l[0]||(l[0]=e=>m())},null,512),[[g]])]),_:1}),(0,n.R1)(i).state.develop?((0,a.uX)(),(0,a.Wv)(r,{key:0,align:"left",class:"text-primary"},{default:(0,a.k6)(()=>[l[4]||(l[4]=(0,a.eW)(" Develop ")),(0,a.bo)((0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Send NERD",onClick:l[1]||(l[1]=e=>v())},null,512),[[g]])]),_:1,__:[4]})):(0,a.Q3)("",!0),(0,n.R1)(i).state.develop?((0,a.uX)(),(0,a.Wv)(r,{key:1,align:"left",class:"text-primary"},{default:(0,a.k6)(()=>[l[5]||(l[5]=(0,a.eW)(" Develop ")),(0,a.bo)((0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Send NENRD",onClick:l[2]||(l[2]=e=>b())},null,512),[[g]])]),_:1,__:[5]})):(0,a.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"])}}},El=Il,Al=El;L()(Il,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardActions:et.A}),L()(Il,"directives",{ClosePopup:ut.A});const Ql={__name:"EventsByNodeViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,n=t,o=(0,a.EW)({get(){return l.modelValue},set(e){n("update:modelValue",e)}});return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])]),default:(0,a.k6)(()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Events By Node View ",-1))]),_:1,__:[1]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[2]||(t[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," This view is intended to allow management of the events for a specific node ",-1)])),_:1,__:[2]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text_body1"}," The intention is to always use 'fresh' data read from the nodes, and if the required data hasn't yet been read, there may be a pop-up displayed whilst that data is being read ",-1),(0,a.Lk)("div",{class:"text_body1"}," If the node has already been read, the display will use the data it has, but will update when the 'fresh' data arrives ",-1)])),_:1,__:[3]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[4]||(t[4]=[(0,a.Lk)("div",{class:"text_body1"}," The ADVANCED button gives access to further actions ",-1)])),_:1,__:[4]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[5]||(t[5]=[(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1)])),_:1,__:[5]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[6]||(t[6]=[(0,a.Lk)("div",{class:"text_body1"}," The Name option allows the setting of a Group name as well, which is very useful when used with the SEARCH option ",-1)])),_:1,__:[6]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[7]||(t[7]=[(0,a.Lk)("div",{class:"text_body1"}," The event source shows if the event has been read from the module (stored event) or if the event hasn't been read from the module, but has been seen on the CAN bus (Bus event), which is the case for default events on some modules that can't be read from the module ",-1)])),_:1,__:[7]})]),_:1})]),_:1},8,["modelValue"])}}},Rl=Ql,Ll=Rl;L()(Ql,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A}),L()(Ql,"directives",{ClosePopup:ut.A});const Sl={class:"text-h6"},Wl={class:"q-pa-xs q-gutter-sm"},Bl={class:"text-h6"},Tl={class:"text-h6"},Dl="EventTeachDialog",Kl={__name:"EventTeachDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,n.KR)(),u=(0,n.KR)(),c=(0,n.KR)(!1),m=(0,n.KR)(!1),v=(0,n.KR)(!1),b=(0,n.KR)(""),p=(0,n.KR)(""),g=(0,n.KR)(!0),y=(0,n.KR)(!1),_=(0,n.KR)(),h=(0,n.KR)([]),k=(0,n.KR)([]),N=(0,n.KR)([]),x=(0,n.KR)(),w=e,q=t,F=(0,a.EW)({get(){return w.modelValue},set(e){q("update:modelValue",e)}});(0,a.wB)(F,()=>{_.value=""}),(0,a.wB)(_,()=>{try{if(void 0!=_.value){(0,r.Qn)(Dl+`: WATCH newNode ${_.value}`);var e=_.value.split(":"),t=parseInt(e[0]);t&&(d.value=t,g.value=!1,(0,r.Qn)(Dl+`: WATCH newNode: nodeNumberToBeTaught ${t}`))}}catch(e){(0,r.Qn)(Dl+`: WATCH newNode ${e}`)}});const V=[{name:"number",field:"number",required:!0,label:"Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name",align:"left",sortable:!0},{name:"index",field:"index",required:!0,label:"Index",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],I=(0,a.EW)(()=>i.state.nodes.updateTimestamp);(0,a.wB)(I,()=>{w.eventIdentifier&&E()});const E=async()=>{try{N.value=[],k.value=[];var e=Object.values(i.state.nodes);e.forEach(e=>{if(e.nodeNumber>0&&e.storedEventsNI&&Object.values(e.storedEventsNI).length>0){let t=Object.values(e.storedEventsNI);t.forEach(async t=>{if(t.eventIdentifier==w.eventIdentifier){k.value.push(e.nodeNumber);var l=i.getters.node_name(e.nodeNumber);N.value.push({number:e.nodeNumber,name:l,eventIndex:t.eventIndex,eventIdentifier:t.eventIdentifier,editVariables:!i.getters.node_useEventIndex(e.nodeNumber)})}})}}),A()}catch(e){(0,r.Qn)(Dl+": update_taught_nodes "+e)}},A=()=>{try{h.value=[];var e=i.state.nodes;for(var t in e){let e=!0;for(var l in k.value)k.value[l]==t&&0==i.getters.node_useEventIndex(t)&&(e=!1);if(1!=i.state.nodes[t].status&&(e=!1),1!=i.state.nodes[t].flim&&(e=!1),e&&t>0){var a=t+": ";i.state.layout&&(a+=i.getters.node_name(t),h.value.push(a))}}}catch(e){(0,r.Qn)(Dl+": update_available_nodes: "+e)}};(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(()=>{w.eventIdentifier&&E()});const Q=async e=>{if((0,C.g)(i,e));else{b.value="",p.value="Loading Node Parameters",v.value=!0,i.methods.request_all_node_parameters(e,20,100);let t=Date.now();while(Date.now()-t<6e4){if(b.value.length>0)break;await(0,r.yy)(100)}v.value=!1}},R=async e=>{var t=i.state.nodes[e].parameters[6];if(void 0!=i.state.nodes[e].nodeVariables[t]);else{b.value="",p.value="Loading Node Variables",i.methods.request_all_node_variables(e),v.value=!0;for(let e=0;e<1e4;e++){if(b.value.length>0)break;await(0,r.yy)(10)}v.value=!1}},L=async()=>{if((0,r.Qn)(Dl+`: clickTeachEvent: ${_.value} : ${w.eventIdentifier}`),g.value=!0,""!=_.value){var e=_.value.split(":"),t=parseInt(e[0]);if(d.value=t,i.getters.node_useEventIndex(t))y.value=!0;else if(i.state.nodes[t].eventSpaceLeft>0)await Q(t),await R(t),f(i,t,w.eventIdentifier),m.value=!0,c.value=!0;else{l.notify({message:"no event space left",timeout:0,position:"center",color:"primary",actions:[{label:"dismiss",color:"white",handler:()=>{}}]})}_.value=void 0}},S=async(e,t)=>{(0,r.Qn)(Dl+`: clickTeachIndex: node ${e} index ${t} event ${w.eventIdentifier}`),u.value=parseInt(t),i.methods.event_teach_by_index(e,w.eventIdentifier,t,0,0,!0),await Q(e),i.getters.node_numberOfEventVariables(e)>0&&(await R(e),m.value=!0,c.value=!0)},W=async(e,t)=>{let l=parseInt(e);(0,r.Qn)(Dl+": clickVariables "+l+" "+t),d.value=l,m.value=!1,await Q(l),await R(l),await i.methods.request_event_variables_by_identifier(l,t),c.value=!0};return(t,l)=>{const s=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),f=(0,a.g2)("q-card-section"),k=(0,a.g2)("q-select"),q=(0,a.g2)("q-card"),C=(0,a.g2)("q-td"),I=(0,a.g2)("q-tr"),E=(0,a.g2)("q-table"),A=(0,a.g2)("q-dialog"),Q=(0,a.g2)("q-input"),R=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(A,{modelValue:F.value,"onUpdate:modelValue":l[2]||(l[2]=e=>F.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(q,{class:"q-pa-none q-ma-none",style:{"min-width":"850px"}},{default:(0,a.k6)(()=>[(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[R]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Sl," Teach event : "+(0,o.v_)((0,n.R1)(i).getters.event_name(w.eventIdentifier)),1)]),_:1})]),_:1}),(0,a.bF)(q,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(f,{style:{"max-height":"75vh"},class:"q-py-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(q,{style:{width:"250px",height:"200px"},class:"q-ma-md q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(f,{class:"q-pa-xs"},{default:(0,a.k6)(()=>[l[9]||(l[9]=(0,a.Lk)("div",{class:"text-h6"},"Teach Event",-1)),l[10]||(l[10]=(0,a.Lk)("div",{class:"text-subtitle2"},"Select node",-1)),(0,a.bF)(k,{modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=e=>_.value=e),options:h.value},null,8,["modelValue","options"]),(0,a.Lk)("div",Wl,[(0,a.bF)(s,{color:"negative",disabled:g.value,label:"Teach",onClick:l[1]||(l[1]=e=>L()),"no-caps":""},null,8,["disabled"])])]),_:1,__:[9,10]})]),_:1}),(0,a.bF)(q,{style:{"max-height":"70vh"},class:"scroll q-ma-md"},{default:(0,a.k6)(()=>[(0,a.bF)(f,{class:"no-margin q-py-none-xs",style:{width:"450px"}},{default:(0,a.k6)(()=>[l[11]||(l[11]=(0,a.Lk)("div",{class:"text-h6"},"Taught Events",-1)),l[12]||(l[12]=(0,a.Lk)("div",{class:"text-subtitle2"},"Nodes using this event",-1)),(0,a.bF)(E,{flat:"",bordered:"",dense:"",rows:N.value,columns:V,"row-key":"number","hide-header":"","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)(e=>[(0,a.bF)(I,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(C,{key:"number",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.number),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"name",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.name),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"actions",props:e},{default:(0,a.k6)(()=>[e.row.editVariables?((0,a.uX)(),(0,a.Wv)(s,{key:0,dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Variables",onClick:t=>W(e.row.number,e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])):(0,a.Q3)("",!0)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1,__:[11,12]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(sl),{modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=e=>c.value=e),nodeNumber:d.value,eventIdentifier:e.eventIdentifier,eventIndex:u.value,newEvent:m.value},null,8,["modelValue","nodeNumber","eventIdentifier","eventIndex","newEvent"]),(0,a.bF)((0,n.R1)(mt),{modelValue:v.value,"onUpdate:modelValue":l[4]||(l[4]=e=>v.value=e),callingModule:"Event Teach",message:p.value,onWaitingOnBusTrafficDialogEvent:l[5]||(l[5]=e=>b.value=e)},null,8,["modelValue","message"]),(0,a.bF)(A,{modelValue:y.value,"onUpdate:modelValue":l[8]||(l[8]=e=>y.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(q,{class:"q-pa-none q-ma-none",style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(f,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[R]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Bl,(0,o.v_)((0,n.R1)(i).getters.node_name(d.value)),1)]),_:1})]),_:1}),(0,a.bF)(f,{class:"q-py-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Tl," enter index number between 1 and "+(0,o.v_)((0,n.R1)(i).getters.node_eventCapacity(d.value)),1)]),_:1}),(0,a.bF)(f,{class:"q-pt-none"},{default:(0,a.k6)(()=>[(0,a.bF)(Q,{dense:"",modelValue:x.value,"onUpdate:modelValue":l[6]||(l[6]=e=>x.value=e),autofocus:""},null,8,["modelValue"])]),_:1}),(0,a.bF)(f,{class:"q-pt-none"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{color:"negative",label:"Teach","no-caps":"",onClick:l[7]||(l[7]=e=>S(d.value,x.value))},null,512),[[R]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Ul=Kl,Ol=Ul;L()(Kl,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QSelect:he.A,QTable:wt.A,QTr:qt.A,QTd:Ft.A,QInput:oe.A}),L()(Kl,"directives",{ClosePopup:ut.A});const Xl={class:"text-h6"},Ml="NameEventDialog",zl={__name:"NameEventDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,n.KR)(""),i=(0,n.KR)(""),d=e,r=t,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.$u)(()=>{l.state.layout.eventDetails[d.eventIdentifier]&&(s.value=l.state.layout.eventDetails[d.eventIdentifier].name,i.value=l.state.layout.eventDetails[d.eventIdentifier].group)});const c=()=>{console.log(Ml+": clickAccept: name: "+d.eventIdentifier+" "+s.value),l.setters.event_name(d.eventIdentifier,s.value),l.setters.event_group(d.eventIdentifier,i.value),s.value="",i.value=""};return(e,t)=>{const r=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),v=(0,a.g2)("q-input"),b=(0,a.g2)("q-card-section"),p=(0,a.g2)("q-card-actions"),g=(0,a.g2)("q-card"),f=(0,a.g2)("q-dialog"),y=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(f,{modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=e=>u.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(g,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[y]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Xl," Edit name for event : "+(0,o.v_)((0,n.R1)(l).getters.event_name(d.eventIdentifier)),1)]),_:1}),(0,a.bF)(b,{class:"q-pt-none"},{default:(0,a.k6)(()=>[t[4]||(t[4]=(0,a.Lk)("div",{class:"text-h6"},"Event name",-1)),(0,a.bF)(v,{dense:"",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),autofocus:""},null,8,["modelValue"])]),_:1,__:[4]}),(0,a.bF)(b,{class:"q-pt-none"},{default:(0,a.k6)(()=>[t[5]||(t[5]=(0,a.Lk)("div",{class:"text-h6"},"Event group",-1)),(0,a.bF)(v,{dense:"",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),autofocus:""},null,8,["modelValue"])]),_:1,__:[5]}),(0,a.bF)(p,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(r,{flat:"",label:"Accept",onClick:t[2]||(t[2]=e=>c())},null,512),[[y]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Pl=zl,$l=Pl;L()(zl,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QInput:oe.A,QCardActions:et.A}),L()(zl,"directives",{ClosePopup:ut.A});const Gl={class:"text-h6"},jl={class:"text-h6"},Hl={class:"text-h6"},Yl={class:"q-pa-md q-gutter-sm"},Jl="SendEventDialog",Zl={__name:"SendEventDialog",props:{modelValue:{type:Boolean,required:!0},eventNumber:{type:Number,required:!0},sendingNodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,n.KR)(),i=e,d=t,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,a.wB)(r,()=>{console.log(Jl+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const u=()=>{console.log("send on "+i.eventIdentifier);var e=parseInt(i.eventIdentifier.slice(0,4),16);0==e?l.methods.short_on_event(i.sendingNodeNumber,i.eventNumber):l.methods.long_on_event(e,i.eventNumber)},c=()=>{console.log("send off "+i.eventIdentifier);var e=parseInt(i.eventIdentifier.slice(0,4),16);0==e?l.methods.short_off_event(i.sendingNodeNumber,i.eventNumber):l.methods.long_off_event(e,i.eventNumber)};return(e,t)=>{const d=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),v=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-card-actions"),p=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(p,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Gl," Test event : "+(0,o.v_)((0,n.R1)(l).getters.event_name(i.eventIdentifier)),1)]),_:1}),(0,a.bF)(v,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",jl,"Sending Node "+(0,o.v_)(i.sendingNodeNumber),1),(0,a.Lk)("div",Hl,"Event "+(0,o.v_)(s.value)+":"+(0,o.v_)(i.eventNumber),1)]),_:1}),(0,a.bF)(v,{class:"q-pa-md"},{default:(0,a.k6)(()=>[t[3]||(t[3]=(0,a.Lk)("div",{class:"text-h6"},"Generate event",-1)),t[4]||(t[4]=(0,a.Lk)("div",{class:"text-subtitle2"},"Send this event as ON or OFF",-1)),(0,a.Lk)("div",Yl,[(0,a.bo)((0,a.bF)(d,{color:"green",label:"ON",onClick:t[0]||(t[0]=e=>u())},null,512),[[f]]),(0,a.bo)((0,a.bF)(d,{color:"negative",label:"OFF",onClick:t[1]||(t[1]=e=>c())},null,512),[[f]])])]),_:1,__:[3,4]}),(0,a.bF)(b,{align:"right",class:"text-primary"})]),_:1})]),_:1},8,["modelValue"])}}},ea=Zl,ta=ea;L()(Zl,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QCardActions:et.A}),L()(Zl,"directives",{ClosePopup:ut.A});const la={class:"text-h6"},aa={class:"text-h6",style:{"min-width":"200px"}},na={class:"full-width"},oa="EventsListByNode",sa={__name:"EventsListByNode",props:{nodeNumber:{type:Number,required:!0},isDialog:{type:Boolean,default:!1}},setup(e){const t=(0,s.A)(),l=(0,a.WQ)("store"),i=(0,n.KR)([]),d=(0,n.KR)(""),u=(0,n.KR)(!1),c=(0,n.KR)(!1),m=(0,n.KR)(!1),v=(0,n.KR)(!1),b=(0,n.KR)(!1),p=(0,n.KR)(!1),g=(0,n.KR)(!1),f=(0,n.KR)(!1),y=(0,n.KR)(!1),h=(0,n.KR)(),k=(0,n.KR)(""),x=(0,n.KR)(),w=(0,n.KR)(0),q=(0,n.KR)(""),F=(0,n.KR)(""),C=(0,n.KR)("Event"),I=(0,n.KR)(!1),E=(0,n.KR)(!1),A=(0,n.KR)(!1),Q=(0,n.KR)(""),R=(0,n.KR)(),L=(0,n.KR)(),S=e,W=(0,a.EW)(()=>(r.Qn(oa+`: computed isDialog ${S.isDialog}`),S.isDialog?"events-list-by-node-table-full":"events-list-by-node-table")),B=(0,n.KR)([]),T=[{name:"eventIdentifier",field:"eventIdentifier",label:"Identifier",align:"left",sortable:!0},{name:"eventName",field:"eventName",required:!0,label:"Name",align:"left",sortable:!0},{name:"eventGroup",field:"eventGroup",label:"Group",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event node",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event number",align:"left",sortable:!0},{name:"eventIndex",field:"eventIndex",label:"Index",align:"left",sortable:!0},{name:"eventType",field:"eventType",required:!0,label:"Type",align:"left",sortable:!0},{name:"source",field:"source",required:!0,label:"Source",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!0}],D=[{name:"eventIndex",field:"eventIndex",label:"Index",align:"left",sortable:!0},{name:"eventIdentifier",field:"eventIdentifier",label:"Identifier",align:"left",sortable:!0},{name:"eventName",field:"eventName",required:!0,label:"Name",align:"left",sortable:!0},{name:"eventGroup",field:"eventGroup",label:"Group",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event node",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event number",align:"left",sortable:!0},{name:"eventType",field:"eventType",required:!0,label:"Type",align:"left",sortable:!0},{name:"source",field:"source",required:!0,label:"Source",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!0}],K=(0,a.EW)(()=>S.nodeNumber);(0,a.wB)(K,()=>{S.nodeNumber&&M()});const U=(0,a.EW)(()=>Object.values(l.state.busEvents));(0,a.wB)(U,()=>{S.nodeNumber&&M()});const O=(0,a.EW)(()=>l.state.layout.updateTimestamp);(0,a.wB)(O,()=>{S.nodeNumber&&M()});const X=(0,a.EW)(()=>l.state.nodes.updateTimestamp);(0,a.wB)(X,()=>{S.nodeNumber&&(1==l.getters.node_useEventIndex(S.nodeNumber)?C.value="Index":C.value="Event",1==l.getters.node_useSlots(S.nodeNumber)?(Q.value="Slots",L.value="activate slot"):(Q.value="Events",L.value="activate index"),M(),l.state.nodes[S.nodeNumber].VLCB&&"Index"==C.value?I.value=!0:I.value=!1)});const M=()=>{i.value=[];try{if("Event"==C.value){var e=Object.values(l.state.nodes[S.nodeNumber].storedEventsNI);e.forEach(e=>{var t=parseInt(e.eventIdentifier.substr(0,4),16),a=parseInt(e.eventIdentifier.substr(4,4),16);let n={};n["eventIdentifier"]=e.eventIdentifier,n["eventName"]=l.getters.event_name(e.eventIdentifier),n["eventGroup"]=l.getters.event_group(e.eventIdentifier),n["nodeNumber"]=t,n["eventIndex"]=e.eventIndex,n["eventNumber"]=a,n["eventType"]=0==t?"short":"long",n["editVariables"]=l.state.nodes[S.nodeNumber].parameters[5]>0,n["source"]="stored event",P(e.eventIdentifier)&&i.value.push(n)});var t=Object.values(l.state.busEvents);t.forEach(t=>{if(t.nodeNumber==S.nodeNumber){var a=!1,n=t.eventIdentifier;if("short"==t.type&&(n="0000"+n.substr(4,4)),e.forEach(e=>{n==e.eventIdentifier&&(a=!0)}),0==a){let e={};e["eventIdentifier"]=n,e["eventName"]=l.getters.event_name(n),e["eventGroup"]=l.getters.event_group(n),e["nodeNumber"]=t.nodeNumber,e["eventNumber"]=t.eventNumber,e["eventType"]=t.type,e["editVariables"]=l.state.nodes[S.nodeNumber].parameters[5]>0,e["source"]="bus event",P(n)&&i.value.push(e)}}}),i.value.sort(function(e,t){return e.eventIdentifier<t.eventIdentifier?-1:1})}else z()}catch(e){r.Qn(oa+`: update_rows: ${e} `)}},z=()=>{try{var e=Object.values(l.state.nodes[S.nodeNumber].eventsByIndex);if(e.forEach(e=>{var t=parseInt(e.eventIdentifier.substr(0,4),16),a=parseInt(e.eventIdentifier.substr(4,4),16);if(e.eventIndex>0&&"00000000"!=e.eventIdentifier){let n={};n["eventIdentifier"]=e.eventIdentifier,n["eventName"]=l.getters.event_name(e.eventIdentifier),n["eventGroup"]=l.getters.event_group(e.eventIdentifier),n["nodeNumber"]=t,n["eventIndex"]=e.eventIndex,n["eventNumber"]=a,n["eventType"]=0==t?"short":"long",n["editVariables"]=l.state.nodes[S.nodeNumber].parameters[5]>0,n["source"]="stored event",P(e.eventIdentifier)&&i.value.push(n)}}),void 0!=l.state.layout.nodeDetails[S.nodeNumber].indexedEvents){var t=Object.values(l.state.layout.nodeDetails[S.nodeNumber].indexedEvents);t.forEach(e=>{let t=!1;if(i.value.forEach(l=>{l.eventIndex==e.eventIndex&&(t=!0)}),0==t){var a=parseInt(e.eventIdentifier.substr(0,4),16),n=parseInt(e.eventIdentifier.substr(4,4),16);let t={};t["eventIdentifier"]=e.eventIdentifier,t["eventName"]=l.getters.event_name(e.eventIdentifier),t["eventGroup"]=l.getters.event_group(e.eventIdentifier),t["nodeNumber"]=a,t["eventIndex"]=e.eventIndex,t["eventNumber"]=n,t["eventType"]=0==a?"short":"long",t["editVariables"]=l.state.nodes[S.nodeNumber].parameters[5]>0,t["source"]="saved index",P(e.eventIdentifier)&&i.value.push(t)}})}i.value.sort(function(e,t){return e.eventIndex<t.eventIndex?-1:1})}catch(e){r.Qn(oa+`: update_rows_indexed: ${e} `)}},P=e=>{var t=parseInt(e.substr(0,4),16);return!("short"==l.state.events_view_mode&&t>0||"long"==l.state.events_view_mode&&0==t||"named"==l.state.events_view_mode&&""==l.state.layout.eventDetails[e].name.length)};(0,a.KC)(()=>{G(),S.nodeNumber&&M()}),(0,a.sV)(()=>{}),(0,a.$u)(()=>{});const $=async(e,t)=>{q.value="",F.value="Loading Event Variables",v.value=!0,"Index"==C.value?l.methods.request_event_variables_by_index(S.nodeNumber,t):l.methods.request_event_variables_by_identifier(S.nodeNumber,e);let a=Date.now();while(Date.now()-a<6e4){if(q.value.length>0)break;await r.yy(10)}v.value=!1},G=()=>{void 0==l.state.layout.settings&&(l.state.layout["settings"]={EventsByNodeView:{}}),void 0==l.state.layout.settings.EventsByNodeView&&(l.state.layout.settings["EventsByNodeView"]={}),void 0==l.state.layout.settings.enableEventIdentifier&&(l.state.layout.settings["enableEventIdentifier"]=!0,l.state.update_layout_needed=!0),void 0==l.state.layout.settings.EventsByNodeView.enableEventIndex&&(l.state.layout.settings.EventsByNodeView["enableEventIndex"]=!0,l.state.update_layout_needed=!0),void 0==l.state.layout.settings.enableEventGroup&&(l.state.layout.settings["enableEventGroup"]=!0,l.state.update_layout_needed=!0),r.rL(B.value,"eventIdentifier",l.state.layout.settings.enableEventIdentifier),r.rL(B.value,"eventIndex",l.state.layout.settings.EventsByNodeView.enableEventIndex),r.rL(B.value,"eventGroup",l.state.layout.settings.enableEventGroup)};l.eventBus.on("LAYOUT_DATA",()=>{G()}),l.eventBus.on("BUS_TRAFFIC_EVENT",e=>{if(A.value){var t=e.json.opCode;R.value="switch",l.getters.node_useSwitchTeach1(S.nodeNumber)?"B0"!=t&&"B1"!=t||(x.value=e.json.data1,k.value=e.json.eventIdentifier,r.Qn(oa+`: BUS_TRAFFIC_EVENT : ACON1/ACOF1 event - switch ${x.value}`),l.setters.addIndexedEventToLayoutNode(S.nodeNumber,e.json.data1,k.value),E.value=!0):l.getters.node_useSwitchTeach2(S.nodeNumber)&&("B3"!=t&&"B4"!=t||(x.value=e.json.data1,k.value=e.json.eventIdentifier,r.Qn(oa+`: BUS_TRAFFIC_EVENT : ARON1/AROF1 event - switch ${x.value}`),E.value=!0))}});const j=()=>{r.Qn(oa+": clickActivateSlot"),u.value=!0},H=()=>{if(r.Qn(oa+": clickAddEvent"),l.state.nodes[S.nodeNumber].eventSpaceLeft>0)c.value=!0;else{t.notify({message:"no event space left",timeout:0,position:"center",color:"primary",actions:[{label:"dismiss",color:"white",handler:()=>{}}]})}},Y=()=>{r.Qn(oa+": clickAdvanced"),m.value=!0},J=()=>{r.Qn(oa+": clickClose")},Z=async(e,a)=>{r.Qn(oa+`: clickDelete ${e} ${a}`);t.notify({message:"Are you sure you want to delete event "+l.getters.event_name(e),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{r.Qn("removeEvent "+S.nodeNumber+" "+e),await N(l,S.nodeNumber,e,a)}},{label:"NO",color:"white",handler:()=>{}}]})},ee=()=>{r.Qn(oa+`: click_enableEventIdentifier ${l.state.layout.settings.enableEventIdentifier}`),r.rL(B.value,"eventIdentifier",l.state.layout.settings.enableEventIdentifier),l.state.update_layout_needed=!0},te=()=>{r.Qn(oa+`: click_enableEventIndex ${l.state.layout.settings.EventsByNodeView.enableEventIndex}`),r.rL(B.value,"eventIndex",l.state.layout.settings.EventsByNodeView.enableEventIndex),l.state.update_layout_needed=!0},le=()=>{r.Qn(oa+`: click_enableEventGroup ${l.state.layout.settings.enableEventGroup}`),r.rL(B.value,"eventGroup",l.state.layout.settings.enableEventGroup),l.state.update_layout_needed=!0},ae=(e,t)=>{r.Qn(oa+`: clickEvent: eventIndex ${e}`),x.value=e,k.value=t,R.value="index",E.value=!0},ne=e=>{r.Qn(oa+": clickEventName "+e),k.value=e,h.value=l.getters.event_name(e),f.value=!0},oe=()=>{r.Qn(oa+": clickInfo"),g.value=!0},se=()=>{r.Qn(oa+": clickRefresh"),_(l,S.nodeNumber),M()},ie=e=>{r.Qn(oa+": send OFF "+e);var t=parseInt(e.slice(0,4),16),a=parseInt(e.slice(4,8),16);0==t?l.methods.short_off_event(S.nodeNumber,a):l.methods.long_off_event(t,a)},de=e=>{r.Qn(oa+": send ON "+e);var t=parseInt(e.slice(0,4),16),a=parseInt(e.slice(4,8),16);0==t?l.methods.short_on_event(S.nodeNumber,a):l.methods.long_on_event(t,a)},re=()=>{r.Qn(oa+`: clickSwitchTeach: node ${S.nodeNumber}`);let e=V().encodeNNLRN(S.nodeNumber);l.methods.send_cbus_message(e),A.value=!0},ue=e=>{r.Qn(oa+`: clickSwitchTeachClose ${e}`);let t=V().encodeNNULN(S.nodeNumber);l.methods.send_cbus_message(t)},ce=e=>{r.Qn(oa+": clickTeach"),k.value=e,b.value=!0},me=()=>{r.Qn(oa+": clickToggleEventMode"),C.value="Event"==C.value?"Index":"Event",M()},ve=()=>{switch(r.Qn(oa+": clickToggleViewMode"),l.state.events_view_mode){case"all":l.state.events_view_mode="short";break;case"short":l.state.events_view_mode="long";break;case"long":l.state.events_view_mode="named";break;case"named":l.state.events_view_mode="all";break;default:l.state.events_view_mode="all"}M()},be=async(e,t)=>{r.Qn(oa+`: clickVariables: node ${S.nodeNumber} event ${e}`),k.value=e,x.value=t,await $(e,t),p.value=!0};return(t,s)=>{const r=(0,a.g2)("q-btn"),_=(0,a.g2)("q-icon"),h=(0,a.g2)("q-input"),N=(0,a.g2)("q-checkbox"),V=(0,a.g2)("q-item"),K=(0,a.g2)("q-list"),U=(0,a.g2)("q-menu"),O=(0,a.g2)("q-banner"),X=(0,a.g2)("q-td"),M=(0,a.g2)("q-tr"),z=(0,a.g2)("q-table"),P=(0,a.g2)("q-card-section"),$=(0,a.g2)("q-card"),G=(0,a.g2)("q-dialog"),pe=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(O,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,n.R1)(l).getters.node_useSwitchTeach1(S.nodeNumber)?((0,a.uX)(),(0,a.Wv)(r,{key:0,class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Switch Teach","no-caps":"",onClick:s[0]||(s[0]=e=>re())})):(0,a.Q3)("",!0),(0,n.R1)(l).getters.node_useSwitchTeach2(S.nodeNumber)?((0,a.uX)(),(0,a.Wv)(r,{key:1,class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Switch Teach","no-caps":"",onClick:s[1]||(s[1]=e=>re())})):(0,a.Q3)("",!0),(0,n.R1)(l).state.develop?((0,a.uX)(),(0,a.Wv)(r,{key:2,class:"q-mx-xs q-my-none",size:"sm",color:"black","no-caps":"",onClick:s[2]||(s[2]=e=>me())},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(C.value),1)]),_:1})):(0,a.Q3)("",!0),(0,a.bF)(r,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Toggle","no-caps":"",onClick:s[3]||(s[3]=e=>ve())}),(0,a.Lk)("div",aa,"view "+(0,o.v_)((0,n.R1)(l).state.events_view_mode)+" events",1),(0,a.bF)(r,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:s[4]||(s[4]=e=>oe())}),s[27]||(s[27]=(0,a.eW)("    ")),(0,a.bF)(h,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:d.value,"onUpdate:modelValue":s[5]||(s[5]=e=>d.value=e),placeholder:"Search"},{default:(0,a.k6)(()=>[(0,a.bF)(_,{size:"sm",name:"search"})]),_:1},8,["modelValue"]),s[28]||(s[28]=(0,a.eW)("    ")),"Event"==C.value?((0,a.uX)(),(0,a.Wv)(r,{key:3,class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Add Event",onClick:s[6]||(s[6]=e=>H())})):(0,a.Q3)("",!0),I.value?((0,a.uX)(),(0,a.Wv)(r,{key:4,class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:L.value,onClick:s[7]||(s[7]=e=>j())},null,8,["label"])):(0,a.Q3)("",!0),(0,a.bF)(r,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Advanced",onClick:s[8]||(s[8]=e=>Y())}),(0,a.bF)(r,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:s[9]||(s[9]=e=>se())}),(0,a.bF)(r,{square:"",unelevated:"",color:"primary",icon:"settings"},{default:(0,a.k6)(()=>[(0,a.bF)(U,{"auto-close":""},{default:(0,a.k6)(()=>[(0,a.bF)(K,{style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(V,null,{default:(0,a.k6)(()=>[(0,a.bF)(N,{class:"no-margin no-padding",modelValue:(0,n.R1)(l).state.layout.settings.enableEventIdentifier,"onUpdate:modelValue":s[10]||(s[10]=e=>(0,n.R1)(l).state.layout.settings.enableEventIdentifier=e),onClick:ee,label:"show Event Identifier column"},null,8,["modelValue"])]),_:1}),(0,a.bF)(V,null,{default:(0,a.k6)(()=>[(0,a.bF)(N,{class:"no-margin no-padding",modelValue:(0,n.R1)(l).state.layout.settings.EventsByNodeView.enableEventIndex,"onUpdate:modelValue":s[11]||(s[11]=e=>(0,n.R1)(l).state.layout.settings.EventsByNodeView.enableEventIndex=e),onClick:te,label:"show Event Index column"},null,8,["modelValue"])]),_:1}),(0,a.bF)(V,null,{default:(0,a.k6)(()=>[(0,a.bF)(N,{class:"no-margin no-padding",modelValue:(0,n.R1)(l).state.layout.settings.enableEventGroup,"onUpdate:modelValue":s[12]||(s[12]=e=>(0,n.R1)(l).state.layout.settings.enableEventGroup=e),onClick:le,label:"show Group column"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e.isDialog?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(r,{key:5,flat:"",color:"white",size:"md",label:"Close",onClick:s[13]||(s[13]=e=>J())},null,512)),[[pe]]):(0,a.Q3)("",!0)]),default:(0,a.k6)(()=>[(0,a.Lk)("div",la,(0,o.v_)(Q.value)+": "+(0,o.v_)((0,n.R1)(l).getters.node_name(S.nodeNumber)),1)]),_:1}),(0,a.Lk)("div",na,["Index"==C.value?((0,a.uX)(),(0,a.Wv)(z,{key:0,class:(0,o.C4)(W.value),bordered:"",dense:"",rows:i.value,columns:D,filter:d.value,"row-key":"eventIndex","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"visible-columns":B.value,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(M,{props:e,class:(0,o.C4)([x.value==e.row.eventIndex?"bg-blue-1":"bg-white","q-my-none q-py-none"])},{default:(0,a.k6)(()=>[(0,a.bF)(X,{key:"eventIndex",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventIndex),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"eventIdentifier",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventIdentifier),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"eventName",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventName),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"eventGroup",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventGroup),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"nodeNumber",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.nodeNumber),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"eventNumber",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventNumber),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"eventType",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventType),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"source",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.source),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(r,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Event",onClick:t=>ae(e.row.eventIndex,e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(r,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:t=>ne(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),e.row.editVariables?((0,a.uX)(),(0,a.Wv)(r,{key:0,dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Variables",onClick:t=>be(e.row.eventIdentifier,e.row.eventIndex),"no-caps":""},null,8,["onClick"])):(0,a.Q3)("",!0),(0,a.bF)(r,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:t=>ce(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(r,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>de(e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>s[29]||(s[29]=[(0,a.eW)("send ON")])),_:2,__:[29]},1032,["onClick"]),(0,a.bF)(r,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>ie(e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>s[30]||(s[30]=[(0,a.eW)("send OFF")])),_:2,__:[30]},1032,["onClick"]),(0,a.bF)(r,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:t=>Z(e.row.eventIdentifier,e.row.eventIndex),"no-caps":""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props","class"])]),_:1},8,["class","rows","filter","visible-columns"])):(0,a.Q3)("",!0),"Event"==C.value?((0,a.uX)(),(0,a.Wv)(z,{key:1,class:(0,o.C4)(W.value),bordered:"",dense:"",rows:i.value,columns:T,filter:d.value,"row-key":"eventIdentifier","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"visible-columns":B.value,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(M,{props:e,class:(0,o.C4)([k.value==e.row.eventIdentifier?"bg-blue-1":"bg-white","q-my-none q-py-none"])},{default:(0,a.k6)(()=>[(0,a.bF)(X,{key:"eventIdentifier",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventIdentifier),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"eventName",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventName),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"eventGroup",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventGroup),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"nodeNumber",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.nodeNumber),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"eventNumber",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventNumber),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"eventIndex",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventIndex),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"eventType",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventType),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"source",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.source),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(r,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:t=>ne(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),e.row.editVariables?((0,a.uX)(),(0,a.Wv)(r,{key:0,dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Variables",onClick:t=>be(e.row.eventIdentifier,e.row.eventIndex),"no-caps":""},null,8,["onClick"])):(0,a.Q3)("",!0),(0,a.bF)(r,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:t=>ce(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(r,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>de(e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>s[31]||(s[31]=[(0,a.eW)("send ON")])),_:2,__:[31]},1032,["onClick"]),(0,a.bF)(r,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>ie(e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>s[32]||(s[32]=[(0,a.eW)("send OFF")])),_:2,__:[32]},1032,["onClick"]),(0,a.bF)(r,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:t=>Z(e.row.eventIdentifier,e.row.eventIndex),"no-caps":""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props","class"])]),_:1},8,["class","rows","filter","visible-columns"])):(0,a.Q3)("",!0)]),(0,a.bF)(G,{modelValue:A.value,"onUpdate:modelValue":s[15]||(s[15]=e=>A.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)($,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(O,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close",onClick:s[14]||(s[14]=e=>ue(S.nodeNumber))},null,512),[[pe]])]),default:(0,a.k6)(()=>[s[33]||(s[33]=(0,a.Lk)("div",{class:"text-h6"},"Switch Teach",-1))]),_:1,__:[33]}),(0,a.bF)(P,null,{default:(0,a.k6)(()=>s[34]||(s[34]=[(0,a.Lk)("div",{class:"text-h6"},"Operate the switch to be taught",-1)])),_:1,__:[34]})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(_l),{modelValue:u.value,"onUpdate:modelValue":s[16]||(s[16]=e=>u.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,n.R1)(Fl),{modelValue:c.value,"onUpdate:modelValue":s[17]||(s[17]=e=>c.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,n.R1)(Al),{modelValue:m.value,"onUpdate:modelValue":s[18]||(s[18]=e=>m.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,n.R1)($l),{modelValue:f.value,"onUpdate:modelValue":s[19]||(s[19]=e=>f.value=e),eventIdentifier:k.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,n.R1)(bl),{modelValue:E.value,"onUpdate:modelValue":s[20]||(s[20]=e=>E.value=e),nodeNumber:e.nodeNumber,eventIndex:x.value,eventIdentifier:k.value,bannerText:R.value},null,8,["modelValue","nodeNumber","eventIndex","eventIdentifier","bannerText"]),(0,a.bF)((0,n.R1)(Ol),{modelValue:b.value,"onUpdate:modelValue":s[21]||(s[21]=e=>b.value=e),eventIdentifier:k.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,n.R1)(ta),{modelValue:y.value,"onUpdate:modelValue":s[22]||(s[22]=e=>y.value=e),sendingNodeNumber:e.nodeNumber,eventNumber:w.value,eventIdentifier:k.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,n.R1)(sl),{modelValue:p.value,"onUpdate:modelValue":s[23]||(s[23]=e=>p.value=e),nodeNumber:e.nodeNumber,eventIdentifier:k.value,eventIndex:x.value},null,8,["modelValue","nodeNumber","eventIdentifier","eventIndex"]),(0,a.bF)((0,n.R1)(Ll),{modelValue:g.value,"onUpdate:modelValue":s[24]||(s[24]=e=>g.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(mt),{modelValue:v.value,"onUpdate:modelValue":s[25]||(s[25]=e=>v.value=e),callingModule:"EventsListByNode",message:F.value,onWaitingOnBusTrafficDialogEvent:s[26]||(s[26]=e=>q.value=e)},null,8,["modelValue","message"])])}}};var ia=l(492),da=l(4436),ra=l(3999),ua=l(124);const ca=(0,J.A)(sa,[["__scopeId","data-v-aa197788"]]),ma=ca;L()(sa,"components",{QBanner:ft.A,QBtn:Ce.A,QInput:oe.A,QIcon:ia.A,QMenu:da.A,QList:ra.A,QItem:ua.A,QCheckbox:Q.A,QTable:wt.A,QTr:qt.A,QTd:Ft.A,QDialog:dt.A,QCard:K.A,QCardSection:A.A,QField:se.A}),L()(sa,"directives",{ClosePopup:ut.A});const va={__name:"ProgramNodeInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,n=t,o=(0,a.EW)({get(){return l.modelValue},set(e){n("update:modelValue",e)}});return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])]),default:(0,a.k6)(()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about Node Programming ",-1))]),_:1,__:[1]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[2]||(t[2]=[(0,a.Lk)("div",{class:"text_body1"}," Configuration memory is used to enable or disable hardware features of the MCU. ",-1)])),_:1,__:[2]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text_body1"}," EEPROM memory is used to hold non-volatile settings for the firmware (such as node number, events etc..) ",-1),(0,a.Lk)("div",{class:"text_body1"}," Re-programming EEPROM memory will force the node into an un-initialsed state (green led lit) and will need to be re-initialised with a node number (typically started by holding the button down until the yellow led starts flashing) ",-1)])),_:1,__:[3]})]),_:1})]),_:1},8,["modelValue"])}}},ba=va,pa=ba;L()(va,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A}),L()(va,"directives",{ClosePopup:ut.A});const ga={class:"text-h6"},fa={class:"q-pa-xs row"},ya={key:0,class:"text-body1"},_a={class:"text-h6"},ha="ProgramNodeDialog",ka={__name:"programNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0},mode:{type:String,default:"NORMAL"}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,n.KR)(null),u=(0,n.KR)(!1),c=(0,n.KR)(!1),m=(0,n.KR)(!1),v=(0,n.KR)(!1),b=(0,n.KR)(!1),p=(0,n.KR)(!1),g=(0,n.KR)(!1),f=(0,n.KR)(),y=(0,n.KR)(""),_=(0,n.KR)(null),h=(0,n.KR)(null),k=(0,n.KR)(null),N=(0,n.KR)(null),x=(0,n.KR)(null),w=(0,n.KR)(!1),q=(0,n.KR)(!1),F=(0,n.KR)();var V=0,C=void 0;const I=e,E=t,A=(0,a.EW)({get(){return I.modelValue},set(e){E("update:modelValue",e)}});(0,a.wB)(A,()=>{F.value="program node "+i.getters.node_name(I.nodeNumber),Q(),"BOOT"==I.mode&&(c.value=!0,v.value=!0,m.value=!0,b.value=!0,p.value=!0,g.value=!0,F.value="program node in boot mode")}),(0,a.wB)(d,()=>{null!=d.value&&((0,r.Qn)(ha+`: WATCH uploadFile ${d.value.name}`),i.methods.request_firmware_info(d.value))}),(0,a.wB)(u,()=>{u.value&&l.notify({message:"WARNING: Programming the CONFIG may break the bootloader",caption:"Proceed only if the firmware explicitly requires it, otherwise CANCEL",timeout:0,position:"center",color:"primary",actions:[{label:"PROCEED",color:"white",handler:async()=>{}},{label:"CANCEL",color:"white",handler:()=>{u.value=!1}}]})}),(0,a.wB)(m,()=>{m.value?(c.value=!0,b.value=!0):(c.value=!1,b.value=!1)}),i.eventBus.on("PROGRAM_NODE_PROGRESS",e=>{if(A.value&&((0,r.Qn)(ha+": PROGRAM_NODE_PROGRESS event: "+e),y.value=e,e.includes("FIRMWARE:"))){const t=e.split("FIRMWARE:");f.value=t[1]}});const Q=()=>{(0,r.Qn)(ha+": clearFileSelected"),d.value=null,q.value=!1,u.value=!1,c.value=!1,m.value=!1,v.value=!1,b.value=!1,g.value=!1,p.value=!1};i.eventBus.on("FIRMWARE_INFO",e=>{if(A.value&&(q.value=!1,(0,r.Qn)(ha+`: FIRMWARE_INFO event: ${JSON.stringify(e)}`),1==e.valid)){let t=i.state.nodes[I.nodeNumber].parameters[9],a=i.state.nodes[I.nodeNumber].parameters[3];_.value="A5"+(0,r.xT)(e.moduleID,2),h.value=e.targetCpuType,k.value=e.versionNumber,N.value=e.loadAddress,x.value=e.bootable,64&e.flags?k.value+=e.betaNumber:e.betaNumber>0&&(k.value+=" beta "+e.betaNumber),q.value=!0,void 0!=t&&h.value!=t&&(m.value=!0,g.value=!0,l.notify({message:"WARNING: CPU types do not match",caption:"PROCEED accepts the mismatch, and forces EEPROM to be programmed, CANCEL clears all selections",timeout:0,position:"center",color:"primary",actions:[{label:"PROCEED",color:"white",handler:async()=>{(0,r.Qn)(ha+": FIRMWARE_INFO event: PROCEED")}},{label:"CANCEL",color:"white",handler:()=>{(0,r.Qn)(ha+": FIRMWARE_INFO event: CANCEL"),Q()}}]})),void 0!=a&&e.moduleID!=a&&(c.value=!0,b.value=!0,l.notify({message:"WARNING: Module types do not match",caption:"PROCEED accepts the mismatch, and forces EEPROM to be programmed, CANCEL clears all selections",timeout:0,position:"center",color:"primary",actions:[{label:"PROCEED",color:"white",handler:async()=>{(0,r.Qn)(ha+": FIRMWARE_INFO event: PROCEED")}},{label:"CANCEL",color:"white",handler:()=>{(0,r.Qn)(ha+": FIRMWARE_INFO event: CANCEL"),Q()}}]}))}}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(()=>{});const R=()=>{console.log(ha+": clickInfo"),w.value=!0},L=async()=>{V=u.value?1|V:-2&V,V=c.value?2|V:-3&V,V=m.value?4|V:-5&V,V=v.value?8|V:-9&V,C=i.state.nodes[I.nodeNumber].parameters[9],console.log(ha+": clickProgram: node: "+I.nodeNumber+" cpuType: "+C+" flags: "+V),f.value="",d.value?i.methods.program_node(I.nodeNumber,C,V,d.value):console.log(ha+": clickProgram: uploadFile no value ")},S=async()=>{console.log(ha+": clickClose: flags: "+V),A.value=!1};return(t,l)=>{const s=(0,a.g2)("q-btn"),r=(0,a.g2)("q-space"),V=(0,a.g2)("q-banner"),C=(0,a.g2)("q-file"),I=(0,a.g2)("q-card-section"),E=(0,a.g2)("q-checkbox"),Q=(0,a.g2)("q-card"),W=(0,a.g2)("q-card-actions"),B=(0,a.g2)("q-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(B,{modelValue:A.value,"onUpdate:modelValue":l[8]||(l[8]=e=>A.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(Q,{style:{"min-width":"750px"}},{default:(0,a.k6)(()=>[(0,a.bF)(V,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:l[0]||(l[0]=e=>R())}),(0,a.bF)(r),(0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close",onClick:l[1]||(l[1]=e=>S())})]),default:(0,a.k6)(()=>[(0,a.Lk)("div",ga,"   "+(0,o.v_)(F.value),1)]),_:1}),(0,a.Lk)("div",fa,[(0,a.bF)(Q,{flat:"",style:{width:"370px"}},{default:(0,a.k6)(()=>[(0,a.bF)(I,null,{default:(0,a.k6)(()=>[l[10]||(l[10]=(0,a.Lk)("div",{class:"text-h6"},"Select a file to upload",-1)),(0,a.bF)(C,{modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=e=>d.value=e),label:"Pick one file",dense:"",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"])]),_:1,__:[10]}),(0,a.bF)(I,{style:{"min-height":"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[q.value?((0,a.uX)(),(0,a.CE)("div",ya,[(0,a.eW)(" File module type: "+(0,o.v_)((0,n.R1)(i).state.moduleNames[_.value].name)+" ",1),l[11]||(l[11]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" File CPU type: "+(0,o.v_)(h.value)+" ",1),l[12]||(l[12]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" File version: "+(0,o.v_)(k.value)+" ",1),l[13]||(l[13]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" load address "+(0,o.v_)(N.value)+" ",1),l[14]||(l[14]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" bootable "+(0,o.v_)(x.value)+" ",1),l[15]||(l[15]=(0,a.Lk)("br",null,null,-1)),l[16]||(l[16]=(0,a.Lk)("br",null,null,-1))])):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(I,{class:"no-margin q-py-none"},{default:(0,a.k6)(()=>l[17]||(l[17]=[(0,a.eW)(" FLASH memory is always programmed ")])),_:1,__:[17]}),(0,a.bF)(I,{style:{"max-width":"300px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(E,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),label:"Program configuration"},null,8,["modelValue"]),(0,a.bF)(E,{disable:b.value,modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=e=>c.value=e),label:"Program EEPROM"},null,8,["disable","modelValue"]),(0,a.bF)(E,{disable:g.value,modelValue:m.value,"onUpdate:modelValue":l[5]||(l[5]=e=>m.value=e),label:"Ignore CPU type"},null,8,["disable","modelValue"]),(0,a.bF)(E,{disable:p.value,modelValue:v.value,"onUpdate:modelValue":l[6]||(l[6]=e=>v.value=e),label:"Program in Boot Mode"},null,8,["disable","modelValue"])]),_:1})]),_:1}),(0,a.bF)(Q,{flat:"",class:"q-pa-sm",style:{width:"370px"}},{default:(0,a.k6)(()=>["NORMAL"==e.mode?((0,a.uX)(),(0,a.Wv)(I,{key:0},{default:(0,a.k6)(()=>[(0,a.Lk)("div",_a,[(0,a.eW)(" Node Module type: "+(0,o.v_)((0,n.R1)(i).state.nodes[e.nodeNumber].moduleName)+" ",1),l[18]||(l[18]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Node CPU type: "+(0,o.v_)((0,n.R1)(i).state.nodes[e.nodeNumber].cpuName)+" ("+(0,o.v_)((0,n.R1)(i).state.nodes[e.nodeNumber].parameters[9])+") ",1)]),l[19]||(l[19]=(0,a.Lk)("br",null,null,-1))]),_:1,__:[19]})):(0,a.Q3)("",!0),"BOOT"==e.mode?((0,a.uX)(),(0,a.Wv)(I,{key:1},{default:(0,a.k6)(()=>l[20]||(l[20]=[(0,a.Lk)("div",{class:"text-h6"}," Program in boot mode ",-1),(0,a.Lk)("div",{class:"text-body1"}," Note that in this mode the cpu type can't be checked ",-1),(0,a.Lk)("br",null,null,-1)])),_:1,__:[20]})):(0,a.Q3)("",!0),l[21]||(l[21]=(0,a.Lk)("div",{class:"text-h6"},[(0,a.eW)(" Warnings: "),(0,a.Lk)("br")],-1)),l[22]||(l[22]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)(" Disconnect all SLiM nodes to prevent corruption. "),(0,a.Lk)("br")],-1)),l[23]||(l[23]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)(" Ensure there is mimimal or no traffic on the CAN bus before programming to avoid failure (issue with older bootloader firmware). "),(0,a.Lk)("br")],-1)),l[24]||(l[24]=(0,a.Lk)("div",{class:"text-body1"}," In the event of a failure, and if the node is left in bootmode (both leds lit), then retry with the 'Program in Boot Mode' option checked. ",-1))]),_:1,__:[21,22,23,24]})]),(0,a.bF)(I,{class:"row"},{default:(0,a.k6)(()=>[(0,a.bF)(W,{align:"left",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{color:"primary",label:"Program",onClick:l[7]||(l[7]=e=>L())})]),_:1}),(0,a.bF)(Q,{align:"center",flat:"",class:"text-h6",style:{width:"370px"}},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(f.value),1)]),_:1})]),_:1}),(0,a.bF)(I,{class:"bg-info text-h6 text-white"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",null," Status: "+(0,o.v_)(y.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(pa),{modelValue:w.value,"onUpdate:modelValue":l[9]||(l[9]=e=>w.value=e)},null,8,["modelValue"])],64)}}},Na=ka,xa=Na;L()(ka,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QSpace:Ie.A,QCardSection:A.A,QFile:Tt.A,QCheckbox:Q.A,QCardActions:et.A});const wa={class:"text-h6"},qa={style:{"max-height":"80vh"},class:"scroll no-margin no-padding"},Fa={class:"q-pa-md row",style:{"max-height":"70vh"}},Va={class:"text-subtitle2"},Ca={class:"text-subtitle2"},Ia={class:"text-subtitle2"},Ea={class:"text-subtitle2"},Aa={class:"text-subtitle2"},Qa={class:"text-subtitle2"},Ra={class:"text-h6"},La="NodeBackupAndRestoreDialog",Sa={__name:"NodeBackupAndRestoreDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,n.KR)(""),u=(0,n.KR)(!1),c=(0,n.KR)(""),m=(0,n.KR)(!1),v=(0,n.KR)([]),b=(0,n.KR)(""),p=(0,n.KR)(""),g=(0,n.KR)(""),f=(0,n.KR)(""),y=(0,n.KR)("awaiting backup selection"),h=(0,n.KR)(!1),k=(0,n.KR)(!1),N=(0,n.KR)(!1),w=(0,n.KR)(),F=(0,n.KR)(""),V=(0,n.KR)(""),C=(0,n.KR)(!1),I=[{name:"backup",field:"backup",required:!0,label:"backup",align:"left",sortable:!0}],E=e,A=t,Q=(0,a.EW)({get(){return E.modelValue},set(e){A("update:modelValue",e)}});(0,a.wB)(Q,()=>{Q.value&&(d.value=void 0,u.value=!1,b.value="",p.value="",g.value="",f.value="",h.value=!1,i.methods.request_node_backups_list(i.state.layout.layoutDetails.title,E.nodeNumber),i.state.restoredData={})});const R=(0,a.EW)(()=>i.state.restoredData);(0,a.wB)(R,()=>{try{c.value=R.value.backupNode,b.value=c.value.moduleName,p.value=c.value.parameters[6],g.value=c.value.eventCount,f.value=c.value.parameters[5]}catch(e){r.Qn(La+": WATCH restoredData "+e),c.value={},b.value="",p.value="",g.value="",f.value=""}});const L=(0,a.EW)(()=>i.state.backups_list);(0,a.wB)(L,()=>{S()});const S=()=>{v.value=[],L.value.forEach(e=>{v.value.push({backup:e})})},W=async()=>{r.Qn(La+": restoreNodeVariables"),y.value="restoring Node Variables",h.value=!0;try{let e=c.value.nodeVariables;for(let t of Object.keys(e).sort(function(e,t){return e-t}))if(t>0){let l=e[t];r.Qn(La+`: restoreNodeVariables: ${t} ${l}`);let a=!1;i.methods.update_node_variable(E.nodeNumber,t,l,a),await r.yy(100)}}catch(e){r.Qn(La+": restoreNodeVariables: "+e)}await r.yy(2e3);while(Date.now()-i.state.cbusTrafficTimeStamp<500)await r.yy(100);h.value=!1},B=async()=>{r.Qn(La+": restoreEventsByIdentifier"),h.value=!0;try{y.value="erasing Events",i.methods.delete_all_events(E.nodeNumber),await r.yy(2e3),y.value="restoring Events & Variables";var e=c.value.storedEventsNI;r.Qn(La+`: restoreEventsByIdentifier: storedEventsNI ${JSON.stringify(e)}`);for(const t in e){r.Qn(La+": restoreEventsByIdentifier: "+t);let e=c.value.storedEventsNI[t].variables,l=c.value.storedEventsNI[t].eventIndex;await q(i,E.nodeNumber,t,l,e)}}catch(e){r.Qn(La+`: restoreEventsByIdentifier: ${e}`)}await r.yy(2e3);while(Date.now()-i.state.cbusTrafficTimeStamp<1e3)await r.yy(100);h.value=!1},T=async()=>{r.Qn(La+": restoreEventsByIndex"),h.value=!0;try{y.value="erasing Events",i.methods.delete_all_events(E.nodeNumber),await r.yy(2e3),y.value="restoring Events & Variables";for(const e in c.value.eventsByIndex){r.Qn(La+`: restoreEvents: eventIndex ${e}`);let t=r.xT(E.nodeNumber,4)+r.xT(e,4),l=c.value.eventsByIndex[e].eventIdentifier;if(l==t?r.Qn(La+`: restoreEventsByIndex: ${e} default ${t}`):(r.Qn(La+`: restoreEventsByIndex: ${e} default ${t} new ${l}`),x(i,E.nodeNumber,l,e,0,0,!1)),i.getters.node_eventCapacity(E.nodeNumber)>0){r.Qn(La+": restoreEventsByIndex: Indexed variables ");let t=c.value.eventsByIndex[e].variables;await q(i,E.nodeNumber,l,e,t)}}}catch(e){r.Qn(La+`: restoreEventsByIndex: ${e}`)}await r.yy(2e3);while(Date.now()-i.state.cbusTrafficTimeStamp<1e3)await r.yy(100);h.value=!1};(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),i.eventBus.on("NODE_BACKUP_COMPLETED",()=>{Q.value&&i.methods.request_node_backups_list(i.state.layout.layoutDetails.title,E.nodeNumber)}),i.eventBus.on("NODE_BACKUP_SAVED",e=>{Q.value&&l.notify({message:"Backup saved",caption:e,timeout:2e3,position:"center",color:"primary",actions:[{label:"dismiss",color:"white",handler:()=>{}}]})});const D=async()=>{r.Qn(La+": actionUpload");if(w.value){var e=w.value.name;r.Qn(La+": selected filename "+e);let t=new FileReader;t.readAsText(w.value),t.onload=async function(){try{var e=JSON.parse(t.result);i.methods.save_node_backup(E.nodeNumber,e.backupNode),await r.yy(500),i.methods.request_node_backups_list(i.state.layout.layoutDetails.title,E.nodeNumber)}catch(e){l.notify({message:"backup file upload has failed",caption:"please check the file is valid JSON, and try again",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]})}},w.value=null}else r.Qn(La+": actionUpload: uploadFile no value ")},K=async()=>{r.Qn(La+": clickBackup"),C.value=!0},U=async()=>{r.Qn(La+`: clickChangeFilename ${V.value} ${F.value}`),F.value.length>0&&i.methods.rename_node_backup(i.state.layout.layoutDetails.title,E.nodeNumber,V.value,F.value),F.value=""},O=e=>{r.Qn(La+": clickBackupList on ",e),d.value=e,i.methods.request_node_backup(i.state.layout.layoutDetails.title,E.nodeNumber,d.value),u.value=!0,y.value="ready to restore"},X=e=>{r.Qn(La+": clickDelete ",e);l.notify({message:"Are you sure you want to delete backup "+e,timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.delete_node_backup(i.state.layout.layoutDetails.title,E.nodeNumber,e),await r.yy(50),i.methods.request_node_backups_list(i.state.layout.layoutDetails.title,E.nodeNumber)}},{label:"NO",color:"white",handler:()=>{}}]})},M=async()=>{r.Qn(La+`: clickDownload ${d.value}`);let e=JSON.stringify(i.state.restoredData,null,"  "),t=document.createElement("a");t.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",d.value),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},z=()=>{r.Qn(La+": clickImport"),N.value=!0},P=async e=>{if(u.value=!1,r.Qn(La+": clickRestore"),b.value==i.getters.module_name(E.nodeNumber))y.value="restore in progress",await W(),1==i.getters.node_useEventIndex(E.nodeNumber)?await T():await B(),y.value="node resetting",i.methods.reset_node(E.nodeNumber),await r.yy(2e3),i.methods.request_all_node_variables(E.nodeNumber,i.state.nodes[E.nodeNumber].parameters[6]),await r.yy(1e3),_(i,E.nodeNumber),y.value="restore complete\n(select a backup to run again)";else{l.notify({message:"backup module name '"+b.value+"' doesnt match restore module name",caption:"restore module name '"+i.getters.module_name(E.nodeNumber)+"'",timeout:0,position:"center",color:'negative"',multiLine:!0,actions:[{label:"dismiss",color:"white",handler:()=>{}}]})}},$=()=>{r.Qn(La+": clickToggleBackupJSON"),m.value=!m.value};return(t,l)=>{const s=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),_=(0,a.g2)("q-card-section"),x=(0,a.g2)("q-space"),q=(0,a.g2)("q-card-actions"),E=(0,a.g2)("q-card"),A=(0,a.g2)("q-separator"),R=(0,a.g2)("q-td"),L=(0,a.g2)("q-table"),S=(0,a.g2)("q-spinner-orbit"),W=(0,a.g2)("q-dialog"),B=(0,a.g2)("q-input"),T=(0,a.g2)("q-file"),G=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(W,{modelValue:Q.value,"onUpdate:modelValue":l[5]||(l[5]=e=>Q.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(E,{style:{"min-width":"1000px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(_,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[G]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",wa," Backup & Restore Node: "+(0,o.v_)((0,n.R1)(i).getters.node_name(e.nodeNumber)),1)]),_:1})]),_:1}),(0,a.bF)(E,{align:"right",flat:"",inline:"",class:"row"},{default:(0,a.k6)(()=>[(0,a.bF)(x),(0,a.bF)(x),(0,a.bF)(x),l[14]||(l[14]=(0,a.Lk)("div",{class:"text-h6"},"Backup this node",-1)),l[15]||(l[15]=(0,a.eW)("   ")),(0,a.bF)(q,null,{default:(0,a.k6)(()=>[(0,a.bF)(s,{color:"primary",label:"backup",onClick:l[0]||(l[0]=e=>K())})]),_:1}),(0,a.bF)(x)]),_:1,__:[14,15]}),(0,a.bF)(A),(0,a.Lk)("div",qa,[(0,a.Lk)("div",Fa,[(0,a.bF)(E,{flat:"",inline:"",class:"q-pa-none q-ma-none",style:{width:"500px"}},{default:(0,a.k6)(()=>[l[16]||(l[16]=(0,a.Lk)("div",{class:"text-h6"},"Select a backup from the list to download or restore",-1)),(0,a.bF)(_,{style:{"max-height":"70vh"},class:"scroll no-margin q-pa-xs"},{default:(0,a.k6)(()=>[(0,a.bF)(L,{class:"restore-node-table",dense:"",rows:v.value,columns:I,"row-key":"name","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-header":"","hide-bottom":""},{"body-cell":(0,a.k6)(e=>[(0,a.bF)(R,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(s,{flat:"",color:"primary",label:e.value,onClick:t=>O(e.value)},null,8,["label","onClick"])]),_:2},1032,["props"]),(0,a.bF)(R,null,{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"sm",label:"Rename",onClick:()=>{V.value=e.value,k.value=!0},"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"negative",size:"sm",label:"Delete",onClick:t=>X(e.value),"no-caps":""},null,8,["onClick"])]),_:2},1024)]),_:1},8,["rows"])]),_:1})]),_:1,__:[16]}),(0,a.bF)(E,{flat:"",inline:"",class:"q-pa-none q-ma-sm",style:{"max-width":"400px"}},{default:(0,a.k6)(()=>[(0,a.bF)(_,{style:{height:"50px"},class:"text-subtitle2"},{default:(0,a.k6)(()=>[(0,a.eW)(" Restore node "+(0,o.v_)(e.nodeNumber)+" - Module Name: "+(0,o.v_)((0,n.R1)(i).getters.module_name(e.nodeNumber)),1)]),_:1}),(0,a.bF)(E,{style:{height:"70px"},class:"q-pa-sm q-ma-sm"},{default:(0,a.k6)(()=>[l[17]||(l[17]=(0,a.Lk)("div",{class:"text-primary"},"Selected Backup",-1)),(0,a.Lk)("div",Va,(0,o.v_)(d.value),1)]),_:1,__:[17]}),(0,a.bF)(E,{class:"q-pa-sm q-ma-sm"},{default:(0,a.k6)(()=>[l[18]||(l[18]=(0,a.Lk)("div",{class:"text-primary"},"Backup file",-1)),(0,a.Lk)("div",Ca,"Module name: "+(0,o.v_)(b.value),1),(0,a.Lk)("div",Ia,"Number of Node variables: "+(0,o.v_)(p.value),1),(0,a.Lk)("div",Ea,"Number of Events: "+(0,o.v_)(g.value),1),(0,a.Lk)("div",Aa,"Number of Event variables: "+(0,o.v_)(f.value),1)]),_:1,__:[18]}),(0,a.bF)(E,{style:{height:"100px"},class:"q-pa-sm q-ma-sm"},{default:(0,a.k6)(()=>[l[19]||(l[19]=(0,a.Lk)("div",{class:"text-primary"},"status",-1)),(0,a.Lk)("div",Qa,(0,o.v_)(y.value),1),h.value?((0,a.uX)(),(0,a.Wv)(S,{key:0,color:"primary",size:"2em"})):(0,a.Q3)("",!0)]),_:1,__:[19]})]),_:1})]),(0,a.bF)(_,null,{default:(0,a.k6)(()=>[(0,a.bF)(q,null,{default:(0,a.k6)(()=>[(0,a.bF)(s,{color:"primary",label:"Upload Backup",onClick:l[1]||(l[1]=e=>z())}),l[20]||(l[20]=(0,a.Lk)("div",{class:"text-body"},"   Upload an external backup file",-1)),(0,a.bF)(x),(0,a.bF)(s,{disabled:!u.value,color:"primary",label:"Download Backup",onClick:l[2]||(l[2]=e=>M())},null,8,["disabled"]),(0,a.bF)(s,{disabled:!u.value,color:"primary",label:"Restore Node",onClick:l[3]||(l[3]=e=>P())},null,8,["disabled"])]),_:1,__:[20]})]),_:1}),(0,a.bF)(E,{class:"no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(q,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{flat:"",label:"Toggle backup json",onClick:l[4]||(l[4]=e=>$())})]),_:1}),m.value?((0,a.uX)(),(0,a.Wv)(_,{key:0,style:{width:"350px"},class:"text-body2 no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.Lk)("pre",null,(0,o.v_)(c.value),1)]),_:1})):(0,a.Q3)("",!0)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)(W,{modelValue:k.value,"onUpdate:modelValue":l[9]||(l[9]=e=>k.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(E,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(_,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",Ra,"enter new filename for "+(0,o.v_)(V.value),1)]),_:1}),(0,a.bF)(_,{class:"q-pt-none"},{default:(0,a.k6)(()=>[(0,a.bF)(B,{dense:"",modelValue:F.value,"onUpdate:modelValue":l[6]||(l[6]=e=>F.value=e),autofocus:"",onKeyup:l[7]||(l[7]=(0,ht.jR)(e=>k.value=!1,["enter"]))},null,8,["modelValue"])]),_:1}),(0,a.bF)(q,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",label:"Close"},null,512),[[G]]),(0,a.bo)((0,a.bF)(s,{flat:"",label:"change Filename",onClick:l[8]||(l[8]=e=>U())},null,512),[[G]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)(W,{modelValue:N.value,"onUpdate:modelValue":l[12]||(l[12]=e=>N.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(E,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[G]])]),default:(0,a.k6)(()=>[l[21]||(l[21]=(0,a.Lk)("div",{class:"text-h6"}," Upload external backup file ",-1))]),_:1,__:[21]}),(0,a.bF)(_,null,{default:(0,a.k6)(()=>l[22]||(l[22]=[(0,a.Lk)("div",{class:"text-body"}," click below to select backup file to upload ",-1)])),_:1,__:[22]}),(0,a.bF)(T,{modelValue:w.value,"onUpdate:modelValue":l[10]||(l[10]=e=>w.value=e),label:"Pick one file",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"]),(0,a.bF)(_,null,{default:(0,a.k6)(()=>l[23]||(l[23]=[(0,a.Lk)("div",{class:"text-body"}," Note that the uploaded file name will have an updated timestamp ",-1)])),_:1,__:[23]}),(0,a.bF)(q,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{disabled:!w.value,color:"positive",label:"Upload",onClick:l[11]||(l[11]=e=>D())},null,8,["disabled"]),[[G]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(_t),{modelValue:C.value,"onUpdate:modelValue":l[13]||(l[13]=e=>C.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},Wa=Sa,Ba=Wa;L()(Sa,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QSpace:Ie.A,QCardActions:et.A,QSeparator:tt.A,QTable:wt.A,QTd:Ft.A,QSpinnerOrbit:rt.A,QInput:oe.A,QFile:Tt.A}),L()(Sa,"directives",{ClosePopup:ut.A});const Ta={class:"text-h6"},Da={class:"q-pa-md"},Ka="SetCanIdDialog",Ua={__name:"setCanIdDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,n.KR)(),i=e,d=t,u=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,a.$u)(()=>{});const c=async()=>{s.value&&(console.log(Ka+": clickAccept: node "+i.nodeNumber+" CAN_ID "+s.value),l.methods.set_can_id(i.nodeNumber,s.value),await(0,r.yy)(100),l.methods.query_all_nodes()),s.value=void 0};return(t,i)=>{const d=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-input"),b=(0,a.g2)("q-card-actions"),p=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:u.value,"onUpdate:modelValue":i[2]||(i[2]=e=>u.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(p,{style:{"min-width":"400px"}},{default:(0,a.k6)(()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Ta," Set CAN ID for node : "+(0,o.v_)((0,n.R1)(l).getters.node_name(e.nodeNumber)),1)]),_:1}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",null," Current CAN ID: "+(0,o.v_)((0,n.R1)(l).getters.node_can_id(e.nodeNumber)),1)]),_:1}),(0,a.Lk)("div",Da,[i[3]||(i[3]=(0,a.eW)(" Enter new CAN ID, 1 to 99 ")),(0,a.bF)(v,{autofocus:"",modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),modelModifiers:{number:!0},type:"number",style:{"max-width":"200px"}},null,8,["modelValue"])]),(0,a.bF)(b,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(d,{flat:"",label:"Accept",onClick:i[1]||(i[1]=e=>c())},null,512),[[f]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Oa=Ua,Xa=Oa;L()(Ua,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QInput:oe.A,QCardActions:et.A}),L()(Ua,"directives",{ClosePopup:ut.A});const Ma={class:"text-h6"},za="AdvancedNodeDialog",Pa={__name:"advancedNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,n.KR)("NORMAL"),r=(0,n.KR)(!1),u=(0,n.KR)(!1),c=(0,n.KR)(!1),m=(0,n.KR)(!1),v=e,b=t,p=(0,a.EW)({get(){return v.modelValue},set(e){b("update:modelValue",e)}});(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const g=()=>{console.log(za+": clickBackupAndRestoreNode "+v.nodeNumber),c.value=!0},f=()=>{console.log(za+": clickCanIdEnumeration "+v.nodeNumber),i.methods.node_can_id_enum(v.nodeNumber)},y=()=>{console.log(za+": clickMDF"),i.methods.request_matching_mdf_list(v.nodeNumber,"USER"),i.methods.request_matching_mdf_list(v.nodeNumber,"SYSTEM"),r.value=!0},_=()=>{console.log(za+": click_MODE_Event_Acknowledge");l.notify({message:"Set Event Acknowledge for node: "+i.getters.node_name(v.nodeNumber),timeout:0,position:"center",color:"primary",actions:[{label:"ON",color:"white",handler:async()=>{let e=V().encodeMODE(v.nodeNumber,10);i.methods.send_cbus_message(e)}},{label:"OFF",color:"white",handler:()=>{let e=V().encodeMODE(v.nodeNumber,11);i.methods.send_cbus_message(e)}},{label:"CANCEL",color:"white",handler:()=>{}}]})},h=()=>{console.log(za+": click_MODE_FCU_Compatibility");l.notify({message:"Set FCU Compatibility for node: "+i.getters.node_name(v.nodeNumber),timeout:0,position:"center",color:"primary",actions:[{label:"ON",color:"white",handler:async()=>{let e=V().encodeMODE(v.nodeNumber,16);i.methods.send_cbus_message(e)}},{label:"OFF",color:"white",handler:()=>{let e=V().encodeMODE(v.nodeNumber,17);i.methods.send_cbus_message(e)}},{label:"CANCEL",color:"white",handler:()=>{}}]})},k=()=>{console.log(za+": click_Mode_Heartbeat");l.notify({message:"Set Heartbeat for node: "+i.getters.node_name(v.nodeNumber),timeout:0,position:"center",color:"primary",actions:[{label:"ON",color:"white",handler:async()=>{let e=V().encodeMODE(v.nodeNumber,12);i.methods.send_cbus_message(e)}},{label:"OFF",color:"white",handler:()=>{let e=V().encodeMODE(v.nodeNumber,13);i.methods.send_cbus_message(e)}},{label:"CANCEL",color:"white",handler:()=>{}}]})},N=()=>{console.log(za+": clickProgramNode "+v.nodeNumber),d.value="NORMAL",u.value=!0},x=()=>{console.log(za+": clickProgramInBootMode "+v.nodeNumber),d.value="BOOT",u.value=!0},w=()=>{console.log(za+": clickResetNode "+v.nodeNumber),i.methods.reset_node(v.nodeNumber)},q=()=>{console.log(za+": clickSetCAN_ID "+v.nodeNumber),m.value=!0};return(t,l)=>{const s=(0,a.g2)("q-btn"),v=(0,a.g2)("q-banner"),b=(0,a.g2)("q-card-section"),F=(0,a.g2)("q-card-actions"),V=(0,a.g2)("q-card"),C=(0,a.g2)("q-dialog"),I=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(C,{modelValue:p.value,"onUpdate:modelValue":l[10]||(l[10]=e=>p.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(V,{style:{"min-width":"600px"}},{default:(0,a.k6)(()=>[(0,a.bF)(v,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[I]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Ma," Advanced functions for node "+(0,o.v_)((0,n.R1)(i).getters.node_name(e.nodeNumber)),1)]),_:1}),1!=(0,n.R1)(i).state.nodes[e.nodeNumber].status?((0,a.uX)(),(0,a.Wv)(b,{key:0},{default:(0,a.k6)(()=>l[15]||(l[15]=[(0,a.Lk)("div",{class:"text-h6"}," Node is offline, so standard function are unavailable ",-1)])),_:1,__:[15]})):(0,a.Q3)("",!0),(0,n.R1)(i).state.nodes[e.nodeNumber].status?((0,a.uX)(),(0,a.Wv)(b,{key:1},{default:(0,a.k6)(()=>[(0,a.bF)(F,{align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Backup & Restore",onClick:l[0]||(l[0]=e=>g())})]),_:1}),0==(0,n.R1)(i).state.nodes[e.nodeNumber].VLCB?((0,a.uX)(),(0,a.Wv)(F,{key:0,align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"CAN ID Enumeration",onClick:l[1]||(l[1]=e=>f())})]),_:1})):(0,a.Q3)("",!0),(0,a.bF)(F,{align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Manage Module Descriptor",onClick:l[2]||(l[2]=e=>y())})]),_:1}),1==(0,n.R1)(i).state.nodes[e.nodeNumber].VLCB?((0,a.uX)(),(0,a.Wv)(F,{key:1,align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"MODE: set Event Acknowledge",onClick:l[3]||(l[3]=e=>_())})]),_:1})):(0,a.Q3)("",!0),1==(0,n.R1)(i).state.nodes[e.nodeNumber].VLCB?((0,a.uX)(),(0,a.Wv)(F,{key:2,align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"MODE: set FCU Compatibility",onClick:l[4]||(l[4]=e=>h())})]),_:1})):(0,a.Q3)("",!0),1==(0,n.R1)(i).state.nodes[e.nodeNumber].VLCB?((0,a.uX)(),(0,a.Wv)(F,{key:3,align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"MODE: set heartbeat",onClick:l[5]||(l[5]=e=>k())})]),_:1})):(0,a.Q3)("",!0),(0,n.R1)(i).state.nodes[e.nodeNumber].bootloader?((0,a.uX)(),(0,a.Wv)(F,{key:4,align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"program Node",onClick:l[6]||(l[6]=e=>N())})]),_:1})):(0,a.Q3)("",!0),(0,a.bF)(F,{align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"reset Node",onClick:l[7]||(l[7]=e=>w())})]),_:1}),0==(0,n.R1)(i).state.nodes[e.nodeNumber].VLCB?((0,a.uX)(),(0,a.Wv)(F,{key:5,align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Set CANID",onClick:l[8]||(l[8]=e=>q())})]),_:1})):(0,a.Q3)("",!0)]),_:1})):(0,a.Q3)("",!0),1!=(0,n.R1)(i).state.nodes[e.nodeNumber].status?((0,a.uX)(),(0,a.Wv)(V,{key:2,class:"q-py-none q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(b,{style:{"min-width":"250px"}},{default:(0,a.k6)(()=>[(0,a.bF)(F,{align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"program in boot mode",onClick:l[9]||(l[9]=e=>x())})]),_:1})]),_:1}),(0,a.bF)(b,{style:{width:"300px"}},{default:(0,a.k6)(()=>l[16]||(l[16]=[(0,a.Lk)("div",{class:"text-body1"}," A node in boot mode (both green & yellow led on) will show as offline, but can be programmed ",-1)])),_:1,__:[16]})]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(Gt),{modelValue:r.value,"onUpdate:modelValue":l[11]||(l[11]=e=>r.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,n.R1)(xa),{modelValue:u.value,"onUpdate:modelValue":l[12]||(l[12]=e=>u.value=e),nodeNumber:e.nodeNumber,mode:d.value},null,8,["modelValue","nodeNumber","mode"]),(0,a.bF)((0,n.R1)(Ba),{modelValue:c.value,"onUpdate:modelValue":l[13]||(l[13]=e=>c.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,n.R1)(Xa),{modelValue:m.value,"onUpdate:modelValue":l[14]||(l[14]=e=>m.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},$a=Pa,Ga=$a;L()(Pa,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QCardActions:et.A}),L()(Pa,"directives",{ClosePopup:ut.A});const ja={class:"text-h6"},Ha={__name:"NameNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,n.KR)(),i=(0,n.KR)(),d=e,r=t,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.$u)(()=>{l.state.layout.nodeDetails[d.nodeNumber]&&(s.value=l.state.layout.nodeDetails[d.nodeNumber].name,i.value=l.getters.node_group(d.nodeNumber))});const c=()=>{console.log("new node name: "+s.value),l.setters.node_name(d.nodeNumber,s.value),l.setters.node_group(d.nodeNumber,i.value)};return(t,l)=>{const n=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),r=(0,a.g2)("q-input"),m=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-card-actions"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),g=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(p,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(b,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(n,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",ja," Edit name for node : "+(0,o.v_)(e.nodeNumber),1)]),_:1}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)(()=>[l[4]||(l[4]=(0,a.Lk)("div",{class:"text-h6"},"Name",-1)),(0,a.bF)(r,{dense:"",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),autofocus:""},null,8,["modelValue"])]),_:1,__:[4]}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)(()=>[l[5]||(l[5]=(0,a.Lk)("div",{class:"text-h6"},"Group",-1)),(0,a.bF)(r,{dense:"",modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),autofocus:""},null,8,["modelValue"])]),_:1,__:[5]}),(0,a.bF)(v,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(n,{flat:"",label:"Accept",onClick:l[2]||(l[2]=e=>c())},null,512),[[g]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Ya=Ha,Ja=Ya;L()(Ha,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QInput:oe.A,QCardActions:et.A}),L()(Ha,"directives",{ClosePopup:ut.A});const Za={__name:"nodeEventsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,o=t,s=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});return(t,l)=>{const o=(0,a.g2)("q-dialog");return(0,a.uX)(),(0,a.Wv)(o,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),persistent:"","full-width":"",position:"right"},{default:(0,a.k6)(()=>[(0,a.bF)((0,n.R1)(ma),{nodeNumber:e.nodeNumber,isDialog:!0},null,8,["nodeNumber"])]),_:1},8,["modelValue"])}}},en=Za,tn=en;L()(Za,"components",{QDialog:dt.A});const ln={__name:"NodeParameter",props:["Name","Value"],setup(e){return(t,l)=>{const n=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(n,{class:"q-pa-xs",flat:""},{default:(0,a.k6)(()=>[(0,a.Lk)("b",null,(0,o.v_)(e.Name),1),(0,a.eW)(" : "+(0,o.v_)(e.Value),1)]),_:1})}}},an=ln,nn=an;L()(ln,"components",{QCard:K.A});const on={__name:"NodeParameterRaw",props:["nodeNumber","parameterIndex"],setup(e){const t=(0,a.WQ)("store"),l=e,n=(0,a.EW)(()=>t.getters.node_parameter_name(l.nodeNumber,l.parameterIndex)),o=(0,a.EW)(()=>t.getters.node_parameter_value(l.nodeNumber,l.parameterIndex));return(e,t)=>{const l=(0,a.g2)("q-input"),s=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(s,{class:"q-pa-xs",flat:"",style:{"min-width":"300px"}},{default:(0,a.k6)(()=>[(0,a.bF)(l,{filled:"",label:n.value,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),outlined:"",disable:"",readonly:""},null,8,["label","modelValue"])]),_:1})}}},sn=on,dn=sn;L()(on,"components",{QCard:K.A,QInput:oe.A});const rn={class:"text-h6"},un={class:"q-pa-none row"},cn="NodeParametersDialog",mn={__name:"NodeParametersDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,n.KR)(!1),i=e,d=t,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}}),u=(0,a.EW)(()=>{try{let e=l.state.nodes[i.nodeNumber].moduleVersion;return l.state.nodes[i.nodeNumber].VLCB?e+l.state.nodes[i.nodeNumber].parameters[20]:0==l.state.nodes[i.nodeNumber].parameters[20]?e:e+" Beta "+l.state.nodes[i.nodeNumber].parameters[20]}catch{return null}}),c=(0,a.EW)(()=>{try{return l.state.nodeDescriptors[i.nodeNumber].moduleDescriptorFilename}catch{return null}});(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const m=()=>{console.log(cn+": clickUpdateModuleDescriptor"),l.methods.request_matching_mdf_list(i.nodeNumber,"USER"),l.methods.request_matching_mdf_list(i.nodeNumber,"SYSTEM"),s.value=!0};return(t,d)=>{const v=(0,a.g2)("q-btn"),b=(0,a.g2)("q-banner"),p=(0,a.g2)("q-card"),g=(0,a.g2)("q-separator"),f=(0,a.g2)("q-card-section"),y=(0,a.g2)("q-dialog"),_=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(y,{modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=e=>r.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(p,{style:{"min-width":"700px"}},{default:(0,a.k6)(()=>[(0,a.bF)(b,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bF)(v,{color:"cyan-1",size:"sm","text-color":"black",label:"manage Module Descriptor",onClick:d[0]||(d[0]=e=>m())}),(0,a.bo)((0,a.bF)(v,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",rn," Parameter Information for "+(0,o.v_)((0,n.R1)(l).getters.node_name(i.nodeNumber)),1)]),_:1}),(0,a.bF)(f,{style:{"max-height":"80vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)((0,n.R1)(nn),{Name:"Node Number",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].nodeNumber},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"Events Currently Stored",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].eventCount},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"Manufacturer",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].moduleManufacturerName},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"Module",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].moduleName},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"Module Identifier",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].moduleIdentifier},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"Producer",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].producer},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"Consumer",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].consumer},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"Consume own Events",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].coe},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"Supports Bootloading",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].bootloader},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"FLiM",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].flim},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"VLCB",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].VLCB},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"Node Variables",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].parameters[6]},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"Events Supported",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].parameters[4]},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"Event Variables",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].parameters[5]},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"CPU Name",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].cpuName},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"Interface",Value:(0,n.R1)(l).state.nodes[i.nodeNumber].interfaceName},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"Firmware Version",Value:u.value},null,8,["Value"]),(0,a.bF)((0,n.R1)(nn),{Name:"Module Descriptor Filename",Value:c.value},null,8,["Value"]),(0,a.bF)(p,{flat:"",style:{"min-height":"20px"}}),(0,a.bF)(g),(0,a.bF)(p,{flat:"",style:{"min-height":"20px"}}),d[3]||(d[3]=(0,a.Lk)("div",{class:"text-body1"}," Raw node parameter values ",-1)),(0,a.Lk)("div",un,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(l).state.nodes[i.nodeNumber].parameters[0]+1,(t,l)=>((0,a.uX)(),(0,a.Wv)((0,n.R1)(dn),{nodeNumber:e.nodeNumber,parameterIndex:l,key:l},null,8,["nodeNumber","parameterIndex"]))),128))])]),_:1,__:[3]})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(Gt),{modelValue:s.value,"onUpdate:modelValue":d[2]||(d[2]=e=>s.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},vn=mn,bn=vn;L()(mn,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QSeparator:tt.A}),L()(mn,"directives",{ClosePopup:ut.A});const pn="NoderawVariableSingle",gn={__name:"NodeRawVariableSingle",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},numberBase:{type:String,default:"decimal"}},setup(e){const t=e,l="Variable "+t.nodeVariableIndex,o=(0,a.WQ)("store"),s=(0,n.KR)(!1),i=(0,n.KR)(""),d=(0,n.KR)(),u=(0,a.EW)(()=>o.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex]);(0,a.wB)(u,()=>{v(u.value)});const c=(0,a.EW)(()=>t.numberBase);(0,a.wB)(c,()=>{v(u.value)});const m=e=>{let l=e,a=e.toUpperCase().split("X");l=a.length>1?parseInt(a[1],16):parseInt(a[0]),l<0||l>255||Number.isNaN(l)?(console.log(pn+`: value error ${l}`),s.value=!0,i.value="Invalid Value"):(s.value=!1,i.value="",o.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,l),v(l))},v=e=>{"decimal"==t.numberBase?d.value=e:d.value="0x"+(0,r.xT)(e,2)};return(0,a.sV)(()=>{v(u.value)}),(e,t)=>{const n=(0,a.g2)("q-input"),o=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(o,{class:"q-pa-xs",flat:"",style:{width:"120px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{class:"bg-white",filled:"",label:l,mask:"NNNN",debounce:"100",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),outlined:"","error-message":i.value,error:s.value,onChange:m},null,8,["modelValue","error-message","error"])]),_:1})}}},fn=gn,yn=fn;L()(gn,"components",{QCard:K.A,QInput:oe.A});const _n={class:"text-h6"},hn={class:"q-pa-none row"},kn="NodeRawVariables",Nn={__name:"NodeRawVariables",props:{nodeNumber:{type:Number,default:0}},setup(e){const t=(0,a.WQ)("store"),l=(0,n.KR)("decimal"),s=e,i=()=>{console.log(kn+": clickToggle"),l.value="decimal"==l.value?l.value="hex":l.value="decimal"};return(e,d)=>{const r=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-btn"),c=(0,a.g2)("q-card-actions"),m=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(m,{flat:"",class:"q-pa-none q-ma-none row justify-between"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{class:"text-primary"},{default:(0,a.k6)(()=>d[1]||(d[1]=[(0,a.Lk)("div",{class:"text-h6"},"Raw view",-1)])),_:1,__:[1]}),(0,a.bF)(c,{class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{size:"sm",color:"blue",label:"Toggle",onClick:d[0]||(d[0]=e=>i())}),d[2]||(d[2]=(0,a.eW)("    ")),(0,a.Lk)("div",_n," display is in "+(0,o.v_)(l.value),1)]),_:1,__:[2]}),(0,a.bF)(r,null,{default:(0,a.k6)(()=>d[3]||(d[3]=[(0,a.Lk)("div",{class:"text-body"},"Enter value in decimal, or hexadecimal preceeded by '0x' (e.g. 0x55), irrespective of display format ",-1)])),_:1,__:[3]})]),_:1}),(0,a.Lk)("div",hn,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(t).state.nodes[s.nodeNumber].parameters[6],e=>((0,a.uX)(),(0,a.Wv)((0,n.R1)(yn),{"node-variable-index":e,"node-number":s.nodeNumber,key:e,numberBase:l.value},null,8,["node-variable-index","node-number","numberBase"]))),128))])],64)}}},xn=Nn,wn=xn;L()(Nn,"components",{QCard:K.A,QCardSection:A.A,QCardActions:et.A,QBtn:Ce.A});const qn={class:"text-h6"},Fn={key:0,class:"text-h6"},Vn={key:1,class:"text-h6"},Cn={class:"q-pa-xs row"},In={class:"text-body2"},En="NodeChannelVariablesDialog",An={__name:"NodeChannelVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0},channelNumber:{type:Number,default:0},configuration:{type:Object,default:void 0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,s.A)();const{registerTimeout:l}=(0,I.A)(),i=(0,a.WQ)("store"),d=(0,n.KR)(!1),u=(0,n.KR)(!1),c=(0,n.KR)(!1),m=(0,n.KR)(!1),v=(0,n.KR)(),b=e,p=t,g=(0,a.EW)({get(){return b.modelValue},set(e){p("update:modelValue",e)}});(0,a.wB)(g,async()=>{1==g.value&&(v.value=b.configuration,m.value=!1,void 0==v.value?((0,r.Qn)(En+": WATCH model: variablesDescriptor undefined"),c.value=!0,d.value=!0):0==Object.keys(v.value).length?((0,r.Qn)(En+": WATCH model: variablesDescriptor zero entries"),c.value=!0,d.value=!0):(c.value=!1,d.value=!1))}),(0,a.$u)(async()=>{b.nodeNumber&&(0==i.state.nodes[b.nodeNumber].parameters[6]?u.value=!0:u.value=!1)});const f=()=>{(0,r.Qn)(En+": clickToggleRaw"),c.value?c.value=!1:c.value=!0},y=()=>{(0,r.Qn)(En+": clickToggleNodeDescriptor"),m.value?m.value=!1:m.value=!0};return(t,l)=>{const s=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),p=(0,a.g2)("q-card-section"),_=(0,a.g2)("q-separator"),h=(0,a.g2)("q-card"),k=(0,a.g2)("q-card-actions"),N=(0,a.g2)("q-dialog"),x=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(N,{modelValue:g.value,"onUpdate:modelValue":l[2]||(l[2]=e=>g.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)(()=>[(0,a.bF)(h,{class:"q-pa-none q-ml-xl"},{default:(0,a.k6)(()=>[(0,a.bF)(p,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[x]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",qn," Node Variables for channel : "+(0,o.v_)((0,n.R1)(i).getters.node_channel_name(e.nodeNumber,e.channelNumber)),1)]),_:1})]),_:1}),(0,a.bF)(h,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(p,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(p,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[d.value?((0,a.uX)(),(0,a.CE)("div",Fn," *** Descriptor not loaded for this channel *** ")):(0,a.Q3)("",!0),u.value?((0,a.uX)(),(0,a.CE)("div",Vn," this node has no variables to display ")):(0,a.Q3)("",!0)]),_:1}),(0,n.R1)(i).state.nodeDescriptors[b.nodeNumber]?((0,a.uX)(),(0,a.Wv)((0,n.R1)(Xo),{key:0,nodeNumber:e.nodeNumber,configuration:v.value},null,8,["nodeNumber","configuration"])):(0,a.Q3)("",!0),c.value?((0,a.uX)(),(0,a.Wv)(p,{key:1,class:"q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)((0,n.R1)(wn),{nodeNumber:e.nodeNumber},null,8,["nodeNumber"]),(0,a.bF)(_)]),_:1})):(0,a.Q3)("",!0),m.value?((0,a.uX)(),(0,a.Wv)(p,{key:2,class:"q-pa-sm"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Cn,[l[3]||(l[3]=(0,a.Lk)("div",{class:"text-primary text-h6"},[(0,a.eW)("Variables descriptor"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",In,[(0,a.Lk)("pre",null,(0,o.v_)(v.value),1)])]),(0,a.bF)(_)]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1}),(0,a.bF)(k,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{flat:"",label:"Toggle raw view",onClick:l[0]||(l[0]=e=>f())}),(0,a.bF)(s,{flat:"",label:"Toggle variables descriptor view",onClick:l[1]||(l[1]=e=>y())})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Qn=An,Rn=Qn;L()(An,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QSeparator:tt.A,QCardActions:et.A}),L()(An,"directives",{ClosePopup:ut.A});const Ln={style:{border:"2px solid grey"},class:"no-padding no-margin"},Sn="NodeChannelList",Wn={__name:"NodeChannelList",props:{nodeNumber:{type:Number,default:0},configuration:{type:Object,required:!0}},setup(e){(0,s.A)();const t=(0,a.WQ)("store"),l=(0,n.KR)(!1),i=(0,n.KR)(),d=(0,n.KR)(),u=e,c=(0,n.KR)([]),m=[{name:"channelNumber",field:"channelNumber",required:!0,label:"Channel",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name (click to edit)",align:"left",sortable:!0},{name:"channelType",field:"channelType",required:!0,label:"Type",align:"left",sortable:!0},{name:"information",field:"information",required:!0,label:"",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"",align:"left",sortable:!0}],v=async()=>{try{c.value=[];let e=Object.keys(u.configuration.channels);e.forEach(e=>{c.value.push({channelNumber:e,name:t.getters.node_channel_name(u.nodeNumber,e),channelType:b(u.configuration.channels[e]),information:p(e,u.configuration.channels[e]),edit:!!u.configuration.channels[e].channelVariables})})}catch(e){(0,r.Qn)(Sn+`: update_node_channels ${e}`)}},b=e=>{try{let l="",a=e.channelType;return l=void 0!=a.overload?be(u.nodeNumber,a.overload,t):a,l}catch(e){(0,r.Qn)(Sn+`: getChannelTypeText ${e}`)}},p=(e,l)=>{try{let e="",n=l.information;for(var a in n){let l=null;"text"==n[a].type&&(n[a].visibilityLogic?pe(u.nodeNumber,n[a].visibilityLogic,t)&&(l=n[a].label):l=n[a].label,null!=l&&(void 0!=l.overload&&(l=be(u.nodeNumber,l.overload,t)),null!=l&&(e+="<"+l+"> ")))}return e}catch(e){(0,r.Qn)(Sn+`: getInformationText ${e}`)}};const g=(e,l)=>{t.setters.node_channel_name(u.nodeNumber,l,e),v()};(0,a.KC)(()=>{}),(0,a.sV)(()=>{v()}),(0,a.$u)(()=>{v()});const f=async e=>{(0,r.Qn)(Sn+`: clickEdit: node ${u.nodeNumber} channel ${e}`),i.value=parseInt(e),d.value=u.configuration.channels[e].channelVariables,l.value=!0};return(t,s)=>{const r=(0,a.g2)("q-td"),u=(0,a.g2)("q-input"),v=(0,a.g2)("q-popup-edit"),b=(0,a.g2)("q-btn"),p=(0,a.g2)("q-tr"),y=(0,a.g2)("q-table"),_=(0,a.g2)("q-card-section"),h=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",Ln,[(0,a.bF)(h,{style:{"max-height":"70vh"},class:"scroll q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(_,{class:"no-margin q-py-none-xs",style:{width:"95vw"}},{default:(0,a.k6)(()=>[(0,a.bF)(y,{flat:"",dense:"",rows:c.value,columns:m,"row-key":"channelNumber","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)(e=>[(0,a.bF)(p,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{key:"channelNumber",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.channelNumber),1)]),_:2},1032,["props"]),(0,a.bF)(r,{key:"name",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.name)+" ",1),(0,a.bF)(v,{modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,buttons:"",onSave:t=>g(t,e.row.channelNumber)},{default:(0,a.k6)(e=>[(0,a.bF)(u,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,dense:"",autofocus:"",counter:"",onKeyup:(0,ht.jR)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),(0,a.bF)(r,{key:"channelType",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.channelType),1)]),_:2},1032,["props"]),(0,a.bF)(r,{key:"information",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.information),1)]),_:2},1032,["props"]),(0,a.bF)(r,{key:"actions",props:e},{default:(0,a.k6)(()=>[e.row.edit?((0,a.uX)(),(0,a.Wv)(b,{key:0,dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"sm",label:"edit",onClick:t=>f(e.row.channelNumber),"no-caps":""},null,8,["onClick"])):(0,a.Q3)("",!0)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1})]),(0,a.bF)((0,n.R1)(Rn),{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e),nodeNumber:e.nodeNumber,channelNumber:i.value,configuration:d.value},null,8,["modelValue","nodeNumber","channelNumber","configuration"])],64)}}},Bn=Wn,Tn=Bn;L()(Wn,"components",{QCard:K.A,QCardSection:A.A,QTable:wt.A,QTr:qt.A,QTd:Ft.A,QPopupEdit:Vt.A,QInput:oe.A,QBtn:Ce.A});const Dn={__name:"NodeVariableBit",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},bit:{type:Number,required:!0},label:{type:String,required:!1},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(0,a.WQ)("store"),o=(0,n.KR)(!1),s={0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128},i=(0,a.EW)({get(){return l.state.nodes[t.nodeNumber].nodeVariables[t.variableIndex]},set(e){}});(0,a.wB)(i,(e,a)=>{o.value=!!(l.state.nodes[t.nodeNumber].nodeVariables[t.variableIndex]&s[t.bit])});const d=(e,t)=>{r()},r=()=>{let e=i.value;o.value?e|=s[t.bit]:e&=~s[t.bit],l.methods.update_node_variable(t.nodeNumber,t.variableIndex,e,!0,p(t.configuration))};return(0,a.sV)(()=>{const e=!!(l.state.nodes[t.nodeNumber].nodeVariables[t.variableIndex]&s[t.bit]);o.value=e}),(t,l)=>{const n=(0,a.g2)("q-checkbox"),s=(0,a.g2)("q-card-section");return(0,a.uX)(),(0,a.Wv)(s,{class:"no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{dense:"","min-width":"100",modelValue:o.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>o.value=e),d],label:e.label,"right-label":""},null,8,["modelValue","label"])]),_:1})}}},Kn=Dn,Un=Kn;L()(Dn,"components",{QCardSection:A.A,QCheckbox:Q.A});const On={class:"text-h6"},Xn={class:"text-subtitle2"},Mn={__name:"NodeVariableBitArray",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},bitCollection:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},configuration:{type:Object,required:!0}},setup(e){const t=(0,a.WQ)("store");(0,n.KR)();var l=(0,n.KR)();const s=e,i=(0,a.EW)(()=>t.state.nodes[s.nodeNumber].nodeVariables);function d(){for(var e in l.value=[],s.bitCollection)if(s.bitCollection[e].overload){var a=be(s.nodeNumber,s.bitCollection[e].overload,t);if(a){var n={bitPosition:s.bitCollection[e].bitPosition,label:a};l.value.push(n)}}else s.bitCollection[e].label&&l.value.push(s.bitCollection[e])}return(0,a.wB)(i,()=>{d()}),(0,a.sV)(()=>{d()}),(t,s)=>{const i=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(d,{class:"q-ma-xs no-padding",style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",On,[(0,a.eW)((0,o.v_)(e.displayTitle)+" ",1),(0,a.bF)(i,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,o.v_)(e.variableIndex),1)]),_:1})]),(0,a.Lk)("div",Xn,(0,o.v_)(e.displaySubTitle),1),(0,a.bF)(i,{class:"no-margin no-padding"},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(l),t=>((0,a.uX)(),(0,a.CE)("div",{key:t},[(0,a.bF)((0,n.R1)(Un),{nodeNumber:e.nodeNumber,variableIndex:e.variableIndex,bit:t.bitPosition,label:t.label,configuration:e.configuration},null,8,["nodeNumber","variableIndex","bit","label","configuration"])]))),128))]),_:1})]),_:1})]),_:1})}}},zn=Mn,Pn=zn;L()(Mn,"components",{QCard:K.A,QCardSection:A.A});const $n={class:"text-h6"},Gn={class:"text-subtitle2"},jn={__name:"NodeVariableBitSingle",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},bit:{type:Number,required:!0},configuration:{type:Object,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)(()=>{}),(t,l)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"min-width":"120px",height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",$n,[(0,a.eW)((0,o.v_)(e.displayTitle)+" ",1),(0,a.bF)(s,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,o.v_)(e.variableIndex),1)]),_:1})]),(0,a.Lk)("div",Gn,(0,o.v_)(e.displaySubTitle),1),(0,a.bF)((0,n.R1)(Un),{nodeNumber:e.nodeNumber,variableIndex:e.variableIndex,bit:e.bit,configuration:e.configuration},null,8,["nodeNumber","variableIndex","bit","configuration"])]),_:1})]),_:1})}}},Hn=jn,Yn=Hn;L()(jn,"components",{QCard:K.A,QCardSection:A.A});const Jn={class:"text-h6"},Zn={class:"text-subtitle2"},eo="NodeVariableButtons",to={__name:"NodeVariableButtons",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},buttonCollection:{required:!0},configuration:{type:Object,required:!0}},setup(e){const t=(0,a.WQ)("store");var l=(0,n.KR)();const s=e,i=(0,a.EW)(()=>t.state.nodes[s.nodeNumber].nodeVariables);function d(){for(var e in l.value=[],s.buttonCollection)if(s.buttonCollection[e].overload){var a=be(s.nodeNumber,s.buttonCollection[e].overload,t);if(a){var n={value:s.buttonCollection[e].value,label:a};l.value.push(n)}}else s.buttonCollection[e].label&&l.value.push(s.buttonCollection[e])}(0,a.wB)(i,()=>{d()}),(0,a.sV)(()=>{d()});const r=e=>{console.log(eo+": clickButton : "+e),t.methods.update_node_variable(s.nodeNumber,s.nodeVariableIndex,e,!0,p(s.configuration))};return(t,s)=>{const i=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-btn"),u=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(u,{class:"q-ma-xs no-padding",style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Jn,[(0,a.eW)((0,o.v_)(e.displayTitle)+" ",1),(0,a.bF)(i,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,o.v_)(e.nodeVariableIndex),1)]),_:1})]),(0,a.Lk)("div",Zn,(0,o.v_)(e.displaySubTitle),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(l),e=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:"no-margin q-pb-xs"},[(0,a.bF)(d,{dense:"",size:"sm",color:"blue",label:e.label,onClick:t=>r(e.value),"no-caps":""},null,8,["label","onClick"])]))),128))]),_:1})]),_:1})}}},lo=to,ao=lo;L()(to,"components",{QCard:K.A,QCardSection:A.A,QBtn:Ce.A});const no={class:"text-h6"},oo={class:"text-subtitle2"},so={__name:"NodeVariableDual",props:{NodeNumber:{type:Number,required:!0},NodeVariableIndexHigh:{type:Number,required:!0},NodeVariableIndexLow:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayOffset:{type:Number,required:!1,default:0},displayScale:{type:Number,required:!1,default:1},displayUnits:{type:String,default:""},max:{type:Number,default:65535},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:15},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(0,a.WQ)("store"),s=(0,n.KR)(),i=(0,a.EW)(()=>(l.state.nodes[t.NodeNumber].nodeVariables[t.NodeVariableIndexHigh]<<8)+l.state.nodes[t.NodeNumber].nodeVariables[t.NodeVariableIndexLow]);(0,a.wB)(i,()=>{s.value=m(i.value,t.displayScale,t.displayOffset,t.startBit,t.endBit)});const d=(0,a.EW)(()=>{let e=0;return t.displayScale<1&&(e=1),t.displayScale<.1&&(e=2),t.displayScale<.01&&(e=3),(t.min*t.displayScale+t.displayOffset).toFixed(e)}),r=(0,a.EW)(()=>{let e=0;try{let l=0;t.displayScale<1&&(l=1),t.displayScale<.1&&(l=2),t.displayScale<.01&&(l=3);let a=2**(t.endBit-t.startBit+1)-1,n=t.max<a?t.max:a;e=(n*t.displayScale+t.displayOffset).toFixed(l)}catch{}return e}),u=(0,a.EW)(()=>{let e=65535*t.displayScale+t.displayOffset;return e>1e6?"#######":e>1e5?"######":e>1e4?"#####":e>1e3?"####.#":e>100?"###.##":"##.###"}),c=e=>{let a=Number(e);a<d.value&&(a=d.value),a>r.value&&(a=r.value);let n=v(i.value,a,t.displayScale,t.displayOffset,t.startBit,t.endBit);l.methods.update_node_variable(t.NodeNumber,t.NodeVariableIndexHigh,n>>8,!0,p(t.configuration)),l.methods.update_node_variable(t.NodeNumber,t.NodeVariableIndexLow,255&n,!0,p(t.configuration)),s.value=m(i.value,t.displayScale,t.displayOffset,t.startBit,t.endBit)};return(0,a.sV)(()=>{s.value=m(i.value,t.displayScale,t.displayOffset,t.startBit,t.endBit)}),(t,l)=>{const n=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-badge"),m=(0,a.g2)("q-input"),v=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(v,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",no,[(0,a.eW)((0,o.v_)(e.displayTitle)+" ",1),(0,a.bF)(n,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,o.v_)(e.NodeVariableIndexHigh)+" : "+(0,o.v_)(e.NodeVariableIndexLow),1)]),_:1})]),(0,a.Lk)("div",oo,(0,o.v_)(e.displaySubTitle),1),(0,a.bF)(i,{color:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)(" range "+(0,o.v_)(d.value)+" to "+(0,o.v_)(r.value)+" "+(0,o.v_)(e.displayUnits),1)]),_:1}),(0,a.bF)(m,{class:"dual_input_box",mask:u.value,"reverse-fill-mask":"",debounce:"10",dense:"",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),outlined:"",onChange:c},null,8,["mask","modelValue"])]),_:1})]),_:1})}}},io=(0,J.A)(so,[["__scopeId","data-v-223524ec"]]),ro=io;L()(so,"components",{QCard:K.A,QCardSection:A.A,QBadge:ne.A,QInput:oe.A,QField:se.A});const uo={class:"q-pa-xs no-margin"},co={style:{border:"2px solid grey"},class:"q-py-none no-margin"},mo={class:"GroupTitle q-py-none no-margin"},vo={__name:"NodeVariableGroup",props:{nodeNumber:{type:Number,required:!0},configuration:Object},setup(e){(0,a.WQ)("store"),(0,n.KR)("nvGroup");return(0,a.sV)(()=>{}),(0,a.$u)(()=>{}),(t,l)=>{const s=(0,a.g2)("q-card-section");return(0,a.uX)(),(0,a.CE)("div",uo,[(0,a.Lk)("div",co,[(0,a.Lk)("div",mo,(0,o.v_)(e.configuration.displayTitle),1),(0,a.bF)(s,{class:"q-py-none no-margin text-body1"},{default:(0,a.k6)(()=>[(0,a.Lk)("b",null,(0,o.v_)(e.configuration.displaySubTitle),1)]),_:1}),(0,a.bF)(s,{class:"q-py-none no-margin row"},{default:(0,a.k6)(()=>[(0,a.bF)((0,n.R1)(Xo),{nodeNumber:e.nodeNumber,configuration:e.configuration.groupItems},null,8,["nodeNumber","configuration"])]),_:1})])])}}},bo=(0,J.A)(vo,[["__scopeId","data-v-104abb8c"]]),po=bo;L()(vo,"components",{QCardSection:A.A});const go={class:"text-h6"},fo={class:"text-subtitle2"},yo={__name:"NodeVariableNumber",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayOffset:{type:Number,required:!1,default:0},displayScale:{type:Number,required:!1,default:1},displayUnits:{type:String,default:""},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(0,a.WQ)("store"),s=(0,n.KR)(),i=(0,a.EW)(()=>{let e=255*t.displayScale+t.displayOffset;return e>1e5?"######":e>1e4?"#####":e>1e3?"####":e>100?"###":e>10?"##.#":e>1?"#.##":".###"}),d=(0,a.EW)(()=>{let e=0;return t.displayScale<1&&(e=1),t.displayScale<.1&&(e=2),t.displayScale<.01&&(e=3),(t.min*t.displayScale+t.displayOffset).toFixed(e)}),r=(0,a.EW)(()=>{let e=0;try{let l=0;t.displayScale<1&&(l=1),t.displayScale<.1&&(l=2),t.displayScale<.01&&(l=3);let a=2**(t.endBit-t.startBit+1)-1,n=t.max<a?t.max:a;e=(n*t.displayScale+t.displayOffset).toFixed(l)}catch{}return e}),u=(0,a.EW)(()=>l.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex]);(0,a.wB)(u,()=>{s.value=m(u.value,t.displayScale,t.displayOffset,t.startBit,t.endBit)});const c=e=>{let a=Number(e);a<d.value&&(a=d.value),a>r.value&&(a=r.value);let n=v(u.value,a,t.displayScale,t.displayOffset,t.startBit,t.endBit);l.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,n,!0,p(t.configuration)),s.value=m(u.value,t.displayScale,t.displayOffset,t.startBit,t.endBit)};return(0,a.sV)(()=>{s.value=m(u.value,t.displayScale,t.displayOffset,t.startBit,t.endBit)}),(t,l)=>{const n=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-badge"),m=(0,a.g2)("q-input"),v=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(v,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",go,[(0,a.eW)((0,o.v_)(e.displayTitle)+" ",1),(0,a.bF)(n,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,o.v_)(e.nodeVariableIndex),1)]),_:1})]),(0,a.Lk)("div",fo,(0,o.v_)(e.displaySubTitle),1),(0,a.bF)(u,{color:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)(" range "+(0,o.v_)(d.value)+" to "+(0,o.v_)(r.value)+" "+(0,o.v_)(e.displayUnits),1)]),_:1}),(0,a.bF)(m,{class:"nv_input_box",mask:i.value,"reverse-fill-mask":"",debounce:"10",dense:"",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),outlined:"",onChange:c},null,8,["mask","modelValue"])]),_:1})]),_:1})}}},_o=(0,J.A)(yo,[["__scopeId","data-v-46af2669"]]),ho=_o;L()(yo,"components",{QCard:K.A,QCardSection:A.A,QBadge:ne.A,QInput:oe.A,QField:se.A});const ko={class:"text-h6"},No={class:"text-subtitle2"},xo={__name:"NodeVariableSelect",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},bitMask:{type:Number,default:255},name:{type:String,required:!1},options:{required:!0},hint:{type:String,default:""},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},configuration:{type:Object}},setup(e){const t=e,l=(t.name?t.name:t.nodeVariableIndex,(0,a.WQ)("store")),s=(0,n.KR)(),i=(0,a.EW)(()=>l.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex]);(0,a.wB)(i,()=>{s.value=i.value&t.bitMask});const d=e=>{let a=i.value;a|=e.value&t.bitMask,a&=e.value|~t.bitMask,l.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,a,!0,p(t.configuration))};return(0,a.sV)(()=>{s.value=i.value&t.bitMask}),(t,l)=>{const n=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-select"),r=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(r,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",ko,[(0,a.eW)((0,o.v_)(e.displayTitle)+" ",1),(0,a.bF)(n,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,o.v_)(e.nodeVariableIndex),1)]),_:1})]),(0,a.Lk)("div",No,(0,o.v_)(e.displaySubTitle),1),(0,a.bF)(i,{modelValue:s.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>s.value=e),d],options:e.options,"map-options":""},null,8,["modelValue","options"])]),_:1})]),_:1})}}},wo=xo,qo=wo;L()(xo,"components",{QCard:K.A,QCardSection:A.A,QSelect:he.A});const Fo={class:"text-h6"},Vo={class:"text-subtitle2"},Co={key:0},Io={key:0},Eo="NodeVariableSlider",Ao={__name:"NodeVariableSlider",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayScale:{type:Number,default:1},displayUnits:{type:String,default:""},displayOffset:{type:Number,default:0},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object,required:!0}},setup(e){const t=e,l=(t.name?t.name:t.nodeVariableIndex,(0,a.WQ)("store")),s=(0,n.KR)(!1),i=(0,n.KR)(""),d=(0,a.EW)(()=>{for(var e=0,l=t.startBit;l<=t.endBit;l++)e+=1<<l;return e});let r=l.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex];const u=(0,a.EW)(()=>(c.value,{height:"150px"})),c=(0,a.EW)(()=>{var e=!1;return t&&(e=!!t.configuration.outputOnWrite),e});(0,a.wB)(c,()=>{});const m=(0,a.EW)(()=>{var e=v.value*t.displayScale+t.displayOffset;return t.displayScale>=1||(e=t.displayScale>=.1?e.toFixed(1):t.displayScale>=.01?e.toFixed(2):e.toFixed(3)),e}),v=(0,a.EW)({get(){return(l.state.nodes[t.nodeNumber].nodeVariables[t.nodeVariableIndex]&d.value)>>t.startBit},set(e){if(e<=t.max&&e>=t.min){let a=e;a<<=t.startBit,r|=a&d.value,r&=a|~d.value,s.value=!1,i.value="",l.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,r,!0,p(t.configuration))}else console.log(Eo+`: Invalid Value : ${e}`),i.value="Invalid Value",s.value=!0}});(0,a.wB)(v,()=>{});(0,a.$u)(()=>{}),(0,a.sV)(()=>{});const b=()=>{console.log(Eo+": clickCenter"),v.value=127},g=()=>{console.log(Eo+": clickNegative"),v.value>t.min&&v.value--},f=()=>{console.log(Eo+": clickNegative"),v.value>t.min+5?v.value-=5:v.value=t.min},y=()=>{console.log(Eo+": clickPositive"),v.value<t.max&&v.value++},_=()=>{console.log(Eo+": clickPositive"),v.value<t.max-5?v.value+=5:v.value=t.max},h=()=>{console.log(Eo+": clickTest"),l.methods.update_node_variable(t.nodeNumber,t.nodeVariableIndex,v.value)};return(t,l)=>{const n=(0,a.g2)("q-card-section"),s=(0,a.g2)("q-badge"),i=(0,a.g2)("q-slider"),d=(0,a.g2)("q-btn"),r=(0,a.g2)("q-space"),p=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(p,{class:"q-ma-xs no-padding",style:{"min-width":"200px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{style:(0,o.Tr)(u.value),class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Fo,[(0,a.eW)((0,o.v_)(e.displayTitle)+"   ",1),(0,a.bF)(n,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,o.v_)(e.nodeVariableIndex),1)]),_:1})]),(0,a.Lk)("div",Vo,(0,o.v_)(e.displaySubTitle),1),(0,a.bF)(s,{color:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(m.value)+" "+(0,o.v_)(e.displayUnits),1)]),_:1}),(0,a.bF)(i,{"model-value":v.value,max:e.max,min:e.min,onChange:l[0]||(l[0]=e=>{v.value=e})},null,8,["model-value","max","min"]),(0,a.bF)(p,{flat:"",class:"row no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"left",dense:"",color:"blue",icon:"remove",size:"sm",onClick:l[1]||(l[1]=e=>g()),"no-caps":""})]),_:1}),(0,a.bF)(r),(0,a.bF)(n,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"left",dense:"",color:"blue",label:"-5",size:"sm",onClick:l[2]||(l[2]=e=>f()),"no-caps":""})]),_:1}),(0,a.bF)(r),(0,a.bF)(n,{flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[c.value?((0,a.uX)(),(0,a.CE)("div",Co,[(0,a.bF)(d,{dense:"",size:"sm",label:"Center",onClick:l[3]||(l[3]=e=>b()),"no-caps":""})])):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(r),(0,a.bF)(n,{flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[c.value?((0,a.uX)(),(0,a.CE)("div",Io,[(0,a.bF)(d,{dense:"",size:"sm",label:"Test",onClick:l[4]||(l[4]=e=>h()),"no-caps":""})])):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(r),(0,a.bF)(n,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"right",dense:"",color:"blue",label:"+5",size:"sm",onClick:l[5]||(l[5]=e=>_()),"no-caps":""})]),_:1}),(0,a.bF)(r),(0,a.bF)(n,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"right",dense:"",color:"blue",icon:"add",size:"sm",onClick:l[6]||(l[6]=e=>y()),"no-caps":""})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})}}};var Qo=l(7410);const Ro=Ao,Lo=Ro;L()(Ao,"components",{QCard:K.A,QCardSection:A.A,QIcon:ia.A,QTooltip:Qo.A,QBadge:ne.A,QSlider:Ve.A,QBtn:Ce.A,QSpace:Ie.A});const So={class:"no-padding no-margin"},Wo={class:"no-padding no-margin",style:{border:"1px solid grey"}},Bo={__name:"NodeVariableTabs",props:{nodeNumber:{type:Number,required:!0},configuration:Object},setup(e){const t=e,l=(0,n.KR)(),s=(0,n.KR)();(0,a.WQ)("store"),(0,n.KR)("nvTabs"),(0,n.KR)("92vw");return(0,a.sV)(()=>{l.value=t.configuration.tabPanels,s.value=l.value[0].displayTitle}),(0,a.wB)(s,()=>{}),(0,a.$u)(()=>{}),(t,i)=>{const d=(0,a.g2)("q-tab"),r=(0,a.g2)("q-tabs"),u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-tab-panel"),m=(0,a.g2)("q-tab-panels");return(0,a.uX)(),(0,a.CE)("div",So,[(0,a.bF)(r,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),"outside-arrows":"","narrow-indicator":"",dense:"",style:{"max-width":"92vw"}},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,e=>((0,a.uX)(),(0,a.Wv)(d,{key:e.displayTitle,label:e.displayTitle,name:e.displayTitle},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),(0,a.bF)(m,{"keep-alive":"",modelValue:s.value,"onUpdate:modelValue":i[1]||(i[1]=e=>s.value=e),class:"no-padding no-margin"},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,t=>((0,a.uX)(),(0,a.Wv)(c,{key:t.displayTitle,name:t.displayTitle,class:"no-padding no-margin"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Wo,[(0,a.bF)(u,{class:"q-py-none no-margin text-body1"},{default:(0,a.k6)(()=>[(0,a.Lk)("b",null,(0,o.v_)(t.displaySubTitle),1)]),_:2},1024),(0,a.bF)(u,{class:"no-padding no-margin row"},{default:(0,a.k6)(()=>[(0,a.bF)((0,n.R1)(Xo),{nodeNumber:e.nodeNumber,configuration:t.items},null,8,["nodeNumber","configuration"])]),_:2},1024)])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])}}},To=Bo,Do=To;L()(Bo,"components",{QTabs:We.A,QTab:Be.A,QTabPanels:Te.A,QTabPanel:De.A,QCardSection:A.A});const Ko={class:"q-pa-xs row"},Uo={__name:"NodeVariables",props:{nodeNumber:Number,configuration:Object},setup(e){const t=e,l=(0,a.WQ)("store");function o(e){var a=!0;return e.visibilityLogic&&(a=pe(t.nodeNumber,e.visibilityLogic,l)),a}return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(()=>{}),(t,l)=>((0,a.uX)(),(0,a.CE)("div",Ko,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.configuration,t=>((0,a.uX)(),(0,a.CE)("div",{key:t},["NodeChannelList"==t.type&&o(t)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(Tn),{key:0,nodeNumber:e.nodeNumber,configuration:t},null,8,["nodeNumber","configuration"])):(0,a.Q3)("",!0),"NodeVariableBitArray"==t.type&&o(t)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(Pn),{key:1,nodeNumber:e.nodeNumber,variableIndex:t.nodeVariableIndex,bitCollection:t.bitCollection,displayTitle:t.displayTitle,displaySubTitle:t.displaySubTitle,configuration:t},null,8,["nodeNumber","variableIndex","bitCollection","displayTitle","displaySubTitle","configuration"])):(0,a.Q3)("",!0),"NodeVariableBitSingle"==t.type&&o(t)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(Yn),{key:2,nodeNumber:e.nodeNumber,variableIndex:t.nodeVariableIndex,displayTitle:t.displayTitle,displaySubTitle:t.displaySubTitle,bit:t.bit,configuration:t},null,8,["nodeNumber","variableIndex","displayTitle","displaySubTitle","bit","configuration"])):(0,a.Q3)("",!0),"NodeVariableButtons"==t.type&&o(t)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(ao),{key:3,nodeNumber:e.nodeNumber,nodeVariableIndex:t.nodeVariableIndex,buttonCollection:t.buttonCollection,displayTitle:t.displayTitle,displaySubTitle:t.displaySubTitle,configuration:t},null,8,["nodeNumber","nodeVariableIndex","buttonCollection","displayTitle","displaySubTitle","configuration"])):(0,a.Q3)("",!0),"NodeVariableDual"==t.type&&o(t)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(ro),{key:4,NodeVariableIndexLow:t.nodeVariableIndexLow,NodeVariableIndexHigh:t.nodeVariableIndexHigh,NodeNumber:e.nodeNumber,displayTitle:t.displayTitle,displaySubTitle:t.displaySubTitle,displayScale:t.displayScale,displayOffset:t.displayOffset,displayUnits:t.displayUnits,min:t.min,max:t.max,startBit:t.startBit,endBit:t.endBit,configuration:t},null,8,["NodeVariableIndexLow","NodeVariableIndexHigh","NodeNumber","displayTitle","displaySubTitle","displayScale","displayOffset","displayUnits","min","max","startBit","endBit","configuration"])):(0,a.Q3)("",!0),"NodeVariableGroup"==t.type&&o(t)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(po),{key:5,nodeNumber:e.nodeNumber,configuration:t},null,8,["nodeNumber","configuration"])):(0,a.Q3)("",!0),"NodeVariableNumber"==t.type&&o(t)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(ho),{key:6,nodeNumber:e.nodeNumber,displayTitle:t.displayTitle,displaySubTitle:t.displaySubTitle,"node-variable-index":t.nodeVariableIndex,displayScale:t.displayScale,displayOffset:t.displayOffset,displayUnits:t.displayUnits,min:t.min,max:t.max,startBit:t.startBit,endBit:t.endBit,configuration:t},null,8,["nodeNumber","displayTitle","displaySubTitle","node-variable-index","displayScale","displayOffset","displayUnits","min","max","startBit","endBit","configuration"])):(0,a.Q3)("",!0),"NodeVariableSelect"==t.type&&o(t)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(qo),{key:7,nodeVariableIndex:t.nodeVariableIndex,nodeNumber:e.nodeNumber,bitMask:t.bitMask,displayTitle:t.displayTitle,displaySubTitle:t.displaySubTitle,options:t.options,configuration:t},null,8,["nodeVariableIndex","nodeNumber","bitMask","displayTitle","displaySubTitle","options","configuration"])):(0,a.Q3)("",!0),"NodeVariableSlider"==t.type&&o(t)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(Lo),{key:8,nodeNumber:e.nodeNumber,nodeVariableIndex:t.nodeVariableIndex,displayTitle:t.displayTitle,displaySubTitle:t.displaySubTitle,displayScale:t.displayScale,displayUnits:t.displayUnits,displayOffset:t.displayOffset,min:t.min,max:t.max,startBit:t.startBit,endBit:t.endBit,configuration:t},null,8,["nodeNumber","nodeVariableIndex","displayTitle","displaySubTitle","displayScale","displayUnits","displayOffset","min","max","startBit","endBit","configuration"])):(0,a.Q3)("",!0),"NodeVariableTabs"==t.type&&o(t)?((0,a.uX)(),(0,a.Wv)((0,n.R1)(Do),{key:9,nodeNumber:e.nodeNumber,configuration:t},null,8,["nodeNumber","configuration"])):(0,a.Q3)("",!0)]))),128))]))}},Oo=Uo,Xo=Oo,Mo={class:"text-h6"},zo={key:0,class:"text-h6"},Po={key:1,class:"text-h6"},$o={class:"q-pa-xs row"},Go={class:"text-body2"},jo="NodevariablesDialog",Ho={__name:"NodeVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),{registerTimeout:i}=(0,I.A)(),d=(0,a.WQ)("store"),u=(0,n.KR)(!1),c=(0,n.KR)(!1),m=(0,n.KR)(!1),v=(0,n.KR)(!1),b=(0,n.KR)(!1),p=(0,n.KR)(!1),g=(0,n.KR)(!1),f=(0,n.KR)(),y=(0,n.KR)(),_=(0,n.KR)(0),h=(0,n.KR)(!1);var k=Date.now();const N=e,x=t,w=(0,a.EW)({get(){return N.modelValue},set(e){x("update:modelValue",e)}});(0,a.wB)(w,async()=>{1==w.value&&(k=Date.now(),g.value=!1,void 0==F.value?(p.value=!0,u.value=!0,y.value=void 0):(p.value=!1,u.value=!1,f.value=d.state.nodeDescriptors[N.nodeNumber].nodeVariableInformation,q()),_.value=(0,C.r)(d,N.nodeNumber))});const q=()=>{let e=l.notify({message:"updating channel names",caption:"please wait....",timeout:0,position:"center",color:"primary"});i(()=>{y.value=(0,r.Gk)(d,F.value,N.nodeNumber),e()},300)},F=(0,a.EW)(()=>{var e=void 0;try{e=d.state.nodeDescriptors[N.nodeNumber].nodeVariables}catch{}return e});(0,a.wB)(m,()=>{try{0==m.value&&q()}catch{}}),(0,a.wB)(F,()=>{1==w.value&&(void 0==F.value?(p.value=!0,u.value=!0):(u.value=!1,f.value=d.state.nodeDescriptors[N.nodeNumber].nodeVariableInformation,q()),_.value=(0,C.r)(d,N.nodeNumber))}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(async()=>{N.nodeNumber&&(0==d.state.nodes[N.nodeNumber].parameters[6]?b.value=!0:b.value=!1)});const V=()=>{(0,r.Qn)(jo+": clickClose");let e=d.state.nodes[N.nodeNumber].NodeModifiedTimestamp-k>0;e&&d.state.notification_settings.backup_notify&&l.notify({message:"Variables changed - Do you want to take a backup?",caption:"Yes, No or 'Don't remind me again'",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{h.value=!0}},{label:"NO",color:"white",handler:()=>{}},{label:"Don't remind me again",color:"white",handler:()=>{d.state.notification_settings.backup_notify=!1}}]})},E=()=>{(0,r.Qn)(jo+`: clickChannelNames: number ${_.value}`),_.value>0&&(m.value=!0)},A=()=>{(0,r.Qn)(jo+": clickUpdateModuleDescriptor"),d.methods.request_matching_mdf_list(N.nodeNumber,"USER"),d.methods.request_matching_mdf_list(N.nodeNumber,"SYSTEM"),c.value=!0},Q=(e,t)=>{(0,r.Qn)(e+`: clickNamesMenu ${e} ${t}`),e.toLowerCase().includes("channel")&&t>0&&((0,r.Qn)(e+`: clickNamesMenu ${e} enabled`),m.value=!0)},R=()=>{(0,r.Qn)(jo+": clickRefresh"),d.methods.request_all_node_variables(N.nodeNumber),v.value=!0},L=()=>{(0,r.Qn)(jo+": clickToggleRaw"),p.value?p.value=!1:p.value=!0},S=()=>{(0,r.Qn)(jo+": clickToggleNodeDescriptor"),g.value?g.value=!1:g.value=!0};return(t,l)=>{const s=(0,a.g2)("q-btn"),i=(0,a.g2)("q-item"),r=(0,a.g2)("q-list"),k=(0,a.g2)("q-menu"),x=(0,a.g2)("q-banner"),q=(0,a.g2)("q-card-section"),C=(0,a.g2)("q-separator"),I=(0,a.g2)("q-card"),W=(0,a.g2)("q-card-actions"),B=(0,a.g2)("q-dialog"),T=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(B,{modelValue:w.value,"onUpdate:modelValue":l[6]||(l[6]=e=>w.value=e),persistent:"","full-width":"","full-height":"",position:"right"},{default:(0,a.k6)(()=>[(0,a.bF)(I,{class:"q-pa-none q-ml-xl"},{default:(0,a.k6)(()=>[(0,a.bF)(q,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)(()=>[(0,n.R1)(d).state.develop?((0,a.uX)(),(0,a.Wv)(s,{key:0,class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"names"},{default:(0,a.k6)(()=>[(0,a.bF)(k,{"auto-close":""},{default:(0,a.k6)(()=>[(0,a.bF)(r,{style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(d).state.layout.nodeDetails[e.nodeNumber].tokenList,e=>((0,a.uX)(),(0,a.CE)("div",{key:e},[(0,a.bF)(i,null,{default:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:e.name,onClick:t=>Q(e.name,e.number)},null,8,["label","onClick"])]),_:2},1024)]))),128))]),_:1})]),_:1})]),_:1})):(0,a.Q3)("",!0),0==!_.value?((0,a.uX)(),(0,a.Wv)(s,{key:1,class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"channel names",onClick:l[0]||(l[0]=e=>E())})):(0,a.Q3)("",!0),(0,a.bF)(s,{color:"cyan-1",size:"sm","text-color":"black",label:"manage Module Descriptor",onClick:l[1]||(l[1]=e=>A())}),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:l[2]||(l[2]=e=>R())}),(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close",onClick:l[3]||(l[3]=e=>V())},null,512),[[T]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Mo," Node Variables for node : "+(0,o.v_)((0,n.R1)(d).getters.node_name(e.nodeNumber)),1)]),_:1})]),_:1}),(0,a.bF)(I,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(q,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(q,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[u.value?((0,a.uX)(),(0,a.CE)("div",zo," *** Descriptor not loaded for this node *** ")):(0,a.Q3)("",!0),b.value?((0,a.uX)(),(0,a.CE)("div",Po," this node has no variables to display ")):(0,a.Q3)("",!0)]),_:1}),f.value?((0,a.uX)(),(0,a.Wv)(q,{key:0,class:"q-pa-none q-ma-none text-h6"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(f.value),1)]),_:1})):(0,a.Q3)("",!0),(0,n.R1)(d).state.nodeDescriptors[N.nodeNumber]?((0,a.uX)(),(0,a.Wv)((0,n.R1)(Xo),{key:1,nodeNumber:e.nodeNumber,configuration:y.value},null,8,["nodeNumber","configuration"])):(0,a.Q3)("",!0),p.value?((0,a.uX)(),(0,a.Wv)(q,{key:2,class:"q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)((0,n.R1)(wn),{nodeNumber:e.nodeNumber},null,8,["nodeNumber"]),(0,a.bF)(C)]),_:1})):(0,a.Q3)("",!0),g.value?((0,a.uX)(),(0,a.Wv)(q,{key:3,class:"q-pa-sm"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",$o,[l[11]||(l[11]=(0,a.Lk)("div",{class:"text-primary text-h6"},[(0,a.eW)("Variables descriptor"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",Go,[(0,a.Lk)("pre",null,(0,o.v_)(F.value),1)])]),(0,a.bF)(C)]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1}),(0,a.bF)(W,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{flat:"",label:"Toggle raw view",onClick:l[4]||(l[4]=e=>L())}),(0,a.bF)(s,{flat:"",label:"Toggle variables descriptor view",onClick:l[5]||(l[5]=e=>S())})]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(Gt),{modelValue:c.value,"onUpdate:modelValue":l[7]||(l[7]=e=>c.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,n.R1)(_t),{modelValue:h.value,"onUpdate:modelValue":l[8]||(l[8]=e=>h.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)(It,{modelValue:m.value,"onUpdate:modelValue":l[9]||(l[9]=e=>m.value=e),nodeNumber:e.nodeNumber,numberOfChannels:_.value},null,8,["modelValue","nodeNumber","numberOfChannels"]),(0,a.bF)((0,n.R1)(mt),{modelValue:v.value,"onUpdate:modelValue":l[10]||(l[10]=e=>v.value=e),callingModule:"Node Variables",message:"Waiting on Node Variables"},null,8,["modelValue"])],64)}}},Yo=Ho,Jo=Yo;L()(Ho,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QMenu:da.A,QList:ra.A,QItem:ua.A,QSeparator:tt.A,QCardActions:et.A}),L()(Ho,"directives",{ClosePopup:ut.A});const Zo="NodesViewAdvancedDialog",es={__name:"NodesViewAdvancedDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),o=(0,a.WQ)("store"),i=(0,n.KR)(!1),d=(0,n.KR)(!1),u=(0,n.KR)(!1),c=(0,n.KR)(""),m=(0,n.KR)(""),v=e,b=t,p=(0,a.EW)({get(){return v.modelValue},set(e){b("update:modelValue",e)}}),g=async e=>{if((0,C.g)(o,e));else{c.value="",m.value="Loading Node Parameters",u.value=!0,o.methods.request_all_node_parameters(e,20,100);let t=Date.now();while(Date.now()-t<6e4){if(c.value.length>0)break;await(0,r.yy)(100)}u.value=!1}return 0==(0,C.g)(o,e)&&(console.log(Zo+`: checkNodeParameters: node ${e} failed`),l.notify({message:"Reading Node Parameters has failed",caption:"please check connections to node",timeout:5e3,type:"warning",position:"center",actions:[{label:"Dismiss"}]})),(0,C.g)(o,e)},f=async()=>{console.log(Zo+": clickNodeZeroParameters"),void 0==o.state.nodes[0]&&(o.state.nodes[0]={}),o.state.nodes[0].parameters={},await g(0)&&(i.value=!0)},y=()=>{console.log(Zo+": clickProgramNode: BOOT mode "),d.value=!0};return(e,t)=>{const l=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-actions"),r=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-card"),b=(0,a.g2)("q-dialog"),g=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(b,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=e=>p.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(v,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])]),default:(0,a.k6)(()=>[t[7]||(t[7]=(0,a.Lk)("div",{class:"text-h6"}," Advanced functions ",-1))]),_:1,__:[7]}),(0,a.bF)(v,{class:"q-py-none q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{style:{width:"250px","min-height":"80px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,{align:"left"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Node 0 parameters",onClick:t[0]||(t[0]=e=>f())},null,512),[[g]])]),_:1})]),_:1}),(0,a.bF)(r,{style:{width:"500px","min-height":"80px"}},{default:(0,a.k6)(()=>t[8]||(t[8]=[(0,a.eW)(" A node with an ID of 0 won't show in the main node view, but it's parameters can be viewed from here. An uninitialised node will have an ID of 0, as will a SLiM consumer node, so if there is more than one node with ID 0, then the last one to respond will be displayed ")])),_:1,__:[8]})]),_:1}),(0,a.bF)(v,{class:"q-py-none q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{style:{"min-width":"250px","min-height":"80px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,{align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(l,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"program Node in boot mode",onClick:t[1]||(t[1]=e=>y())})]),_:1})]),_:1}),(0,a.bF)(r,{style:{width:"500px","min-height":"80px"}},{default:(0,a.k6)(()=>t[9]||(t[9]=[(0,a.eW)(" A node in boot mode (both green & yellow led on) won't respond to CBUS commands, but can be programmed from here ")])),_:1,__:[9]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(bn),{modelValue:i.value,"onUpdate:modelValue":t[3]||(t[3]=e=>i.value=e),nodeNumber:0},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(xa),{modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=e=>d.value=e),nodeNumber:0,mode:"BOOT"},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(mt),{modelValue:u.value,"onUpdate:modelValue":t[5]||(t[5]=e=>u.value=e),callingModule:"NodesView Advanced",message:m.value,onWaitingOnBusTrafficDialogEvent:t[6]||(t[6]=e=>c.value=e)},null,8,["modelValue","message"])],64)}}},ts=es,ls=ts;L()(es,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QCardActions:et.A}),L()(es,"directives",{ClosePopup:ut.A});const as={__name:"NodesViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,n=t,o=(0,a.EW)({get(){return l.modelValue},set(e){n("update:modelValue",e)}});return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])]),default:(0,a.k6)(()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Nodes View ",-1))]),_:1,__:[1]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[2]||(t[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," This view is intended to allow management of all the nodes on the layout ",-1)])),_:1,__:[2]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text_body1"}," When first connected, a QNN is issued to find all the nodes on the network, and the list created from the responses ",-1),(0,a.Lk)("div",{class:"text_body1"}," The REFRESH button can be used at any point to resend a QNN to update the display, when a new node is added for instance ",-1)])),_:1,__:[3]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[4]||(t[4]=[(0,a.Lk)("div",{class:"text_body1"}," The intention is to always use 'fresh' data read from the nodes, and if the required data hasn't yet been read, there may be a pop-up displayed whilst that data is being read ",-1),(0,a.Lk)("div",{class:"text_body1"}," If the node has already been read, the display will use the data it has, but will update when the 'fresh' data arrives ",-1)])),_:1,__:[4]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[5]||(t[5]=[(0,a.Lk)("div",{class:"text_body1"}," The ADVANCED button gives access to further actions ",-1)])),_:1,__:[5]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[6]||(t[6]=[(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1)])),_:1,__:[6]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[7]||(t[7]=[(0,a.Lk)("div",{class:"text_body1"}," The Name option allows the setting of a Group name as well, which is very useful when used with the SEARCH option ",-1)])),_:1,__:[7]})]),_:1})]),_:1},8,["modelValue"])}}},ns=as,os=ns;L()(as,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A}),L()(as,"directives",{ClosePopup:ut.A});const ss={class:"text-h6"},is="VLCBDiagnosticsDialog",ds={__name:"VLCBDiagnosticsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},serviceIndex:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,n.KR)(!1),i=(0,n.KR)([]),d=e,r=t,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.wB)(u,()=>{console.log(is+": WATCH model")});const c=[{name:"diagnosticCode",field:"diagnosticCode",required:!0,label:"Diagnostic Code",align:"left",sortable:!0},{name:"diagnosticValue",field:"diagnosticValue",required:!1,label:"Diagnostic Value",align:"left",sortable:!0},{name:"diagnosticName",field:"diagnosticName",required:!0,label:"Name",align:"left",sortable:!0}],m=(0,a.EW)(()=>{var e=void 0;try{d.nodeNumber&&l.state.nodes[d.nodeNumber].services[d.serviceIndex]&&(e=Object.values(l.state.nodes[d.nodeNumber].services[d.serviceIndex].diagnostics))}catch(e){console.log(is+": nodeServiceDiagnostics: "+e)}return e});(0,a.wB)(m,()=>{m.value&&v()});const v=()=>{try{i.value=[],m.value.forEach(e=>{if(0!=e.DiagnosticCode){let t={};t["diagnosticCode"]=e.DiagnosticCode,t["diagnosticValue"]=e.DiagnosticValue,t["diagnosticName"]=e.DiagnosticName,i.value.push(t)}})}catch(e){console.log(is+": update_rows: "+e)}};(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const b=()=>{console.log(is+": clickToggleShowDiagnosticsJSON"),s.value?s.value=!1:s.value=!0};return(t,d)=>{const r=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),v=(0,a.g2)("q-card-section"),p=(0,a.g2)("q-td"),g=(0,a.g2)("q-tr"),f=(0,a.g2)("q-table"),y=(0,a.g2)("q-card-actions"),_=(0,a.g2)("q-card"),h=(0,a.g2)("q-dialog"),k=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(h,{modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=e=>u.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(_,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(v,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",ss," VLCB Diagnostics for "+(0,o.v_)((0,n.R1)(l).state.nodes[e.nodeNumber].services[e.serviceIndex].ServiceName),1)]),_:1})]),_:1}),(0,a.bF)(_,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(v,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(f,{class:"vlcb-diagnostics-table",dense:"",rows:i.value,columns:c,"row-key":"diagnosticCode","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(g,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(p,{key:"diagnosticCode",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.diagnosticCode),1)]),_:2},1032,["props"]),(0,a.bF)(p,{key:"diagnosticValue",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.diagnosticValue),1)]),_:2},1032,["props"]),(0,a.bF)(p,{key:"diagnosticName",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.diagnosticName),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"]),(0,a.bF)(y,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{flat:"",label:"Toggle diagnostics json",onClick:d[0]||(d[0]=e=>b())})]),_:1}),s.value?((0,a.uX)(),(0,a.Wv)(v,{key:0,class:"text-body2 q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[d[2]||(d[2]=(0,a.eW)(" Diagnostics ")),(0,a.Lk)("pre",null,(0,o.v_)((0,n.R1)(l).state.nodes[e.nodeNumber].services[e.serviceIndex].diagnostics),1)]),_:1,__:[2]})):(0,a.Q3)("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},rs=ds,us=rs;L()(ds,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QTable:wt.A,QTr:qt.A,QTd:Ft.A,QCardActions:et.A}),L()(ds,"directives",{ClosePopup:ut.A});const cs={class:"text-h6"},ms="VLCBExtendedServicesDialog",vs={__name:"VLCBExtendedServicesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},serviceIndex:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,n.KR)([]),i=e,d=t,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,a.wB)(r,()=>{console.log(ms+": WATCH model"),c()});const u=[{name:"esdIndex",field:"esdIndex",required:!0,label:"Byte",align:"left",sortable:!0},{name:"esdValue",field:"esdValue",required:!1,label:"Value",align:"left",sortable:!0},{name:"esdName",field:"esdName",required:!0,label:"Name",align:"left",sortable:!0}],c=()=>{try{const e=l.state.nodes[i.nodeNumber].services[i.serviceIndex].ESD;s.value=[];for(let t of Object.keys(e).sort()){console.log(ms+": update_rows: "+t);let l={};l["esdIndex"]=t,l["esdValue"]=e[t].value,l["esdName"]=e[t].name,s.value.push(l)}}catch(e){console.log(ms+": update_rows: "+e)}};return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(t,i)=>{const d=(0,a.g2)("q-btn"),c=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-td"),b=(0,a.g2)("q-tr"),p=(0,a.g2)("q-table"),g=(0,a.g2)("q-card"),f=(0,a.g2)("q-dialog"),y=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(f,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=e=>r.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(g,{style:{"min-width":"600px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[y]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",cs," Extended service data for "+(0,o.v_)((0,n.R1)(l).state.nodes[e.nodeNumber].services[e.serviceIndex].ServiceName),1)]),_:1})]),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)(()=>[(0,a.bF)(m,{class:"no-margin q-pa-xs"},{default:(0,a.k6)(()=>[(0,a.bF)(p,{class:"vlcb-ESD-table",dense:"",rows:s.value,columns:u,"row-key":"esdIndex","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(b,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(v,{key:"esdIndex",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.esdIndex),1)]),_:2},1032,["props"]),(0,a.bF)(v,{key:"esdValue",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.esdValue),1)]),_:2},1032,["props"]),(0,a.bF)(v,{key:"esdName",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.esdName),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},bs=vs,ps=bs;L()(vs,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QTable:wt.A,QTr:qt.A,QTd:Ft.A}),L()(vs,"directives",{ClosePopup:ut.A});const gs={class:"text-h6"},fs="VLCBServicesDialog",ys={__name:"VLCBServicesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,n.KR)(!1),i=(0,n.KR)(!1),d=(0,n.KR)(!1),r=(0,n.KR)([]),u=(0,n.KR)(null),c=e,m=t,v=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(v,()=>{g()});const b=[{name:"serviceIndex",field:"serviceIndex",required:!0,label:"Service Index",align:"left",sortable:!0},{name:"serviceType",field:"serviceType",required:!1,label:"Service Type",align:"left",sortable:!0},{name:"serviceName",field:"serviceName",required:!0,label:"Name",align:"left",sortable:!0},{name:"serviceVersion",field:"serviceVersion",required:!0,label:"Version",align:"left",sortable:!1},{name:"actions",field:"actions",required:!0,label:"",align:"left"}],p=(0,a.EW)(()=>{var e={};try{c.nodeNumber&&(e=Object.values(l.state.nodes[c.nodeNumber].services))}catch(e){console.log(fs+": nodeServices "+e)}return e});(0,a.wB)(p,()=>{g()});const g=()=>{r.value=[];try{p.value.forEach(e=>{let t={};t["serviceIndex"]=e.ServiceIndex,t["serviceType"]=e.ServiceType,t["serviceName"]=e.ServiceName,t["serviceVersion"]=e.ServiceVersion,r.value.push(t)})}catch(e){console.log(fs+": update_rows "+e)}};(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const f=()=>{console.log(fs+": clickToggleShowServicesJSON"),s.value?s.value=!1:s.value=!0},y=e=>{console.log(`clickiagnostics: index ${e}`),l.methods.request_diagnostics(c.nodeNumber,e),u.value=e,i.value=!0},_=e=>{console.log(`clickESD: index ${e}`),u.value=e,d.value=!0};return(t,m)=>{const p=(0,a.g2)("q-btn"),g=(0,a.g2)("q-banner"),h=(0,a.g2)("q-card-section"),k=(0,a.g2)("q-td"),N=(0,a.g2)("q-tr"),x=(0,a.g2)("q-table"),w=(0,a.g2)("q-card-actions"),q=(0,a.g2)("q-card"),F=(0,a.g2)("q-dialog"),V=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(F,{modelValue:v.value,"onUpdate:modelValue":m[1]||(m[1]=e=>v.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(q,{style:{"min-width":"900px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(h,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(p,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[V]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",gs," VLCB Services for "+(0,o.v_)((0,n.R1)(l).getters.node_name(c.nodeNumber)),1)]),_:1})]),_:1}),(0,a.bF)(q,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(h,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{class:"vlcb-services-table",dense:"",rows:r.value,columns:b,"row-key":"serviceIndex","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(N,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(k,{key:"serviceIndex",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.serviceIndex),1)]),_:2},1032,["props"]),(0,a.bF)(k,{key:"serviceType",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.serviceType),1)]),_:2},1032,["props"]),(0,a.bF)(k,{key:"serviceName",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.serviceName),1)]),_:2},1032,["props"]),(0,a.bF)(k,{key:"serviceVersion",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.serviceVersion),1)]),_:2},1032,["props"]),(0,a.bF)(k,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(p,{color:"primary",outline:"",class:"q-mx-xs q-my-none",label:"Data",onClick:t=>_(e.row.serviceIndex),"no-caps":""},null,8,["onClick"]),(0,a.bF)(p,{color:"primary",outline:"",class:"q-mx-xs q-my-none",label:"Diagnostics",onClick:t=>y(e.row.serviceIndex),"no-caps":""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"]),(0,a.bF)(w,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(p,{flat:"",label:"Toggle services json",onClick:m[0]||(m[0]=e=>f())})]),_:1}),s.value?((0,a.uX)(),(0,a.Wv)(h,{key:0,class:"text-body2 q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.eW)(" Service count: "+(0,o.v_)((0,n.R1)(l).state.nodes[e.nodeNumber].serviceCount)+" ",1),(0,a.Lk)("pre",null,(0,o.v_)((0,n.R1)(l).state.nodes[e.nodeNumber].services),1)]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(us),{modelValue:i.value,"onUpdate:modelValue":m[2]||(m[2]=e=>i.value=e),nodeNumber:e.nodeNumber,serviceIndex:u.value},null,8,["modelValue","nodeNumber","serviceIndex"]),(0,a.bF)((0,n.R1)(ps),{modelValue:d.value,"onUpdate:modelValue":m[3]||(m[3]=e=>d.value=e),nodeNumber:e.nodeNumber,serviceIndex:u.value},null,8,["modelValue","nodeNumber","serviceIndex"])],64)}}},_s=ys,hs=_s;L()(ys,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QTable:wt.A,QTr:qt.A,QTd:Ft.A,QCardActions:et.A}),L()(ys,"directives",{ClosePopup:ut.A});const ks=["src"],Ns="DialogExampleCompositionAPI",xs={__name:"iFrameDialog",props:{modelValue:{type:Boolean,required:!0},URL:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store"),(0,n.KR)(!1);const l=e,o=t,s=(0,a.EW)({get(){return l.modelValue},set(e){o("update:modelValue",e)}});(0,a.wB)(s,()=>{console.log(Ns+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});return(t,l)=>{const n=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),i=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-card"),r=(0,a.g2)("q-dialog"),u=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(r,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)(()=>[(0,a.bF)(d,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(i,{style:{"max-height":"12vh"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(n,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[u]])]),default:(0,a.k6)(()=>[l[1]||(l[1]=(0,a.Lk)("div",{class:"text-h6"}," Example banner ",-1))]),_:1,__:[1]})]),_:1}),(0,a.bF)(d,null,{default:(0,a.k6)(()=>[(0,a.bF)(i,{style:{"max-height":"88vh"},class:"scroll no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.Lk)("iframe",{src:e.URL,style:{width:"100vw",height:"100vh"}},null,8,ks)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},ws=xs,qs=ws;L()(xs,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A}),L()(xs,"directives",{ClosePopup:ut.A});const Fs={style:{height:"35vh"}},Vs="NodesList",Cs={__name:"NodesView",setup(e){const t=(0,s.A)(),l=(0,n.KR)([]),i=[{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Node",align:"center",sortable:!0},{name:"CANID",field:"CANID",label:"CAN ID",align:"center",sortable:!0},{name:"nodeName",field:"nodeName",required:!0,label:"Name",align:"left",sortable:!0},{name:"group",field:"group",label:"Group",align:"left",sortable:!0},{name:"moduleName",field:"moduleName",required:!0,label:"Module",align:"left",sortable:!0},{name:"moduleVersion",field:"moduleVersion",required:!0,label:"Version",align:"left",sortable:!0},{name:"mode",field:"mode",required:!0,label:"Mode",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"events",field:"events",label:"Stored Events",align:"center",sortable:!0},{name:"spaceLeft",field:"spaceLeft",label:"Space",align:"center",sortable:!0},{name:"backupStatus",field:"backupStatus",label:"Backups",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],d=(0,a.WQ)("store"),u=(0,n.KR)(""),c=(0,n.KR)([]),m=(0,n.KR)(),v=(0,n.KR)(!1),b=(0,n.KR)(!1),p=(0,n.KR)(!1),g=(0,n.KR)(!1),f=(0,n.KR)(!1),y=(0,n.KR)(!1),h=(0,n.KR)(!1),k=(0,n.KR)(!1),N=(0,n.KR)(),x=(0,n.KR)(!1),w=(0,n.KR)(!1),q=(0,n.KR)(!1),F=(0,n.KR)("dummyModule/index.html"),I=(0,n.KR)(""),E=(0,n.KR)(""),A=(0,n.KR)("nodes-view-split-table"),Q=(0,a.EW)(()=>d.state.nodes.updateTimestamp);(0,a.wB)(Q,()=>{L()});const R=(0,a.EW)(()=>d.state.layout.updateTimestamp);(0,a.wB)(R,()=>{L()});const L=()=>{c.value=[];let e=Object.values(d.state.nodes);e.forEach(e=>{if(e.nodeNumber>0){let t={};t["nodeNumber"]=parseInt(e.nodeNumber),t["CANID"]=e.CANID,t["nodeName"]=d.getters.node_name(e.nodeNumber),t["group"]=d.getters.node_group(e.nodeNumber),t["moduleName"]=d.getters.module_name(e.nodeNumber),t["moduleVersion"]=d.getters.module_version(e.nodeNumber),t["component"]=e.component,t["status"]=e.status,t["backup"]=W(e.nodeNumber),1==e.flim?t["mode"]="FLiM":0==e.flim?t["mode"]="SLiM":t["mode"]="unknown",t["events"]=e.eventCount,t["spaceLeft"]=e.eventSpaceLeft,t["vlcb"]=e.VLCB,c.value.push(t)}})},S=e=>e in d.state.layout.nodeDetails?d.state.layout.nodeDetails[e].colour:"blue",W=e=>{try{let t=d.state.layout.nodeDetails[e];return void 0!=t.backupList?t.backupList.length:0}catch(e){return 0}};(0,a.KC)(()=>{B(),void 0==d.state.nodes_view_mode&&(d.state.nodes_view_mode="split"),"split"==d.state.nodes_view_mode?A.value="nodes-view-split-table":A.value="nodes-view-full-table",L()});const B=()=>{void 0==d.state.layout.settings&&(d.state.layout["settings"]={NodesView:{}}),void 0==d.state.layout.settings.NodesView&&(d.state.layout.settings["NodesView"]={}),void 0==d.state.layout.settings.NodesView.enableBackupStatus&&(d.state.layout.settings.NodesView["enableBackupStatus"]=!0,d.state.update_layout_needed=!0),void 0==d.state.layout.settings.NodesView.enableCANID&&(d.state.layout.settings.NodesView["enableCANID"]=!0,d.state.update_layout_needed=!0),void 0==d.state.layout.settings.NodesView.enableGroup&&(d.state.layout.settings.NodesView["enableGroup"]=!0,d.state.update_layout_needed=!0),void 0==d.state.layout.settings.NodesView.enableSpaceLeft&&(d.state.layout.settings.NodesView["enableSpaceLeft"]=!0,d.state.update_layout_needed=!0),void 0==d.state.layout.settings.NodesView.enableStoredEvents&&(d.state.layout.settings.NodesView["enableStoredEvents"]=!0,d.state.update_layout_needed=!0),r.rL(l.value,"backupStatus",d.state.layout.settings.NodesView.enableBackupStatus),r.rL(l.value,"CANID",d.state.layout.settings.NodesView.enableCANID),r.rL(l.value,"group",d.state.layout.settings.NodesView.enableGroup),r.rL(l.value,"spaceLeft",d.state.layout.settings.NodesView.enableSpaceLeft),r.rL(l.value,"events",d.state.layout.settings.NodesView.enableStoredEvents)},T=async e=>{d.state.selected_node=e,N.value=e,v.value=!0,await r.yy(300)};d.eventBus.on("NODE_DELETED_EVENT",e=>{d.state.selected_node==e&&(v.value=!1)}),d.eventBus.on("LIST_OF_BACKUPS_FOR_ALL_NODES",()=>{L()}),d.eventBus.on("LAYOUT_DATA",()=>{B()});const D=async e=>{if((0,C.g)(d,e));else{E.value="",I.value="Loading Node Parameters",w.value=!0,d.methods.request_all_node_parameters(e,20,100);let t=Date.now();while(Date.now()-t<12e4){if(E.value.length>0){(0,r.Qn)(Vs+`: checkNodeParameters: early exit ${Date.now()-t} `);break}await r.yy(100)}w.value=!1,(0,r.Qn)(Vs+": checkNodeParameters: WaitingOnBusTraffic ended")}let l=(0,C.g)(d,e);return 0==l&&((0,r.Qn)(Vs+`: checkNodeParameters: node ${e} failed`),t.notify({message:"Reading Node Parameters has failed",caption:"please check connections to node",timeout:5e3,type:"warning",position:"center",actions:[{label:"Dismiss"}]})),l},K=async e=>{var t=d.state.nodes[e].parameters[6];if(void 0!=d.state.nodes[e].nodeVariables[t]);else{E.value="",I.value="Loading Node Variables",d.methods.request_all_node_variables(e),w.value=!0;for(let e=0;e<1e4;e++){if(E.value.length>0)break;await r.yy(10)}w.value=!1}},U=e=>{(0,r.Qn)(Vs+": clickDeleteNode "+e);t.notify({message:"Are you sure you want to delete node "+d.getters.node_name(e),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{d.methods.remove_node(e),d.eventBus.emit("NODE_DELETED_EVENT",e)}},{label:"NO",color:"white",handler:()=>{}}]})},O=e=>{(0,r.Qn)(Vs+`: click_enableBackupStatus ${d.state.layout.settings.NodesView.enableBackupStatus}`),r.rL(l.value,"backupStatus",d.state.layout.settings.NodesView.enableBackupStatus),d.state.update_layout_needed=!0},X=e=>{(0,r.Qn)(Vs+`: click_enableCANID ${d.state.layout.settings.NodesView.enableCANID}`),r.rL(l.value,"CANID",d.state.layout.settings.NodesView.enableCANID),d.state.update_layout_needed=!0},M=e=>{(0,r.Qn)(Vs+`: click_enableGroup ${d.state.layout.settings.NodesView.enableGroup}`),r.rL(l.value,"CANID",d.state.layout.settings.NodesView.enableGroup),d.state.update_layout_needed=!0},z=e=>{(0,r.Qn)(Vs+`: click_enableSPACE ${d.state.layout.settings.NodesView.enableSpaceLeft}`),r.rL(l.value,"spaceLeft",d.state.layout.settings.NodesView.enableSpaceLeft),d.state.update_layout_needed=!0},P=e=>{(0,r.Qn)(Vs+`: click_enableStoredEvents ${d.state.layout.settings.NodesView.enableStoredEvents}`),r.rL(l.value,"events",d.state.layout.settings.NodesView.enableStoredEvents),d.state.update_layout_needed=!0},$=async e=>{(0,r.Qn)(Vs+": clickEvents: node "+e);try{let e=17;1==d.state.layout.connectionDetails.FCU_Compatibility&&(e=16);let t=V().encodeMODE(0,e);d.methods.send_cbus_message(t)}catch(e){console.log(Vs+`: backupNode ${e}`)}N.value=e,await D(e),(0,C.g)(d,e)&&(await K(e),_(d,e),await T(e),"full"==d.state.nodes_view_mode&&(f.value=!0))},G=()=>{(0,r.Qn)(Vs+`: clickViewMode ${d.state.nodes_view_mode}`),d.state.nodes_view_mode="full"==d.state.nodes_view_mode?"split":"full","split"==d.state.nodes_view_mode?A.value="nodes-view-split-table":A.value="nodes-view-full-table",v.value=!1},j=()=>{(0,r.Qn)(Vs+": clickInfo"),h.value=!0},H=async e=>{(0,r.Qn)(Vs+": clickNameNode: node "+e),N.value=e,await T(e),g.value=!0},Y=async e=>{(0,r.Qn)(Vs+": clickNodeAdvanced"),N.value=e,await D(e),(0,C.g)(d,e)&&(await T(e),m.value=e,b.value=!0,(0,r.Qn)(Vs+": clickAdvanced: node"+d.state.selected_node))},J=async()=>{(0,r.Qn)(Vs+": clickNodesViewAdvanced:"),p.value=!0},Z=async e=>{(0,r.Qn)(Vs+": clickParameters"),N.value=e,d.state.nodes[e].parameters={},await D(e)&&(await T(e),y.value=!0)},ee=()=>{(0,r.Qn)(Vs+": clickRefresh"),d.methods.query_all_nodes()},te=async e=>{(0,r.Qn)(Vs+": clickVariables: node "+e);try{let e=17;1==d.state.layout.connectionDetails.FCU_Compatibility&&(e=16);let t=V().encodeMODE(0,e);d.methods.send_cbus_message(t)}catch(e){console.log(Vs+`: backupNode ${e}`)}N.value=e,await D(e),(0,C.g)(d,e)&&(await T(e),1e3==e&&d.state.develop?q.value=!0:(await K(e),k.value=!0))},le=async e=>{(0,r.Qn)(Vs+": clickVLCB"),N.value=e,await D(e),await T(e),await d.methods.request_service_discovery(d.state.selected_node),await r.yy(200),x.value=!0};return(e,t)=>{const s=(0,a.g2)("q-btn"),r=(0,a.g2)("q-space"),_=(0,a.g2)("q-icon"),V=(0,a.g2)("q-input"),C=(0,a.g2)("q-checkbox"),Q=(0,a.g2)("q-item"),R=(0,a.g2)("q-list"),L=(0,a.g2)("q-menu"),W=(0,a.g2)("q-banner"),B=(0,a.g2)("q-td"),T=(0,a.g2)("q-chip"),D=(0,a.g2)("q-tr"),K=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(W,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[t[21]||(t[21]=(0,a.eW)(" view mode ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:(0,n.R1)(d).state.nodes_view_mode,"no-caps":"",onClick:t[0]||(t[0]=e=>G())},null,8,["label"]),(0,a.bF)(r),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:t[1]||(t[1]=e=>j())}),(0,a.bF)(r),t[22]||(t[22]=(0,a.eW)("      ")),(0,a.bF)(V,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=e=>u.value=e),placeholder:"Search"},{default:(0,a.k6)(()=>[(0,a.bF)(_,{size:"sm",name:"search"})]),_:1},8,["modelValue"]),t[23]||(t[23]=(0,a.eW)("    ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Advanced",onClick:t[3]||(t[3]=e=>J())}),t[24]||(t[24]=(0,a.eW)("    ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:t[4]||(t[4]=e=>ee())}),(0,a.bF)(s,{square:"",unelevated:"",color:"primary",icon:"settings"},{default:(0,a.k6)(()=>[(0,a.bF)(L,{"auto-close":""},{default:(0,a.k6)(()=>[(0,a.bF)(R,{style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(Q,null,{default:(0,a.k6)(()=>[(0,a.bF)(C,{class:"no-margin no-padding",modelValue:(0,n.R1)(d).state.layout.settings.NodesView.enableBackupStatus,"onUpdate:modelValue":t[5]||(t[5]=e=>(0,n.R1)(d).state.layout.settings.NodesView.enableBackupStatus=e),onClick:O,label:"show backups column"},null,8,["modelValue"])]),_:1}),(0,a.bF)(Q,null,{default:(0,a.k6)(()=>[(0,a.bF)(C,{class:"no-margin no-padding",modelValue:(0,n.R1)(d).state.layout.settings.NodesView.enableCANID,"onUpdate:modelValue":t[6]||(t[6]=e=>(0,n.R1)(d).state.layout.settings.NodesView.enableCANID=e),onClick:X,label:"show CANID column"},null,8,["modelValue"])]),_:1}),(0,a.bF)(Q,null,{default:(0,a.k6)(()=>[(0,a.bF)(C,{class:"no-margin no-padding",modelValue:(0,n.R1)(d).state.layout.settings.NodesView.enableGroup,"onUpdate:modelValue":t[7]||(t[7]=e=>(0,n.R1)(d).state.layout.settings.NodesView.enableGroup=e),onClick:M,label:"show Group column"},null,8,["modelValue"])]),_:1}),(0,a.bF)(Q,null,{default:(0,a.k6)(()=>[(0,a.bF)(C,{class:"no-margin no-padding",modelValue:(0,n.R1)(d).state.layout.settings.NodesView.enableSpaceLeft,"onUpdate:modelValue":t[8]||(t[8]=e=>(0,n.R1)(d).state.layout.settings.NodesView.enableSpaceLeft=e),onClick:z,label:"show remaining event space column"},null,8,["modelValue"])]),_:1}),(0,a.bF)(Q,null,{default:(0,a.k6)(()=>[(0,a.bF)(C,{class:"no-margin no-padding",modelValue:(0,n.R1)(d).state.layout.settings.NodesView.enableStoredEvents,"onUpdate:modelValue":t[9]||(t[9]=e=>(0,n.R1)(d).state.layout.settings.NodesView.enableStoredEvents=e),onClick:P,label:"show stored events column"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),default:(0,a.k6)(()=>[t[25]||(t[25]=(0,a.Lk)("div",{class:"text-h6"},"Nodes View",-1))]),_:1,__:[25]}),(0,a.Lk)("div",null,[(0,a.bF)(K,{class:(0,o.C4)(A.value),bordered:"",dense:"",rows:c.value,columns:i,filter:u.value,"row-key":"nodeNumber","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"visible-columns":l.value,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(D,{props:e,class:(0,o.C4)([N.value==e.row.nodeNumber?"bg-blue-1":"bg-white","q-my-none q-py-none"])},{default:(0,a.k6)(()=>[(0,a.bF)(B,{key:"nodeNumber",class:(0,o.C4)("text-"+S(e.row.nodeNumber)),props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.nodeNumber),1)]),_:2},1032,["class","props"]),(0,a.bF)(B,{key:"CANID",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.CANID),1)]),_:2},1032,["props"]),(0,a.bF)(B,{key:"nodeName",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.nodeName),1)]),_:2},1032,["props"]),(0,a.bF)(B,{key:"group",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.group),1)]),_:2},1032,["props"]),(0,a.bF)(B,{key:"moduleName",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.moduleName),1)]),_:2},1032,["props"]),(0,a.bF)(B,{key:"moduleVersion",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.moduleVersion),1)]),_:2},1032,["props"]),(0,a.bF)(B,{key:"mode",props:e},{default:(0,a.k6)(()=>["FLiM"==e.row.mode?((0,a.uX)(),(0,a.Wv)(T,{key:0,dense:"",color:"white","text-color":"blue"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.mode),1)]),_:2},1024)):((0,a.uX)(),(0,a.Wv)(T,{key:1,dense:"",color:"white","text-color":"red"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.mode),1)]),_:2},1024))]),_:2},1032,["props"]),(0,a.bF)(B,{key:"status",props:e},{default:(0,a.k6)(()=>[e.row.status?((0,a.uX)(),(0,a.Wv)(T,{key:0,dense:"",color:"white","text-color":"green"},{default:(0,a.k6)(()=>t[26]||(t[26]=[(0,a.eW)("OK")])),_:1,__:[26]})):((0,a.uX)(),(0,a.Wv)(T,{key:1,dense:"",color:"white","text-color":"red"},{default:(0,a.k6)(()=>t[27]||(t[27]=[(0,a.eW)("OFFLINE")])),_:1,__:[27]}))]),_:2},1032,["props"]),(0,a.bF)(B,{key:"events",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.events),1)]),_:2},1032,["props"]),(0,a.bF)(B,{key:"spaceLeft",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.spaceLeft),1)]),_:2},1032,["props"]),(0,a.bF)(B,{key:"backupStatus",props:e},{default:(0,a.k6)(()=>[e.row.backup>0?((0,a.uX)(),(0,a.Wv)(T,{key:0,dense:"",color:"white","text-color":"green"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.backup),1)]),_:2},1024)):((0,a.uX)(),(0,a.Wv)(T,{key:1,dense:"",color:"white","text-color":"red"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.backup),1)]),_:2},1024))]),_:2},1032,["props"]),(0,a.bF)(B,{key:"actions"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Events",onClick:t=>$(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Name",onClick:t=>H(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Parameters",onClick:t=>Z(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Variables",onClick:t=>te(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),e.row.vlcb?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(s,{key:0,dense:"",class:"q-mx-xs q-my-none",outline:"",disabled:"",color:"primary",size:"md",label:"CBUS",onClick:t=>le(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])),e.row.vlcb?((0,a.uX)(),(0,a.Wv)(s,{key:1,dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"VLCB",disabled:!e.row.status,onClick:t=>le(e.row.nodeNumber),"no-caps":""},null,8,["disabled","onClick"])):(0,a.Q3)("",!0),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"blue-grey-1","text-color":"blue-grey-14",size:"md",label:"Advanced",onClick:t=>Y(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"negative",size:"md",label:"Delete",onClick:t=>U(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props","class"])]),_:1},8,["class","rows","filter","visible-columns"])]),(0,a.bF)((0,n.R1)(Ga),{modelValue:b.value,"onUpdate:modelValue":t[10]||(t[10]=e=>b.value=e),nodeNumber:m.value},null,8,["modelValue","nodeNumber"]),(0,a.Lk)("div",Fs,[1==v.value&&"split"==(0,n.R1)(d).state.nodes_view_mode?((0,a.uX)(),(0,a.Wv)((0,n.R1)(ma),{key:0,nodeNumber:(0,n.R1)(d).state.selected_node},null,8,["nodeNumber"])):(0,a.Q3)("",!0)]),(0,a.bF)((0,n.R1)(Ja),{modelValue:g.value,"onUpdate:modelValue":t[11]||(t[11]=e=>g.value=e),nodeNumber:(0,n.R1)(d).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,n.R1)(tn),{modelValue:f.value,"onUpdate:modelValue":t[12]||(t[12]=e=>f.value=e),nodeNumber:(0,n.R1)(d).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,n.R1)(bn),{modelValue:y.value,"onUpdate:modelValue":t[13]||(t[13]=e=>y.value=e),nodeNumber:(0,n.R1)(d).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,n.R1)(Jo),{modelValue:k.value,"onUpdate:modelValue":t[14]||(t[14]=e=>k.value=e),nodeNumber:N.value},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,n.R1)(ls),{modelValue:p.value,"onUpdate:modelValue":t[15]||(t[15]=e=>p.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(os),{modelValue:h.value,"onUpdate:modelValue":t[16]||(t[16]=e=>h.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(mt),{modelValue:w.value,"onUpdate:modelValue":t[17]||(t[17]=e=>w.value=e),callingModule:"Nodes View",message:I.value,onWaitingOnBusTrafficDialogEvent:t[18]||(t[18]=e=>E.value=e)},null,8,["modelValue","message"]),(0,a.bF)((0,n.R1)(hs),{modelValue:x.value,"onUpdate:modelValue":t[19]||(t[19]=e=>x.value=e),nodeNumber:(0,n.R1)(d).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,n.R1)(qs),{modelValue:q.value,"onUpdate:modelValue":t[20]||(t[20]=e=>q.value=e),URL:F.value},null,8,["modelValue","URL"])])}}},Is=(0,J.A)(Cs,[["__scopeId","data-v-94080718"]]),Es=Is;L()(Cs,"components",{QBanner:ft.A,QBtn:Ce.A,QSpace:Ie.A,QInput:oe.A,QIcon:ia.A,QMenu:da.A,QList:ra.A,QItem:ua.A,QCheckbox:Q.A,QTable:wt.A,QTr:qt.A,QTd:Ft.A,QChip:Pt.A,QField:se.A});l(4702);const As="BusTrafficDialog",Qs={__name:"BusTrafficDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,s.A)();const l=(0,a.WQ)("store"),i=(0,n.KR)([]),d=(0,n.KR)(null);let u=null;const c=e,m=t,v=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(v,()=>{}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),l.eventBus.on("LOG_FILE",(e,t)=>{if(v.value&&"bustraffic.txt"==e){(0,r.Qn)(As+": Updated BusTrafficDialog"),u=atob(t);let e=u.split("\r");for(let t=0;t<e.length-1;t++)i.value.push({label:e[t]})}});const b=()=>{(0,r.Qn)(As+": clickDownload");let e=document.createElement("a");e.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(u)),e.setAttribute("download","BusTrafficLog.txt"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},p=()=>{(0,r.Qn)(As+": clickEnd"),d.value.scrollTo(i.value.length)},g=()=>{(0,r.Qn)(As+": clickRefresh"),l.methods.request_log_file("bustraffic.txt")},f=()=>{(0,r.Qn)(As+": clickStart"),d.value.scrollTo(0)};return(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-item-label"),u=(0,a.g2)("q-item-section"),c=(0,a.g2)("q-item"),m=(0,a.g2)("q-virtual-scroll"),y=(0,a.g2)("q-card"),_=(0,a.g2)("q-dialog"),h=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(_,{modelValue:v.value,"onUpdate:modelValue":t[4]||(t[4]=e=>v.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(y,{style:{"min-width":"80vw"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bF)(l,{flat:"",color:"white",size:"md",label:"start",onClick:t[0]||(t[0]=e=>f())}),(0,a.bF)(l,{flat:"",color:"white",size:"md",label:"end",onClick:t[1]||(t[1]=e=>p())}),(0,a.bF)(l,{flat:"",color:"white",size:"md",label:"download",onClick:t[2]||(t[2]=e=>b())}),(0,a.bF)(l,{flat:"",color:"white",size:"md",label:"refresh",onClick:t[3]||(t[3]=e=>g())}),(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[h]])]),default:(0,a.k6)(()=>[t[5]||(t[5]=(0,a.Lk)("div",{class:"text-h6"}," Bus Traffic ",-1))]),_:1,__:[5]})]),_:1}),(0,a.bF)(y,null,{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"max-height":"90vh"},class:"scroll q-py-none no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{ref_key:"virtualListRef",ref:d,style:{"max-height":"85vh"},items:i.value},{default:(0,a.k6)(({item:e,index:t})=>[((0,a.uX)(),(0,a.Wv)(c,{key:t,dense:""},{default:(0,a.k6)(()=>[(0,a.bF)(u,null,{default:(0,a.k6)(()=>[(0,a.bF)(r,null,{default:(0,a.k6)(()=>[(0,a.eW)(" #"+(0,o.v_)(t)+" - "+(0,o.v_)(e.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};var Rs=l(8227),Ls=l(5173),Ss=l(3796);const Ws=Qs,Bs=Ws;L()(Qs,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QVirtualScroll:Rs.A,QItem:ua.A,QItemSection:Ls.A,QItemLabel:Ss.A}),L()(Qs,"directives",{ClosePopup:ut.A});const Ts="CbusErrorsDialog",Ds={__name:"CbusErrorsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,n.KR)(""),i=[{name:"id",field:"id",required:!0,label:"Error Id",align:"left",sortable:!0},{name:"Error",field:"Error",required:!0,label:"Error",align:"left",sortable:!0},{name:"Message",field:"Message",required:!0,label:"Message",align:"left",sortable:!0},{name:"node",field:"node",required:!0,label:"Node",align:"left",sortable:!0},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!1}],d=e,r=t,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.wB)(u,()=>{console.log(Ts+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const c=()=>{l.methods.clear_cbus_errors()};return(e,t)=>{const d=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-space"),b=(0,a.g2)("q-icon"),p=(0,a.g2)("q-input"),g=(0,a.g2)("q-td"),f=(0,a.g2)("q-tr"),y=(0,a.g2)("q-table"),_=(0,a.g2)("q-card"),h=(0,a.g2)("q-dialog"),k=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(h,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)(()=>[(0,a.bF)(_,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])]),default:(0,a.k6)(()=>[t[2]||(t[2]=(0,a.Lk)("div",{class:"text-h6"}," Cbus Error Dialog ",-1))]),_:1,__:[2]})]),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)(()=>[(0,a.bF)(m,{style:{"max-height":"75vh"},class:"scroll no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(y,{title:"Nodes",rows:Object.values((0,n.R1)(l).state.cbus_errors),columns:i,filter:s.value,"row-key":"id","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{top:(0,a.k6)(()=>[t[3]||(t[3]=(0,a.Lk)("div",{class:"col-4 q-table__title text-h4"},"CBUS Errors",-1)),(0,a.bF)(v),(0,a.bF)(p,{outlined:"",dense:"",debounce:"300",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),placeholder:"Search"},{append:(0,a.k6)(()=>[(0,a.bF)(b,{name:"search"})]),_:1},8,["modelValue"]),(0,a.bF)(v),(0,a.bF)(d,{color:"negative",label:"Clear Errors",onClick:c,"no-caps":""})]),body:(0,a.k6)(e=>[(0,a.bF)(f,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(g,{key:"id",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.id),1)]),_:2},1032,["props"]),(0,a.bF)(g,{key:"type",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.type),1)]),_:2},1032,["props"]),(0,a.bF)(g,{key:"Error",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.Error),1)]),_:2},1032,["props"]),(0,a.bF)(g,{key:"Message",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.Message),1)]),_:2},1032,["props"]),(0,a.bF)(g,{key:"node",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.node),1)]),_:2},1032,["props"]),(0,a.bF)(g,{key:"count",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.count),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Ks=Ds,Us=Ks;L()(Ds,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QTable:wt.A,QSpace:Ie.A,QInput:oe.A,QIcon:ia.A,QTr:qt.A,QTd:Ft.A}),L()(Ds,"directives",{ClosePopup:ut.A});const Os="ImportFunctions",Xs=l(3011),Ms=l(6138);function zs(e,t,l){var a;try{a=Xs.xml2js(e,{compact:!0})}catch(e){throw console.log(Os+": ImportFCU: convert.xml2js: "+e),"convert.xml2js: "+e}try{if(Array.isArray(a.MergModuleDataSet.userNodes))a.MergModuleDataSet.userNodes.forEach(e=>{"CAN_SW"!=e.moduleName._text&&(js(t,parseInt(e.nodeNum._text),e.nodeName._text,l),Ys(t,parseInt(e.nodeNum._text),e.moduleName._text,l))});else{let e=a.MergModuleDataSet.userNodes;"CAN_SW"!=e.moduleName._text&&(js(t,parseInt(e.nodeNum._text),e.nodeName._text,l),Ys(t,parseInt(e.nodeNum._text),e.moduleName._text,l))}}catch(e){console.log(Os+": ImportFCU: userNodes "+e)}try{if(Array.isArray(a.MergModuleDataSet.userEvents))a.MergModuleDataSet.userEvents.forEach(e=>{0!=e.eventValue._text&&$s(t,e.eventNode._text,e.eventValue._text,e.eventName._text,l)});else{let e=a.MergModuleDataSet.userEvents;$s(t,e.eventNode._text,e.eventValue._text,e.eventName._text,l)}}catch(e){console.log(Os+": ImportFCU: userEvents "+e)}}function Ps(e,t,l){console.log(Os+": importSPREADSHEET: file size "+e.byteLength);let a={},n={},o={};try{const s=Ms.read(e,{type:"binary"});if(void 0==s.Workbook)throw new Error("Workbook undefined");for(let e=0;e<s.SheetNames.length;e++){if("SHORT_EVENTS"==s.SheetNames[e].toUpperCase()){a=Ms.utils.sheet_to_json(s.Sheets[s.SheetNames[e]]),console.log(Os+"importSPREADSHEET: workbook number of Short Events imported: "+a.length);for(let e=0;e<a.length;e++)void 0!=a[e].eventNumber&&console.log(Os+`importSPREADSHEET: workbook events:\n                ${a[e].eventName}\n                ${a[e].eventNumber}`),$s(t,0,a[e].eventNumber,a[e].eventName,l),Gs(t,0,a[e].eventNumber,a[e].eventGroup,l)}if("LONG_EVENTS"==s.SheetNames[e].toUpperCase()){a=Ms.utils.sheet_to_json(s.Sheets[s.SheetNames[e]]),console.log(Os+"importSPREADSHEET: workbook number of Long Events imported: "+a.length);for(let e=0;e<a.length;e++)void 0!=a[e].eventNumber&&console.log(Os+`importSPREADSHEET: workbook events:\n                ${a[e].eventName}\n                ${a[e].eventNodeNumber}:${a[e].eventNumber}`),$s(t,a[e].eventNodeNumber,a[e].eventNumber,a[e].eventName,l),Gs(t,a[e].eventNodeNumber,a[e].eventNumber,a[e].eventGroup,l)}if("NODES"==s.SheetNames[e].toUpperCase()){n=Ms.utils.sheet_to_json(s.Sheets[s.SheetNames[e]]),console.log(Os+"importSPREADSHEET: workbook number of Nodes imported: "+n.length);for(let e=0;e<n.length;e++)void 0!=n[e].nodeNumber&&(console.log(Os+`importSPREADSHEET: workbook Nodes: ${n[e].nodeName} ${n[e].nodeNumber}`),js(t,n[e].nodeNumber,n[e].nodeName,l),Hs(t,n[e].nodeNumber,n[e].nodeGroup,l),Ys(t,n[e].nodeNumber,n[e].moduleName,l))}if("CHANNELS"==s.SheetNames[e].toUpperCase()){o=Ms.utils.sheet_to_json(s.Sheets[s.SheetNames[e]]),console.log(Os+"importSPREADSHEET: workbook number of Channels imported: "+o.length);for(let e=0;e<o.length;e++)void 0!=o[e].channelNumber&&(console.log(Os+`importSPREADSHEET: workbook Channels: channel ${o[e].channelNumber} ${o[e].channelName}`),Js(t,o[e].nodeNumber,o[e].channelNumber,o[e].channelName,l))}}}catch(e){throw console.log(Os+": importSPREADSHEET "+e),e}}function $s(e,t,l,a,n){if(l>0){let o=(0,r.xT)(t,4)+(0,r.xT)(l,4);void 0==e.state.layout.eventDetails[o]?(e.setters.event_name(o,a),console.log("new event: "+o+" addEventName: "+a)):void 0==e.state.layout.eventDetails[o].name||e.state.layout.eventDetails[o].name.length<1?(e.setters.event_name(o,a),console.log("Event: "+o+": addEventName: "+a+" updated")):e.state.layout.eventDetails[o].name==a?console.log("Event: "+o+": addEventName: "+a+" match"):"overwrite"==n?(e.setters.event_name(o,a),console.log("Event "+o+": addEventName: "+a+" overwrite")):console.log("Event "+o+": addEventName: "+a+" retain")}}function Gs(e,t,l,a,n){if(l>0){let o=(0,r.xT)(t,4)+(0,r.xT)(l,4);void 0==e.state.layout.eventDetails[o]?(e.setters.event_group(o,a),console.log("new event: "+o+" addEventGroup: "+a)):void 0==e.state.layout.eventDetails[o].group||e.state.layout.eventDetails[o].group.length<1?(e.setters.event_group(o,a),console.log("Event: "+o+": addEventGroup: "+a+" updated")):e.state.layout.eventDetails[o].group==a?console.log("Event: "+o+": addEventGroup: "+a+" match"):"overwrite"==n?(e.setters.event_group(o,a),console.log("Event "+o+": addEventGroup: "+a+" overwrite")):console.log("Event "+o+": addEventGroup: "+a+" retain")}}function js(e,t,l,a){t>0&&(void 0==e.state.layout.nodeDetails[t]?(e.setters.node_name(t,l),console.log("new node: "+t+": NodeName: "+l)):void 0==e.state.layout.nodeDetails[t].name||e.state.layout.nodeDetails[t].name.length<1?(e.setters.node_name(t,l),console.log("node "+t+": addNodeName: "+l+" updated")):e.state.layout.nodeDetails[t].name==l?console.log("node "+t+": addNodeName: "+l+" match"):"overwrite"==a?(console.log("node "+t+": addNodeName: "+l+" no match - overwrite"),e.setters.node_name(t,l)):console.log("node "+t+": addNodeName: "+l+" no match - retain"))}function Hs(e,t,l,a){t>0&&(void 0==e.state.layout.nodeDetails[t]?(e.setters.node_group(t,l),console.log("new node: "+t+": nodeGroup: "+l)):void 0==e.state.layout.nodeDetails[t].group||e.state.layout.nodeDetails[t].group.length<1?(e.setters.node_group(t,l),console.log("node "+t+": nodeGroup: "+l+" updated")):e.state.layout.nodeDetails[t].group==l?console.log("node "+t+": nodeGroup: "+l+" match"):"overwrite"==a?(console.log("node "+t+": nodeGroup: "+l+" no match - overwrite"),e.setters.node_group(t,l)):console.log("node "+t+": nodeGroup: "+l+" no match - retain"))}function Ys(e,t,l,a){t>0&&(void 0==e.state.layout.nodeDetails[t]?(e.setters.node_moduleName(t,l),console.log("new node: "+t+": moduleName: "+l)):void 0==e.state.layout.nodeDetails[t].moduleName||e.state.layout.nodeDetails[t].moduleName.length<1?(e.setters.node_moduleName(t,l),console.log("node "+t+": moduleName: "+l+" updated")):e.state.layout.nodeDetails[t].moduleName==l?console.log("node "+t+": moduleName: "+l+" match"):"overwrite"==a?(console.log("node "+t+": moduleName: "+l+" no match - overwrite"),e.setters.node_moduleName(t,l)):console.log("node "+t+": moduleName: "+l+" no match - retain"))}function Js(e,t,l,a,n){let o=null;try{o=e.state.layout.nodeDetails[t].channels[l].channelName}catch{}null==o||0==o.length?(console.log("node "+t+": channelName: "+a+" ChannelName not found - updated"),e.setters.node_channel_name(t,l,a)):o==a?console.log("node "+t+": channelName: "+a+" ChannelName match - do nothing"):"overwrite"==n?(console.log("node "+t+": channelName: "+a+" no match - overwrite"),e.setters.node_channel_name(t,l,a)):console.log("node "+t+": channelName: "+a+" no match - retain")}const Zs="ExportDialog",ei={__name:"ExportDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,s.A)();const o=l(6138),i=(0,a.WQ)("store"),d=(0,n.KR)(),u=((0,n.KR)("retain"),e),c=t,m=(0,a.EW)({get(){return u.modelValue},set(e){c("update:modelValue",e)}});(0,a.wB)(m,()=>{m.value&&(d.value=void 0)}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const v=async e=>{(0,r.Qn)(Zs+": clickExport");let t=i.state.layout.eventDetails,l=[],a=[];for(let e of Object.keys(t).sort())if("00000000"!=e){let n={},o=parseInt(e.slice(0,4),16);n["eventName"]=t[e].name?t[e].name:"",0!=o&&(n["eventNodeNumber"]=o),n["eventNumber"]=parseInt(e.slice(4,8),16),n["eventGroup"]=t[e].group?t[e].group:"",0==o?a.push(n):l.push(n)}let n=i.state.layout.nodeDetails,s=[],d=[];for(let e of Object.keys(n).sort(function(e,t){return e-t})){let t={};t["nodeName"]=n[e].name?n[e].name:"",t["moduleName"]=n[e].moduleName?n[e].moduleName:"",t["nodeNumber"]=parseInt(e),t["nodeGroup"]=n[e].group?n[e].group:"",d.push(t);try{let t=(0,C.r)(i,e);for(var u=1;u<=t;u++){let t={};t["nodeNumber"]=parseInt(e),t["nodeName"]=n[e].name?n[e].name:"",t["nodeGroup"]=n[e].group?n[e].group:"",t["moduleName"]=n[e].moduleName?n[e].moduleName:"",t["channelNumber"]=u;try{t["channelName"]=n[e].channels[u].channelName}catch{t["channelName"]=""}s.push(t)}}catch(e){(0,r.Qn)(Zs+`: clickExport: ${e}`)}}let c={eventName:"",eventNumber:"",eventGroup:""};a.push(c);let m={eventName:"",eventNumber:"",eventGroup:"",eventNodeNumber:""};l.push(m);let v={nodeName:"",moduleName:"",nodeNumber:"",nodeGroup:""};d.push(v);let b={nodeNumber:"",nodeName:"",nodeGroup:"",moduleName:"",channelNumber:"",channelName:""};s.push(b);const p=o.utils.json_to_sheet(d);try{const e=d.reduce((e,t)=>Math.max(e,t.nodeName.length),15)+5,t=d.reduce((e,t)=>Math.max(e,t.nodeGroup.length),15)+5;p["!cols"]=[{wch:e},{wch:20},{wch:20},{wch:t}],(0,r.Qn)(Zs+": clickExport: nodesWorksheet")}catch(e){(0,r.Qn)(Zs+`: clickExport: nodesWorksheet ${e}`)}const g=o.utils.json_to_sheet(l);try{const e=l.reduce((e,t)=>Math.max(e,t.eventName.length),15)+5,t=l.reduce((e,t)=>Math.max(e,t.eventGroup.length),15)+5;g["!cols"]=[{wch:e},{wch:20},{wch:20},{wch:t}],(0,r.Qn)(Zs+": clickExport: longEventsWorksheet")}catch(e){(0,r.Qn)(Zs+`: clickExport: longEventsWorksheet ${e}`)}const f=o.utils.json_to_sheet(a);try{const e=a.reduce((e,t)=>Math.max(e,t.eventName.length),15)+5,t=a.reduce((e,t)=>Math.max(e,t.eventGroup.length),15)+5;f["!cols"]=[{wch:e},{wch:20},{wch:t}],(0,r.Qn)(Zs+": clickExport: shortEventsWorksheet")}catch(e){(0,r.Qn)(Zs+`: clickExport: shortEventsWorksheet ${e}`)}const y=o.utils.json_to_sheet(s);try{const e=s.reduce((e,t)=>Math.max(e,t.channelName.length),15)+5,t=s.reduce((e,t)=>Math.max(e,t.nodeName.length),15)+5,l=s.reduce((e,t)=>Math.max(e,t.nodeGroup.length),15)+5,a=s.reduce((e,t)=>Math.max(e,t.moduleName.length),15)+5;y["!cols"]=[{wch:15},{wch:t},{wch:l},{wch:a},{wch:18},{wch:e}],(0,r.Qn)(Zs+": clickExport: channelsWorksheet")}catch(e){(0,r.Qn)(Zs+`: clickExport: channelsWorksheet ${e}`)}const _=o.utils.book_new();try{o.utils.book_append_sheet(_,p,"Nodes"),o.utils.book_append_sheet(_,g,"Long_Events"),o.utils.book_append_sheet(_,f,"Short_Events"),o.utils.book_append_sheet(_,y,"Channels")}catch(e){(0,r.Qn)(Zs+`: clickExport: book_append_sheet ${e}`)}const h=i.state.layout.layoutDetails.title+" export "+(0,r.A1)()+".ods",k=h.replaceAll(" ","_");o.writeFile(_,k,{bookType:"ods",compression:!0,cellStyles:!0})};return(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),o=(0,a.g2)("q-card-section"),s=(0,a.g2)("q-card-actions"),i=(0,a.g2)("q-card"),d=(0,a.g2)("q-dialog"),r=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(d,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=e=>m.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(i,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[r]])]),default:(0,a.k6)(()=>[t[2]||(t[2]=(0,a.Lk)("div",{class:"text-h6"}," Export ",-1))]),_:1,__:[2]}),(0,a.bF)(o,null,{default:(0,a.k6)(()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text-subtitle2"}," The data exported includes node & event names ",-1),(0,a.Lk)("div",{class:"text-subtitle2"}," The export data does not include node configuration & events, use node backup for that ",-1)])),_:1,__:[3]}),(0,a.bF)(i,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{color:"positive",label:"Export",onClick:t[0]||(t[0]=e=>v())},null,512),[[r,2]])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},ti=ei,li=ti;L()(ei,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QCardActions:et.A}),L()(ei,"directives",{ClosePopup:ut.A});const ai="JsonDialog",ni={__name:"JsonDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,n.KR)("nodes"),i=e,d=t,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});return(0,a.wB)(r,()=>{console.log(ai+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(e,t)=>{const i=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-tab"),m=(0,a.g2)("q-tabs"),v=(0,a.g2)("q-tab-panel"),b=(0,a.g2)("q-tab-panels"),p=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)(()=>[(0,a.bF)(p,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])]),default:(0,a.k6)(()=>[t[3]||(t[3]=(0,a.Lk)("div",{class:"text-h6"}," JSON Dialog ",-1))]),_:1,__:[3]})]),_:1}),(0,a.bF)(p,null,{default:(0,a.k6)(()=>[(0,a.bF)(m,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,a.k6)(()=>[(0,a.bF)(c,{name:"busEvents",label:"Bus Events"}),(0,a.bF)(c,{name:"cbusErrors",label:"Cbus Errors"}),(0,a.bF)(c,{name:"layout",label:"Layout"}),(0,a.bF)(c,{name:"layouts",label:"Layouts"}),(0,a.bF)(c,{name:"nodes",label:"Nodes"}),(0,a.bF)(c,{name:"nodeDescriptors",label:"Node Descriptors"}),(0,a.bF)(c,{name:"restoredData",label:"RestoredData"}),(0,a.bF)(c,{name:"server",label:"Server"}),(0,a.bF)(c,{name:"serverStatus",label:"server Status"}),(0,a.bF)(c,{name:"traffic",label:"Traffic"})]),_:1},8,["modelValue"]),(0,a.bF)(b,{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),animated:""},{default:(0,a.k6)(()=>[(0,a.bF)(v,{name:"busEvents"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[t[4]||(t[4]=(0,a.Lk)("div",{class:"text-h6"},"Events",-1)),(0,a.Lk)("pre",null,"                "+(0,o.v_)((0,n.R1)(l).state.busEvents)+"\n              ",1)]),_:1,__:[4]})]),_:1}),(0,a.bF)(v,{name:"cbusErrors"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[t[5]||(t[5]=(0,a.Lk)("div",{class:"text-h6"},"Cbus Errors",-1)),(0,a.Lk)("pre",null,"              "+(0,o.v_)((0,n.R1)(l).state.cbus_errors)+"\n              ",1)]),_:1,__:[5]})]),_:1}),(0,a.bF)(v,{name:"layout"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[t[6]||(t[6]=(0,a.Lk)("div",{class:"text-h6"},"Layout",-1)),(0,a.Lk)("pre",null,"              "+(0,o.v_)((0,n.R1)(l).state.layout)+"\n              ",1)]),_:1,__:[6]})]),_:1}),(0,a.bF)(v,{name:"layouts"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[t[7]||(t[7]=(0,a.Lk)("div",{class:"text-h6"},"Layouts",-1)),(0,a.Lk)("pre",null,"              "+(0,o.v_)((0,n.R1)(l).state.layouts_list)+"\n              ",1)]),_:1,__:[7]})]),_:1}),(0,a.bF)(v,{name:"nodeDescriptors"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[t[8]||(t[8]=(0,a.Lk)("div",{class:"text-h6"},"Node Descriptors",-1)),(0,a.Lk)("pre",null,"                "+(0,o.v_)((0,n.R1)(l).state.nodeDescriptors)+"\n              ",1)]),_:1,__:[8]})]),_:1}),(0,a.bF)(v,{name:"nodes"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[t[9]||(t[9]=(0,a.Lk)("div",{class:"text-h6"},"Nodes",-1)),(0,a.Lk)("pre",null,"                "+(0,o.v_)((0,n.R1)(l).state.nodes)+"\n              ",1)]),_:1,__:[9]})]),_:1}),(0,a.bF)(v,{name:"restoredData"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[t[10]||(t[10]=(0,a.Lk)("div",{class:"text-h6"},"restoredData",-1)),(0,a.Lk)("pre",null,"                "+(0,o.v_)((0,n.R1)(l).state.restoredData)+"\n              ",1)]),_:1,__:[10]})]),_:1}),(0,a.bF)(v,{name:"server"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[t[11]||(t[11]=(0,a.Lk)("div",{class:"text-h6"},"Server",-1)),(0,a.Lk)("pre",null,"                "+(0,o.v_)((0,n.R1)(l).state.server)+"\n              ",1)]),_:1,__:[11]})]),_:1}),(0,a.bF)(v,{name:"serverStatus"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[t[12]||(t[12]=(0,a.Lk)("div",{class:"text-h6"},"Server Status",-1)),(0,a.Lk)("pre",null,"                "+(0,o.v_)((0,n.R1)(l).state.serverStatus)+"\n              ",1)]),_:1,__:[12]})]),_:1}),(0,a.bF)(v,{name:"traffic"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[t[13]||(t[13]=(0,a.Lk)("div",{class:"text-h6"},"Node Traffic",-1)),(0,a.Lk)("pre",null,"              "+(0,o.v_)((0,n.R1)(l).state.nodeTraffic)+"\n              ",1)]),_:1,__:[13]})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},oi=ni,si=oi;L()(ni,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QTabs:We.A,QTab:Be.A,QTabPanels:Te.A,QTabPanel:De.A}),L()(ni,"directives",{ClosePopup:ut.A});var ii=l(4083),di=l.n(ii),ri=l(7123),ui=l.n(ri),ci=l(8626),mi=l.n(ci),vi=l(8749),bi=l.n(vi);const pi="ImportDialog",gi={__name:"ImportDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,s.A)();const l=(0,a.WQ)("store"),o=(0,n.KR)(),i=(0,n.KR)("SPREADSHEET"),d=(0,n.KR)("retain"),r=(0,n.KR)(!1),u=(0,n.KR)(!1),c=e,m=t,v=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(v,()=>{v.value&&(o.value=void 0,i.value="SPREADSHEET",r.value=!1,u.value=!1)}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const b=()=>{console.log(pi+": clickFCUInfo"),r.value=!0},p=()=>{console.log(pi+": clickImport "+o.value.name);let e=new FileReader;try{"FCU"==i.value?(e.readAsText(o.value),e.onload=function(){zs(e.result,l,d.value),l.eventBus.emit("GENERAL_MESSAGE_EVENT","import "+o.value.name,"successful","info",0)}):"SPREADSHEET"==i.value&&(e.readAsArrayBuffer(o.value),e.onload=function(){Ps(e.result,l,d.value),l.eventBus.emit("GENERAL_MESSAGE_EVENT","import "+o.value.name,"successful","info",0)})}catch(e){console.log(pi+": clickImport: "+e),l.eventBus.emit("GENERAL_MESSAGE_EVENT","import "+o.value.name+" failed",e,"warning",0)}},g=()=>{console.log(pi+": clickSheetInfo"),u.value=!0};return(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-radio"),m=(0,a.g2)("q-file"),f=(0,a.g2)("q-card-actions"),y=(0,a.g2)("q-card"),_=(0,a.g2)("q-dialog"),h=(0,a.g2)("q-img"),k=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(_,{modelValue:v.value,"onUpdate:modelValue":t[8]||(t[8]=e=>v.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(y,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])]),default:(0,a.k6)(()=>[t[11]||(t[11]=(0,a.Lk)("div",{class:"text-h6"}," Import ",-1))]),_:1,__:[11]}),(0,a.bF)(s,null,{default:(0,a.k6)(()=>t[12]||(t[12]=[(0,a.Lk)("div",{class:"text-h6"}," This allows the import of names, groups & modules for Events & Nodes from external files ",-1),(0,a.Lk)("div",{class:"text-h6"},"Node variables and events are not imported, please use node restore for that",-1),(0,a.Lk)("div",{class:"text-h6"},"The data imported is dependant on the file type below",-1),(0,a.Lk)("div",{class:"text-h6"},"Click the info button by each file type for more details",-1)])),_:1,__:[12]}),(0,a.bF)(s,{class:"dense no-padding no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),val:"SPREADSHEET",label:"Spreadsheet import"},null,8,["modelValue"]),t[13]||(t[13]=(0,a.eW)("     ")),(0,a.bF)(l,{dense:"",color:"primary",size:"sm",label:"info",onClick:t[1]||(t[1]=e=>g()),"no-caps":""})]),_:1,__:[13]}),(0,a.bF)(s,{class:"dense no-padding no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),val:"FCU",label:"FCU configuration file import"},null,8,["modelValue"]),t[14]||(t[14]=(0,a.eW)("     ")),(0,a.bF)(l,{dense:"",color:"primary",size:"sm",label:"info",onClick:t[3]||(t[3]=e=>b()),"no-caps":""})]),_:1,__:[14]}),(0,a.bF)(m,{modelValue:o.value,"onUpdate:modelValue":t[4]||(t[4]=e=>o.value=e),label:"Pick one file",filled:"",style:{"max-width":"400px"}},null,8,["modelValue"]),(0,a.bF)(s,null,{default:(0,a.k6)(()=>t[15]||(t[15]=[(0,a.Lk)("div",{class:"text-subtitle2"}," By default, if there is any existing data for an element being imported, this is retained, and the imported data for that element is ignored ",-1),(0,a.Lk)("div",{class:"text-subtitle2"},' However, selecting "overwrite" will result in the import being used instead ',-1)])),_:1,__:[15]}),(0,a.bF)(s,{class:"dense no-padding no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{modelValue:d.value,"onUpdate:modelValue":t[5]||(t[5]=e=>d.value=e),val:"retain",label:"Retain any existing data"},null,8,["modelValue"])]),_:1}),(0,a.bF)(s,{class:"dense no-padding no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{modelValue:d.value,"onUpdate:modelValue":t[6]||(t[6]=e=>d.value=e),val:"overwrite",label:"Overwrite existing data"},null,8,["modelValue"])]),_:1}),(0,a.bF)(s),(0,a.bF)(f,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{color:"positive",label:"IMPORT",disabled:!o.value,onClick:t[7]||(t[7]=e=>p())},null,8,["disabled"]),[[k]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)(_,{modelValue:u.value,"onUpdate:modelValue":t[9]||(t[9]=e=>u.value=e)},{default:(0,a.k6)(()=>[(0,a.bF)(y,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])]),default:(0,a.k6)(()=>[t[16]||(t[16]=(0,a.Lk)("div",{class:"text-h6"}," Import spreadsheet information ",-1))]),_:1,__:[16]}),(0,a.bF)(y,{style:{"max-height":"85vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(s,null,{default:(0,a.k6)(()=>[t[17]||(t[17]=(0,a.Lk)("div",{class:"text-subtitle2"}," The import will accept most spreadsheet types, such as xls, xlsx & ods, but NOT csv (which strictly isn't a spreadsheet format anyway) ",-1)),t[18]||(t[18]=(0,a.Lk)("div",{class:"text-subtitle2"}," The information for long events is expected to be on a sheet named 'Long_Events' ",-1)),(0,a.Lk)("div",null,[(0,a.bF)(h,{src:di(),"spinner-color":"white",style:{width:"500px"}})]),t[19]||(t[19]=(0,a.Lk)("br",null,null,-1)),t[20]||(t[20]=(0,a.Lk)("div",{class:"text-subtitle2"}," The information for short events is expected to be on a sheet named 'Short_Events', and doesn't need the 'EventNodeNumber' column ",-1)),(0,a.Lk)("div",null,[(0,a.bF)(h,{src:ui(),"spinner-color":"white",style:{width:"500px"}})]),t[21]||(t[21]=(0,a.Lk)("br",null,null,-1)),t[22]||(t[22]=(0,a.Lk)("div",{class:"text-subtitle2"},[(0,a.eW)(" The node information is expected to be on a sheet named 'Nodes'."),(0,a.Lk)("br"),(0,a.eW)(" 'moduleName' is optional, and will be updated when the node connects anyway, but useful if the node isn't connected. ")],-1)),(0,a.Lk)("div",null,[(0,a.bF)(h,{src:mi(),"spinner-color":"white",style:{width:"500px"}})]),t[23]||(t[23]=(0,a.Lk)("br",null,null,-1)),t[24]||(t[24]=(0,a.Lk)("div",{class:"text-subtitle2"},[(0,a.eW)(" The channel information is expected to be on a sheet named 'Channels'."),(0,a.Lk)("br"),(0,a.eW)(" Only 'nodeNumber', 'channelNumber' & 'channelName' are actually used by the import."),(0,a.Lk)("br"),(0,a.eW)(" 'nodeName', 'moduleName' and 'groupName' are not used by the import, and so optional."),(0,a.Lk)("br"),(0,a.eW)(" These are populated when a spreadsheet is exported, and very useful to make the list more readable. ")],-1)),(0,a.Lk)("div",null,[(0,a.bF)(h,{src:bi(),"spinner-color":"white",style:{width:"500px"}})]),t[25]||(t[25]=(0,a.Lk)("br",null,null,-1)),t[26]||(t[26]=(0,a.Lk)("div",{class:"text-subtitle2"}," NOTE: the column names are case sensitive and have no spaces, but the order of the columns doesn't matter, as it looks for columns by name, not position. ",-1)),t[27]||(t[27]=(0,a.Lk)("div",{class:"text-subtitle2"}," Additional columns with different headers are ignored, as are other sheets with different names. ",-1))]),_:1,__:[17,18,19,20,21,22,23,24,25,26,27]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)(_,{modelValue:r.value,"onUpdate:modelValue":t[10]||(t[10]=e=>r.value=e)},{default:(0,a.k6)(()=>[(0,a.bF)(y,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])]),default:(0,a.k6)(()=>[t[28]||(t[28]=(0,a.Lk)("div",{class:"text-h6"}," Import FCU configuration information ",-1))]),_:1,__:[28]}),(0,a.bF)(s,null,{default:(0,a.k6)(()=>t[29]||(t[29]=[(0,a.Lk)("div",{class:"text-subtitle2"}," FCU configuration files contain names for events, nodes and modules, but doesn't support groups ",-1),(0,a.Lk)("div",{class:"text-subtitle2"}," FCU configuration files are xml, and the elements used are as follows ",-1),(0,a.Lk)("div",{class:"text-subtitle2"}," For events, the elements used are: eventNode, eventValue and eventName ",-1),(0,a.Lk)("div",{class:"text-subtitle2"}," For nodes, the elements used are: nodeNum, nodeName and moduleName ",-1)])),_:1,__:[29]})]),_:1})]),_:1},8,["modelValue"])],64)}}};var fi=l(2665);const yi=gi,_i=yi;L()(gi,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QRadio:ml.A,QFile:Tt.A,QCardActions:et.A,QImg:fi.A}),L()(gi,"directives",{ClosePopup:ut.A});l(3186),l(5531),l(5683),l(9048);const hi={class:"text-body"},ki="LogsDialog",Ni={__name:"LogsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=(0,n.KR)(),i=(0,n.KR)(),d=(0,n.KR)([]),u=e,c=t,m=[{name:"archive",field:"archive",required:!0,label:"archive",align:"left",sortable:!0},{name:"time",field:"time",required:!0,label:"time",align:"left",sortable:!0}],v=(0,a.EW)({get(){return u.modelValue},set(e){c("update:modelValue",e)}});(0,a.wB)(v,()=>{v.value&&l.methods.request_archived_logs_list()}),l.eventBus.on("ARCHIVED_LOGS_LIST",e=>{v.value&&(s.value=e.list,i.value=e.directory)}),(0,a.wB)(s,()=>{v.value&&b()});const b=()=>{d.value=[],s.value.forEach(e=>{let t=e.split("_"),l=t[1];d.value.push({archive:e,time:r.Fm(l)}),r.Qn(ki+`: updateArchiveList ${e}`)}),d.value.sort(function(e,t){return e.archive<t.archive?1:-1}),r.Qn(ki+`: teRows count ${d.value.length}`)};l.eventBus.on("BINARY_FILE",async e=>{if(v.value)try{r.Qn(ki+`: RECEIVED BINARY_FILE ${e.fileName} length ${e.data.length}`);const a=atob(e.data);r.Qn(ki+`: RECEIVED BINARY_FILE buffer length: ${a.length}`);let n=new Uint8Array(a.length);for(var t=0;t<a.length;t++)n[t]=a[t].charCodeAt(0);r.Qn(ki+`: RECEIVED BINARY_FILE bytesArray length: ${n.length}`);const o=new Blob([n]);r.Qn(ki+`: RECEIVED BINARY_FILE blob length: ${o.size}`);var l=document.createElement("a");document.body.appendChild(l),l.style="display: none",l.href=URL.createObjectURL(o),l.download=e.fileName,l.click(),document.body.removeChild(l)}catch(e){r.Qn(ki+`: RECEIVED BINARY_FILE: ${e}`)}}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const p=async()=>{r.Qn(ki+": clickArchiveNow"),l.methods.save_logs_archive(),await r.yy(2e3),l.methods.request_archived_logs_list()},g=async e=>{try{r.Qn(ki+`: clickDownload ${e}`),l.methods.request_binary_file(i.value,e)}catch(e){timeStampedLog(ki+`: clickDownload: ${e}`)}};return(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card-actions"),u=(0,a.g2)("q-td"),c=(0,a.g2)("q-tr"),b=(0,a.g2)("q-table"),f=(0,a.g2)("q-card"),y=(0,a.g2)("q-dialog"),_=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(y,{modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=e=>v.value=e)},{default:(0,a.k6)(()=>[(0,a.bF)(f,{style:{"min-width":"600px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])]),default:(0,a.k6)(()=>[t[2]||(t[2]=(0,a.Lk)("div",{class:"text-h6"}," Logs ",-1))]),_:1,__:[2]})]),_:1}),(0,a.bF)(f,{flat:"",inline:"",class:"q-pa-xs q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(l,{color:"positive",size:"sm",label:"Archive now",onClick:t[0]||(t[0]=e=>p())}),t[3]||(t[3]=(0,a.eW)("   Create an archive immediately (automatically done at shutdown) "))]),_:1,__:[3]}),t[4]||(t[4]=(0,a.Lk)("div",{class:"text-h6"},"Select an archived logs file to download - newest files at top",-1)),(0,a.Lk)("div",hi,"Archive directory: "+(0,o.v_)(i.value),1),(0,a.bF)(s,{style:{"max-height":"75vh"},class:"scroll no-margin q-pa-xs"},{default:(0,a.k6)(()=>[(0,a.bF)(b,{rows:d.value,columns:m,"row-key":"archive","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-header":"","hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(c,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(u,{key:"archive",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.archive),1)]),_:2},1032,["props"]),(0,a.bF)(u,{key:"time",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.time),1)]),_:2},1032,["props"]),(0,a.bF)(u,null,{default:(0,a.k6)(()=>[(0,a.bF)(l,{class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"sm",label:"Download",onClick:t=>g(e.row.archive)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1,__:[4]})]),_:1})]),_:1},8,["modelValue"])}}},xi=Ni,wi=xi;L()(Ni,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QCardActions:et.A,QTable:wt.A,QTr:qt.A,QTd:Ft.A}),L()(Ni,"directives",{ClosePopup:ut.A});const qi={class:"text-h6"},Fi={class:"text-h6"},Vi={class:"text-h6"},Ci="ModifiedGridConnectDialog",Ii={__name:"ModifiedGridConnectDialog",props:{modelValue:{type:Boolean,required:!0},busMessage:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,n=t,s=(0,a.EW)({get(){return l.modelValue},set(e){n("update:modelValue",e)}});return(0,a.wB)(s,()=>{console.log(Ci+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(t,l)=>{const n=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),d=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card"),u=(0,a.g2)("q-dialog"),c=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(u,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(r,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(n,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[c]])]),default:(0,a.k6)(()=>[l[1]||(l[1]=(0,a.Lk)("div",{class:"text-h6"}," Bus message ",-1))]),_:1,__:[1]}),(0,a.bF)(d,{class:"fit"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",qi,"direction: "+(0,o.v_)(e.busMessage.direction),1),(0,a.Lk)("div",Fi," message: "+(0,o.v_)(e.busMessage.json.text),1),(0,a.Lk)("div",Vi," encoded: "+(0,o.v_)(e.busMessage.json.encoded),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Ei=Ii,Ai=Ei;L()(Ii,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A}),L()(Ii,"directives",{ClosePopup:ut.A});const Qi={class:"text-h6"},Ri="NewNodeDialog",Li={__name:"NewNodeDialog",props:{modelValue:{type:Boolean,required:!0},previousNodeNumber:{type:Number,required:!0},moduleName:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,n.KR)(""),r=(0,n.KR)(""),u=(0,n.KR)(0),c=e,m=t,v=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(v,()=>{console.log(Ri+": WATCH model"),console.log(Ri+": WATCH model: previousNodeNumber "+c.previousNodeNumber),u.value=b(),r.value=""}),(0,a.wB)(u,()=>{console.log(Ri+": WATCH model: newNodeNumber "+u.value);try{u.value in i.state.layout.nodeDetails?(r.value=i.state.layout.nodeDetails[u.value].name,d.value=i.state.layout.nodeDetails[u.value].group):(r.value="",d.value="")}catch(e){console.log(Ri+": WATCH newNodeNumber "+e)}});const b=()=>{var e=0,t=256;i.state.layout.layoutDetails.baseNodeNumber&&(t=i.state.layout.layoutDetails.baseNodeNumber);for(var l=Object.keys(i.state.nodes),a=t;a<65535;a++)if(!l.includes(a.toString())){console.log(Ri+" first free node number: "+a),e=a;break}return e},p=e=>{var t=Object.keys(i.state.nodes);return t.includes(e)?(console.log(Ri+" node number in use: "+e),!1):(console.log(Ri+" free node number: "+e),!0)};(0,a.$u)(()=>{});const g=()=>{if(console.log(Ri+" new node number: "+u.value),console.log(Ri+" new node name: "+r.value),console.log(Ri+" new group name: "+d.value),p(u.value))i.methods.set_node_number(u.value),i.setters.node_name(u.value,r.value),i.setters.node_group(u.value,d.value),v.value=!1;else{l.notify({message:"node number is already assigned - still proceed?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.set_node_number(u.value),i.setters.node_name(u.value,r.value),i.setters.node_group(u.value,d.value),v.value=!1}},{label:"NO",color:"white",handler:()=>{}}]})}};return(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-input"),i=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-card-actions"),b=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(p,{modelValue:v.value,"onUpdate:modelValue":t[4]||(t[4]=e=>v.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(b,{style:{"min-width":"350px"},class:"bg-amber-2"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])]),default:(0,a.k6)(()=>[t[5]||(t[5]=(0,a.Lk)("div",{class:"text-h6"}," New node detected ",-1))]),_:1,__:[5]}),(0,a.bF)(i,{class:"q-pa-md",color:"orange-1"},{default:(0,a.k6)(()=>[t[8]||(t[8]=(0,a.Lk)("div",{class:"text-h6"},[(0,a.eW)(" Accept the first free node number below "),(0,a.Lk)("br"),(0,a.eW)(" or enter a new one ")],-1)),(0,a.bF)(s,{type:"number",style:{"max-width":"150px"},"input-style":{fontSize:"25px"},dense:"",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),autofocus:""},null,8,["modelValue"]),(0,a.Lk)("div",Qi,[(0,a.eW)(" This node was previously "+(0,o.v_)(c.previousNodeNumber),1),t[6]||(t[6]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" The module type is CAN"+(0,o.v_)(c.moduleName),1),t[7]||(t[7]=(0,a.Lk)("br",null,null,-1))])]),_:1,__:[8]}),(0,a.bF)(i,{class:"q-pa-md"},{default:(0,a.k6)(()=>[t[9]||(t[9]=(0,a.Lk)("div",{class:"text-h6"}," Enter a name for this node (optional) ",-1)),(0,a.bF)(s,{"input-style":{fontSize:"25px"},dense:"",modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),autofocus:""},null,8,["modelValue"])]),_:1,__:[9]}),(0,a.bF)(i,{class:"q-pa-md"},{default:(0,a.k6)(()=>[t[10]||(t[10]=(0,a.Lk)("div",{class:"text-h6"}," Enter a group for this node (optional) ",-1)),(0,a.bF)(s,{"input-style":{fontSize:"25px"},dense:"",modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),autofocus:""},null,8,["modelValue"])]),_:1,__:[10]}),(0,a.bF)(m,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(l,{flat:"",label:"Accept",onClick:t[3]||(t[3]=e=>g())})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Si=Li,Wi=Si;L()(Li,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QInput:oe.A,QCardActions:et.A}),L()(Li,"directives",{ClosePopup:ut.A});const Bi="TestDialog",Ti={__name:"TestDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),o=((0,n.KR)(!1),e),s=t,i=(0,a.EW)({get(){return o.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,()=>{console.log(Bi+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const d=()=>{console.log(Bi+": clickRequestEventByIndex"),l.methods.request_node_event_by_index(1,2)};return(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),o=(0,a.g2)("q-card-section"),s=(0,a.g2)("q-card-actions"),r=(0,a.g2)("q-card"),u=(0,a.g2)("q-dialog"),c=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(u,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e)},{default:(0,a.k6)(()=>[(0,a.bF)(r,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[c]])]),default:(0,a.k6)(()=>[t[2]||(t[2]=(0,a.Lk)("div",{class:"text-h6"}," Test dialog ",-1))]),_:1,__:[2]})]),_:1}),(0,a.bF)(r,null,{default:(0,a.k6)(()=>[(0,a.bF)(s,{align:"left",class:"text-primary q-py-none no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(l,{flat:"",label:"Request Event By Index",onClick:t[0]||(t[0]=e=>d())})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Di=Ti,Ki=Di;L()(Ti,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QCardActions:et.A}),L()(Ti,"directives",{ClosePopup:ut.A});l(5962);const Ui={class:"q-pa-md row"},Oi="AddLayoutDialog",Xi={__name:"AddLayoutDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),o=(0,n.KR)(""),s=((0,n.KR)([]),e),i=t,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(d,()=>{console.log(Oi+": WATCH model")});const u=(0,a.EW)(()=>Object.values(l.state.layouts_list));(0,a.wB)(u,()=>{}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const c=async()=>{console.log(Oi+": Change layout"),l.methods.change_layout(o.value),l.methods.request_layout_list(),o.value="",await(0,r.yy)(50),d.value=!1};return(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-input"),i=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card"),u=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(u,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(r,{style:{"min-width":"400px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])]),default:(0,a.k6)(()=>[t[3]||(t[3]=(0,a.Lk)("div",{class:"text-h6"}," Add Layout ",-1))]),_:1,__:[3]}),(0,a.Lk)("div",Ui,[(0,a.bF)(r,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{class:"q-pa-xs"},{default:(0,a.k6)(()=>[t[4]||(t[4]=(0,a.Lk)("div",{class:"text-h6"},"Add new layout",-1)),(0,a.bF)(s,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),label:"layout name",maxlength:"30"},null,8,["modelValue"]),t[5]||(t[5]=(0,a.Lk)("p",null,"enter a name for a new layout",-1)),(0,a.bF)(l,{color:"positive",label:"Add",onClick:t[1]||(t[1]=e=>c()),"no-caps":""})]),_:1,__:[4,5]})]),_:1})])]),_:1})]),_:1},8,["modelValue"])}}},Mi=Xi,zi=Mi;L()(Xi,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QInput:oe.A}),L()(Xi,"directives",{ClosePopup:ut.A});const Pi={class:"q-pa-xs row"},$i={class:"q-pa-xs row"},Gi={class:"q-pa-xs row"},ji={class:"q-pa-xs row"},Hi={class:"q-pa-xs row"},Yi="EditConnectionDetailsDialog",Ji={__name:"EditConnectionDetailsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),o=(0,n.KR)(""),s=(0,n.KR)(""),i=(0,n.KR)(""),d=(0,n.KR)(5550),u=(0,n.KR)(!1),c=(0,n.KR)(["Auto","SerialPort","Network"]),m=e,v=t,b=(0,a.EW)({get(){return m.modelValue},set(e){v("update:modelValue",e)}});(0,a.wB)(b,()=>{console.log(Yi+": WATCH model"),o.value=l.state.layout.connectionDetails.mode,s.value=l.state.layout.connectionDetails.serialPort,i.value=l.state.layout.connectionDetails.host,d.value=l.state.layout.connectionDetails.hostPort,void 0!=l.state.layout.connectionDetails.FCU_Compatibility?u.value=l.state.layout.connectionDetails.FCU_Compatibility:u.value=!1}),(0,a.wB)(o,()=>{"Auto"==o.value&&(s.value="",i.value="",d.value=""),"Network"==o.value&&(s.value="",""==l.state.layout.connectionDetails.hostPort&&(d.value="5550")),"SerialPort"==o.value&&(i.value="",d.value="")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const p=async()=>{console.log(Yi+`: click_FCU_Compatibility ${u.value}`),l.state.layout.connectionDetails.FCU_Compatibility=u.value},g=async()=>{console.log(Yi+": clickSave"),l.state.layout.connectionDetails.mode=o.value,"SerialPort"==o.value?l.state.layout.connectionDetails.serialPort=s.value:l.state.layout.connectionDetails.serialPort="","Network"==o.value?(l.state.layout.connectionDetails.host=i.value,l.state.layout.connectionDetails.hostPort=d.value):(l.state.layout.connectionDetails.host="",l.state.layout.connectionDetails.hostPort=""),l.methods.update_layout(),await(0,r.yy)(50),b.value=!1};return(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),r=(0,a.g2)("q-select"),m=(0,a.g2)("q-card"),v=(0,a.g2)("q-input"),f=(0,a.g2)("q-checkbox"),y=(0,a.g2)("q-card-actions"),_=(0,a.g2)("q-dialog"),h=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(_,{modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=e=>b.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(m,{style:{"min-width":"800px","min-height":"500px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[h]])]),default:(0,a.k6)(()=>[t[7]||(t[7]=(0,a.Lk)("div",{class:"text-h6"}," Edit connection details ",-1))]),_:1,__:[7]}),(0,a.Lk)("div",Pi,[(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"250px"}},{default:(0,a.k6)(()=>[(0,a.bF)(r,{autofocus:"",outlined:"",modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),options:c.value,label:"Mode"},null,8,["modelValue","options"])]),_:1}),(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"500px"}},{default:(0,a.k6)(()=>t[8]||(t[8]=[(0,a.eW)(" Auto will connect to the first CANUSB or CANUSB4 it finds "),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" SerialPort will connect to the serial port entered below"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Network will use the address & port entered below "),(0,a.Lk)("br",null,null,-1)])),_:1,__:[8]})]),(0,a.Lk)("div",$i,[(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"250px"}},{default:(0,a.k6)(()=>[(0,a.bF)(v,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),label:"serialPort",maxlength:"30"},null,8,["modelValue"])]),_:1}),(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"500px"}},{default:(0,a.k6)(()=>t[9]||(t[9]=[(0,a.eW)(" Forces MMC to use this specific serial port"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Windows example: COM3"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Linux example: ttyUSB2"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Leave blank if 'SerialPort' not selected"),(0,a.Lk)("br",null,null,-1)])),_:1,__:[9]})]),(0,a.Lk)("div",Gi,[(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"250px"}},{default:(0,a.k6)(()=>[(0,a.bF)(v,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),label:"Host",maxlength:"30"},null,8,["modelValue"])]),_:1}),(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"500px"}},{default:(0,a.k6)(()=>t[10]||(t[10]=[(0,a.eW)(" Name or IP address of machine to use for CAN connection"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Leave blank if 'Network' not selected ")])),_:1,__:[10]})]),(0,a.Lk)("div",ji,[(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"250px"}},{default:(0,a.k6)(()=>[(0,a.bF)(v,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value=e),label:"Host Port",maxlength:"30"},null,8,["modelValue"])]),_:1}),(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"500px"}},{default:(0,a.k6)(()=>t[11]||(t[11]=[(0,a.eW)(" Port number of machine for CAN connection"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" 5550 is the default assigned port number"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" unused if 'Network' not selected ")])),_:1,__:[11]})]),(0,a.Lk)("div",Hi,[(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"250px"}},{default:(0,a.k6)(()=>[(0,a.bF)(f,{"min-width":"100",modelValue:u.value,"onUpdate:modelValue":t[4]||(t[4]=e=>u.value=e),label:"VLCB 'FCU Compatibility mode'",onClick:p,"left-label":""},null,8,["modelValue"])]),_:1}),(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"500px"}},{default:(0,a.k6)(()=>t[12]||(t[12]=[(0,a.eW)(" In VLCB nodes, disables some enhancements for FCU compatibility"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Leave unchecked unless FCU also being used at the same time as MMC ")])),_:1,__:[12]})]),(0,a.bF)(y,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(l,{color:"primary",label:"save",onClick:t[5]||(t[5]=e=>g()),"no-caps":""})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Zi=Ji,ed=Zi;L()(Ji,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QSelect:he.A,QInput:oe.A,QCheckbox:Q.A,QCardActions:et.A}),L()(Ji,"directives",{ClosePopup:ut.A});const td={__name:"StartupInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,n=t,o=(0,a.EW)({get(){return l.modelValue},set(e){n("update:modelValue",e)}});return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])]),default:(0,a.k6)(()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Startup Dialog ",-1))]),_:1,__:[1]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[2]||(t[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Startup dialog is intended to allow selection of layout and connection method ",-1)])),_:1,__:[2]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text_body1"}," To allow operation with more than one model railway layout, data is stored against a named layout ",-1),(0,a.Lk)("div",{class:"text_body1"}," Layouts can be selected, added or deleted at this point, and each layout also retains it's own connection method ",-1),(0,a.Lk)("div",{class:"text_body1"}," A 'default' layout is created automatically, but it's recommended to add a named layout ",-1)])),_:1,__:[3]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[4]||(t[4]=[(0,a.Lk)("div",{class:"text_body1"}," The default method of connecting is 'Auto', which will cause MMC to open a connection using the first CANUSB or CANUSB4 it finds, and no further configuration is needed if this is the required connection ",-1)])),_:1,__:[4]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[5]||(t[5]=[(0,a.Lk)("div",{class:"text_body1"}," The 'SerialPort' option will force the connection onto a specific serial port, which may be required if there is more than one CANUSB, or another device than accepts a serial connection ",-1)])),_:1,__:[5]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[6]||(t[6]=[(0,a.Lk)("div",{class:"text_body1"}," The Network option allows a TCP/IP connection to another service, like cbusServer or CANether ",-1),(0,a.Lk)("div",{class:"text_body1"}," The 'Host' parameter allows connection to either a remoted connection, or the same machine the MMC is running on - Computer names or IP addresses can be entered for the Host setting ",-1),(0,a.Lk)("div",{class:"text_body1"},[(0,a.eW)(" There is a useful Technical Bulletin on the CANether that explains network connections in more detail "),(0,a.Lk)("a",{href:"https://www.merg.org.uk/merg_wiki/lib/exe/fetch.php?media=cbus:cbus:cbusmodules:canether:canether_connection_and_configuration_technical_bulletin_draft_1.pdf"},"link")],-1)])),_:1,__:[6]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[7]||(t[7]=[(0,a.Lk)("div",{class:"text_body1"}," The connection method can be configured using the EDIT button for the selected layout, and each layout will retain it's own connection details ",-1),(0,a.Lk)("div",{class:"text_body1"}," The selected layout is saved automatically when changes are made ",-1)])),_:1,__:[7]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[8]||(t[8]=[(0,a.Lk)("div",{class:"text_body1"}," When 'Auto' or 'SerialPort' modes are selected, an 'embedded' cbusServer is automatically started on port 5550, which can be used by other applications at the same time, such as FCU ",-1)])),_:1,__:[8]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[9]||(t[9]=[(0,a.Lk)("div",{class:"text_body1"}," In VLCB nodes, 'FCU compatibility mode' disables some enhancements for FCU compatibility. Leave off unless FCU also being used at the same time as MMC ",-1)])),_:1,__:[9]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[10]||(t[10]=[(0,a.Lk)("div",{class:"text_body1"}," With all connection options, 'modified Grid Connect' is the data format used to transfer messages to and from the modules ",-1),(0,a.Lk)("div",{class:"text_body1"}," Grid Connect is an established byte orientated data format used to encode the bit orientated CAN bus data format, such that it can be transmitted over stream connections, like serial or TCP/IP ",-1),(0,a.Lk)("div",{class:"text_body1"}," 'modified Grid Connect' is a variant of the Grid Connect format that has small modifications for use with CBUS devices ",-1)])),_:1,__:[10]})]),_:1})]),_:1},8,["modelValue"])}}},ld=td,ad=ld;L()(td,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A}),L()(td,"directives",{ClosePopup:ut.A});const nd={class:"q-pa-md row"},od={class:"text-h6"},sd={class:"bg-light-blue-1 text-h6"},id={class:"text-h6"},dd={class:"text-h6"},rd="StartupDialog",ud={__name:"StartupDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,n.KR)("<not selected>"),u=(0,n.KR)([]),c=(0,n.KR)(!1),m=(0,n.KR)(!1),v=(0,n.KR)(!1),b=(0,n.KR)(!1),p=(0,n.KR)(!1),g=(0,n.KR)(),f=(0,n.KR)([]),y=(0,n.KR)(!1),_=(0,n.KR)(""),h=(0,n.KR)(Date.now()),k=[{name:"layout",field:"layout",required:!0,label:"Layout",sortable:!0}],N=e,x=t,w=(0,a.EW)({get(){return N.modelValue},set(e){x("update:modelValue",e)}});(0,a.wB)(w,()=>{1==w.value&&(C(),_.value="")});const q=(0,a.EW)(()=>Object.values(i.state.layout));(0,a.wB)(q,()=>{V()});const F=(0,a.EW)(()=>Object.values(i.state.layouts_list));(0,a.wB)(F,()=>{C()});const V=()=>{try{d.value=i.state.layout.layoutDetails.title}catch{}try{void 0==i.state.layout.connectionDetails&&(i.state.layout.connectionDetails={},i.state.layout.connectionDetails["mode"]="Auto",i.state.layout.connectionDetails["serialPort"]="",i.state.layout.connectionDetails["host"]="",i.state.layout.connectionDetails["hostPort"]="",i.state.layout.connectionDetails["FCU_Compatibility"]=!1,i.methods.update_layout())}catch(e){}f.value=[],f.value.push("Mode: "+i.state.layout.connectionDetails.mode),"SerialPort"==i.state.layout.connectionDetails.mode&&f.value.push("serialPort: "+i.state.layout.connectionDetails.serialPort),"Network"==i.state.layout.connectionDetails.mode&&(f.value.push("Host: "+i.state.layout.connectionDetails.host),f.value.push("Host Port: "+i.state.layout.connectionDetails.hostPort)),1==i.state.layout.connectionDetails.FCU_Compatibility&&f.value.push("VLCB 'FCU compatibility mode': ON"),p.value=!0},C=()=>{u.value=[],F.value.forEach(e=>{u.value.push({layout:e})})};(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const I=e=>{try{let t=F.value.filter(t=>t.toUpperCase().includes(e));if(r.Qn(rd+`: getNewLayoutName: newList: ${t}`),1==t.length)return e.toUpperCase()+" COPY 01";{let l=t.filter(e=>e.includes("COPY"));if(r.Qn(rd+`: getNewLayoutName: newList2: ${l}`),0==l.length)return e.toUpperCase()+" COPY 01";{let t=l[l.length-1];r.Qn(rd+`: getNewLayoutName: newlayout: ${t}`);let a=t.substring(t.lastIndexOf("COPY"),t.length);r.Qn(rd+`: getNewLayoutName: copyString: ${a}`);let n=parseInt(a.replace(/[^0-9]/g,""))+1;r.Qn(rd+`: getNewLayoutName: copyNumber: ${n}`);let o=e+" COPY "+n.toString().padStart(2,0);return o}}}catch(e){return r.Qn(rd+`: getNewLayoutName: ${e}`),""}},E=async()=>{r.Qn(rd+": clickAddNewLayout"),c.value=!0},A=async e=>{r.Qn(rd+": clickCopyLayout"),g.value=e,_.value=I(e.toUpperCase()),y.value=!0},Q=async(e,t)=>{r.Qn(rd+`: copyLayout ${e} ${t}`),t.length>0?i.methods.copy_layout(e,t):l.notify({message:"no layout name entered",timeout:1e3,type:"warning",position:"center",actions:[{label:"Dismiss"}]}),y.value=!1},R=async e=>{r.Qn(rd+": clickDeleteLayout ",e);l.notify({message:"Are you sure you want to delete layout "+e,timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.delete_layout(e),await r.yy(50),i.methods.request_layout_list()}},{label:"NO",color:"white",handler:()=>{}}]})},L=async()=>{r.Qn(rd+": clickEditConnectionDetails"),m.value=!0},S=async()=>{r.Qn(rd+": clickInfo"),v.value=!0},W=()=>{r.Qn(rd+": clickExit");l.notify({message:"Are you sure you want to close the application?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.STOP_SERVER(),await r.yy(50)}},{label:"NO",color:"white",handler:()=>{}}]})},B=async()=>{r.Qn(rd+": clickProceed"),i.state.layout!={}&&(i.methods.start_connection(i.state.layout.connectionDetails),await r.yy(500),i.state.inStartup=!1,w.value=!1)},T=async e=>{let t=Date.now()-h.value;t>800&&(r.Qn(rd+": clickLayouts on ",e),h.value=Date.now(),i.methods.change_layout(e),b.value=(0,n.KR)(!0))};return(e,t)=>{const l=(0,a.g2)("q-btn"),s=(0,a.g2)("q-space"),i=(0,a.g2)("q-banner"),r=(0,a.g2)("q-td"),p=(0,a.g2)("q-table"),h=(0,a.g2)("q-card-section"),N=(0,a.g2)("q-card"),x=(0,a.g2)("q-card-actions"),q=(0,a.g2)("q-dialog"),F=(0,a.g2)("q-input"),V=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(q,{modelValue:w.value,"onUpdate:modelValue":t[6]||(t[6]=e=>w.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(N,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bF)(l,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:t[0]||(t[0]=e=>S())}),(0,a.bF)(s),(0,a.bF)(l,{class:"q-mx-xs q-my-none",size:"sm",color:"negative",label:"Exit",onClick:t[1]||(t[1]=e=>W()),"no-caps":""})]),default:(0,a.k6)(()=>[t[13]||(t[13]=(0,a.Lk)("div",{class:"text-h6"}," Startup ",-1))]),_:1,__:[13]}),(0,a.Lk)("div",nd,[(0,a.bF)(N,{inline:"",class:"q-pa-xs",flat:"",style:{width:"380px"}},{default:(0,a.k6)(()=>[t[15]||(t[15]=(0,a.Lk)("div",{class:"text-h6"},"Select Layout",-1)),(0,a.bF)(h,{style:{"max-height":"60vh"},class:"scroll q-ma-xs q-pa-xs"},{default:(0,a.k6)(()=>[(0,a.bF)(p,{class:"startup-table",dense:"",rows:u.value,columns:k,"row-key":"name","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-header":"","hide-bottom":""},{"body-cell":(0,a.k6)(e=>[(0,a.bF)(r,{key:"layout",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(l,{flat:"",color:"primary",label:e.value,onClick:t=>T(e.value)},null,8,["label","onClick"])]),_:2},1032,["props"]),(0,a.bF)(r,null,{default:(0,a.k6)(()=>[(0,a.bF)(l,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"xs",label:"Copy",onClick:t=>A(e.value),"no-caps":""},null,8,["onClick"]),(0,a.bF)(l,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"negative",size:"xs",label:"Delete",onClick:t=>R(e.value),"no-caps":""},null,8,["onClick"])]),_:2},1024)]),_:1},8,["rows"])]),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",od,[t[14]||(t[14]=(0,a.eW)(" click to add a new layout   ")),(0,a.bF)(l,{color:"positive",label:"Add",onClick:t[2]||(t[2]=e=>E())})])]),_:1})]),_:1,__:[15]}),(0,a.bF)(N,{flat:"",inline:"",class:"q-pa-xs",style:{width:"380px"}},{default:(0,a.k6)(()=>[(0,a.bF)(h,{class:"q-pa-xs",style:{height:"450px"}},{default:(0,a.k6)(()=>[(0,a.bF)(h,null,{default:(0,a.k6)(()=>[t[16]||(t[16]=(0,a.Lk)("div",{class:"text-h6"}," Selected layout ",-1)),(0,a.Lk)("div",sd,(0,o.v_)(d.value),1)]),_:1,__:[16]}),(0,a.bF)(h,{style:{width:"350px",height:"300px"}},{default:(0,a.k6)(()=>[t[18]||(t[18]=(0,a.Lk)("div",{class:"text-h6"}," Connection details ",-1)),(0,a.bF)(N,{flat:"",style:{height:"100px"}},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(f.value,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t},(0,o.v_)(f.value[t]),1))),128))]),_:1}),t[19]||(t[19]=(0,a.Lk)("div",{class:"text-body"},[(0,a.eW)(" The default 'Auto' setting will connect to the first CANUSB or CANUSB4 it finds"),(0,a.Lk)("br"),(0,a.eW)(" Please click INFO for details on the other options"),(0,a.Lk)("br")],-1)),t[20]||(t[20]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",id,[(0,a.bF)(l,{color:"positive",label:"Edit",onClick:t[3]||(t[3]=e=>L())}),t[17]||(t[17]=(0,a.eW)("   Edit connection details "))])]),_:1,__:[18,19,20]})]),_:1}),(0,a.bF)(h,{class:"q-pa-xs"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{align:"center"},{default:(0,a.k6)(()=>[b.value?((0,a.uX)(),(0,a.Wv)(l,{key:0,color:"primary",label:"Proceed",onClick:t[4]||(t[4]=e=>B())})):(0,a.Q3)("",!0),b.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(l,{key:1,disabled:"",color:"primary",label:"Proceed",onClick:t[5]||(t[5]=e=>B())}))]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,n.R1)(zi),{modelValue:c.value,"onUpdate:modelValue":t[7]||(t[7]=e=>c.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(ed),{modelValue:m.value,"onUpdate:modelValue":t[8]||(t[8]=e=>m.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(ad),{modelValue:v.value,"onUpdate:modelValue":t[9]||(t[9]=e=>v.value=e)},null,8,["modelValue"]),(0,a.bF)(q,{modelValue:y.value,"onUpdate:modelValue":t[12]||(t[12]=e=>y.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(N,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(h,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",dd,"copy layout: "+(0,o.v_)(g.value),1)]),_:1}),(0,a.bF)(h,null,{default:(0,a.k6)(()=>t[21]||(t[21]=[(0,a.Lk)("div",null,"enter name for the new copy, followed by <enter>",-1)])),_:1,__:[21]}),(0,a.bF)(h,{class:"q-pt-none"},{default:(0,a.k6)(()=>[(0,a.bF)(F,{dense:"",modelValue:_.value,"onUpdate:modelValue":t[10]||(t[10]=e=>_.value=e),autofocus:"",onKeyup:t[11]||(t[11]=(0,ht.jR)(e=>Q(g.value,_.value),["enter"]))},null,8,["modelValue"])]),_:1}),(0,a.bF)(x,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",label:"Close"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},cd=ud,md=cd;L()(ud,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QSpace:Ie.A,QCardSection:A.A,QTable:wt.A,QTd:Ft.A,QCardActions:et.A,QInput:oe.A}),L()(ud,"directives",{ClosePopup:ut.A});var vd=l(8652);const bd="SystemDialog",pd={__name:"SystemDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=e,i=t,r=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(r,()=>{console.log(bd+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const u=()=>{(0,vd.A)(l.state.serverStatus.appStorageDirectory).then(()=>{}).catch(()=>{})},c=()=>{(0,vd.A)(l.state.serverStatus.systemDirectory).then(()=>{}).catch(()=>{})},m=()=>{(0,vd.A)(l.state.serverStatus.currentUserDirectory).then(()=>{}).catch(()=>{})};return(e,t)=>{const s=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),v=(0,a.g2)("q-card"),b=(0,a.g2)("q-input"),p=(0,a.g2)("q-checkbox"),g=(0,a.g2)("q-card-actions"),f=(0,a.g2)("q-dialog"),y=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(f,{modelValue:r.value,"onUpdate:modelValue":t[6]||(t[6]=e=>r.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(v,{style:{"min-width":"900px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[y]])]),default:(0,a.k6)(()=>[t[7]||(t[7]=(0,a.Lk)("div",{class:"text-h6"}," System ",-1))]),_:1,__:[7]}),(0,a.bF)(v,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)(()=>[t[8]||(t[8]=(0,a.Lk)("div",{class:"text-h6"},"Backend",-1)),(0,a.Lk)("div",null,"Backend App version "+(0,o.v_)(JSON.stringify((0,n.R1)(l).state.version.App)),1),(0,a.Lk)("div",null,"API version "+(0,o.v_)(JSON.stringify((0,n.R1)(l).state.version.API)),1),(0,a.Lk)("div",null,"node version "+(0,o.v_)(JSON.stringify((0,n.R1)(l).state.version.node)),1)]),_:1,__:[8]}),(0,a.bF)(v,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)(()=>[t[9]||(t[9]=(0,a.Lk)("div",{class:"text-h6"},"Frontend",-1)),(0,a.Lk)("div",null,"Frontend App version "+(0,o.v_)((0,n.R1)(d).version),1),(0,a.Lk)("div",null,"Quasar framework "+(0,o.v_)(e.$q.version),1),(0,a.Lk)("div",null,"Vue version "+(0,o.v_)(a.rE))]),_:1,__:[9]}),(0,a.bF)(v,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)(()=>t[10]||(t[10]=[(0,a.Lk)("a",{href:"https://github.com/david284/MMC-SERVER"},"MMC-SERVER github repository",-1)])),_:1,__:[10]}),(0,a.bF)(v,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)(()=>[(0,a.Lk)("div",null,[t[11]||(t[11]=(0,a.Lk)("span",{class:"text-h6"},"app storage directory  ",-1)),(0,a.eW)(" "+(0,o.v_)((0,n.R1)(l).state.serverStatus.appStorageDirectory)+"   ",1),(0,a.bF)(s,{dense:"",color:"primary",size:"xs",label:"copy",onClick:t[0]||(t[0]=e=>u()),"no-caps":""})]),(0,a.Lk)("div",null,[t[12]||(t[12]=(0,a.Lk)("span",{class:"text-h6"},"current user directory  ",-1)),(0,a.eW)(" "+(0,o.v_)((0,n.R1)(l).state.serverStatus.currentUserDirectory)+"   ",1),(0,a.bF)(s,{dense:"",color:"primary",size:"xs",label:"copy",onClick:t[1]||(t[1]=e=>m()),"no-caps":""})]),(0,a.Lk)("div",null,[t[13]||(t[13]=(0,a.Lk)("span",{class:"text-h6"},"system directory  ",-1)),(0,a.eW)(" "+(0,o.v_)((0,n.R1)(l).state.serverStatus.systemDirectory)+"   ",1),(0,a.bF)(s,{dense:"",color:"primary",size:"xs",label:"copy",onClick:t[2]||(t[2]=e=>c()),"no-caps":""})])]),_:1}),(0,a.bo)((0,a.bF)(v,{class:"q-pa-md",flat:""},{default:(0,a.k6)(()=>[(0,a.bF)(b,{label:"Base Node Number",outlined:"",modelValue:(0,n.R1)(l).state.layout.layoutDetails.baseNodeNumber,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,n.R1)(l).state.layout.layoutDetails.baseNodeNumber=e),onChange:t[4]||(t[4]=e=>(0,n.R1)(l).methods.update_layout())},null,8,["modelValue"])]),_:1},512),[[ht.aG,(0,n.R1)(l).state.advanced]]),(0,a.bF)(v,{class:"q-pa-md",flat:""},{default:(0,a.k6)(()=>[(0,a.bF)(p,{modelValue:(0,n.R1)(l).state.develop,"onUpdate:modelValue":t[5]||(t[5]=e=>(0,n.R1)(l).state.develop=e),label:"Develop"},null,8,["modelValue"]),t[14]||(t[14]=(0,a.eW)("    Enables development features "))]),_:1,__:[14]}),(0,a.bF)(g,{align:"right",class:"text-primary"})]),_:1})]),_:1},8,["modelValue"])}}},gd=pd,fd=gd;L()(pd,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QInput:oe.A,QCheckbox:Q.A,QCardActions:et.A}),L()(pd,"directives",{ClosePopup:ut.A});const yd={key:0,class:"text-red"},_d="DialogExampleCompositionAPI",hd={__name:"DialogExampleCompositionAPI",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=(0,n.KR)(!1),o=e,s=t,i=(0,a.EW)({get(){return o.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,()=>{console.log(_d+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const d=()=>{l.value=!l.value};return(e,t)=>{const n=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card"),u=(0,a.g2)("q-card-actions"),c=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(c,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e)},{default:(0,a.k6)(()=>[(0,a.bF)(r,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(n,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])]),default:(0,a.k6)(()=>[t[2]||(t[2]=(0,a.Lk)("div",{class:"text-h6"}," Example banner ",-1))]),_:1,__:[2]})]),_:1}),(0,a.bF)(r,null,{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"max-height":"50vh"},class:"scroll q-py-none no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(r,null,{default:(0,a.k6)(()=>[(0,a.bF)(n,{flat:"",color:"positive",label:"example button"}),(0,a.bF)(n,{flat:"",color:"negative",label:"example button"})]),_:1}),((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(5,e=>(0,a.Lk)("p",{key:e},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore.")),64)),l.value?((0,a.uX)(),(0,a.CE)("div",yd,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(5,e=>(0,a.Lk)("p",{key:e},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore.")),64))])):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(s,{class:"q-py-none no-margin"},{default:(0,a.k6)(()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text-h6"}," Example q-card ",-1)])),_:1,__:[3]})]),_:1}),(0,a.bF)(u,{align:"right",class:"text-primary q-py-none no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{flat:"",label:"toggle show more",onClick:t[0]||(t[0]=e=>d())})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},kd=hd,Nd=kd;L()(hd,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A,QCardActions:et.A}),L()(hd,"directives",{ClosePopup:ut.A});const xd={__name:"EventsViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,n=t,o=(0,a.EW)({get(){return l.modelValue},set(e){n("update:modelValue",e)}});return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])]),default:(0,a.k6)(()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Events View ",-1))]),_:1,__:[1]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[2]||(t[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Events view is intended to allow management of all the events on the layout ",-1),(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," There are some significant differences to how this view works compared to the 'Bus Events View' ",-1)])),_:1,__:[2]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text_body1"}," The Events view shows events that have been read from nodes, captured from the CAN Bus, or entered manually ",-1)])),_:1,__:[3]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[4]||(t[4]=[(0,a.Lk)("div",{class:"text_body1"}," This list of events is retained for the layout selected, so the known events for a particular layout will be restored at startup ",-1)])),_:1,__:[4]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[5]||(t[5]=[(0,a.Lk)("div",{class:"text_body1"}," For a new layout, use SCAN NODES to read the stored events from all the nodes to fill the list, and anytime a new node is added ",-1)])),_:1,__:[5]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[6]||(t[6]=[(0,a.Lk)("div",{class:"text_body1"}," There is only one entry for each event, irrespective of how many nodes produce that event ",-1)])),_:1,__:[6]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[7]||(t[7]=[(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status for each event will be the most recent instance of that event, captured from the CAN Bus, irrespective of which node sent it ",-1),(0,a.Lk)("div",{class:"text_body1"},[(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status is dependant on the event actually being captured from the bus, and if that event has not been sent, or the application has been restarted, the status will be 'unknown' ")],-1)])),_:1,__:[7]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[8]||(t[8]=[(0,a.Lk)("div",{class:"text_body1"}," In this view, for short events, the 'send ON/OFF' feature will use '0' as the Sending Node Number, so not linked to any particular node ",-1)])),_:1,__:[8]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[9]||(t[9]=[(0,a.Lk)("div",{class:"text_body1"}," An event can be created manually (add event) and will not be associated with any particular node until the 'teach' option is used ",-1)])),_:1,__:[9]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[10]||(t[10]=[(0,a.Lk)("div",{class:"text_body1"}," The toggle option allows viewing of just short events, or all events ",-1)])),_:1,__:[10]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[11]||(t[11]=[(0,a.Lk)("div",{class:"text_body1"}," The list is likely to be very large, as some nodes have large numbers of default events ",-1),(0,a.Lk)("div",{class:"text_body1"}," So it's recommended to use the search option to filter the list, and using group names for events ",-1)])),_:1,__:[11]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[12]||(t[12]=[(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1)])),_:1,__:[12]})]),_:1})]),_:1},8,["modelValue"])}}},wd=xd,qd=wd;L()(xd,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A}),L()(xd,"directives",{ClosePopup:ut.A});const Fd="GenericNodeList",Vd={__name:"GenericNodeList",props:{nodeNumberList:{type:Object,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const t=(0,s.A)(),l=(0,a.WQ)("store"),i=(0,n.KR)(!1),d=(0,n.KR)(0),u=(0,n.KR)(!1),c=(0,n.KR)(""),m=(0,n.KR)(""),v=e,b=(0,n.KR)([]),p=[{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Node Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name",align:"left",sortable:!0},{name:"group",field:"group",required:!0,label:"Node Group",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!0}],g=async()=>{b.value=[],v.nodeNumberList.forEach(e=>{var t=l.getters.node_name(e);b.value.push({nodeNumber:e,name:t,group:l.getters.node_group(e),editVariables:!l.getters.node_useEventIndex(e),allowDelete:!l.getters.node_useEventIndex(e)})})},f=async e=>{if((0,C.g)(l,e));else{m.value="",c.value="Loading Node Parameters",u.value=!0,l.methods.request_all_node_parameters(e,20,100);let t=Date.now();while(Date.now()-t<6e4){if(m.value.length>0)break;await(0,r.yy)(100)}u.value=!1}},y=async e=>{var t=l.state.nodes[e].parameters[6];if(void 0!=l.state.nodes[e].nodeVariables[t]);else{m.value="",c.value="Loading Node Variables",l.methods.request_all_node_variables(e),u.value=!0;for(let e=0;e<1e4;e++){if(m.value.length>0)break;await(0,r.yy)(10)}u.value=!1}};(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(()=>{g()});const _=e=>{(0,r.Qn)(Fd+": clickDelete");t.notify({message:"Are you sure you want to delete event "+l.getters.event_name(v.eventIdentifier)+" from node "+l.getters.node_name(e),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{(0,r.Qn)("removeEvent "+e+" "+v.eventIdentifier),l.methods.remove_event(e,v.eventIdentifier)}},{label:"NO",color:"white",handler:()=>{}}]})},h=async e=>{(0,r.Qn)(Fd+": clickVariables: node "+e+" eventIdentifer "+v.eventIdentifier),d.value=e,await f(e),await y(e),await l.methods.request_event_variables_by_identifier(e,v.eventIdentifier),i.value=!0};return(t,l)=>{const s=(0,a.g2)("q-td"),r=(0,a.g2)("q-btn"),v=(0,a.g2)("q-tr"),g=(0,a.g2)("q-table"),f=(0,a.g2)("q-card-section"),y=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(y,{style:{"max-height":"70vh"},class:"scroll q-ma-md"},{default:(0,a.k6)(()=>[(0,a.bF)(f,{class:"no-margin q-py-none-xs",style:{width:"750px"}},{default:(0,a.k6)(()=>[(0,a.bF)(g,{flat:"",bordered:"",dense:"",rows:b.value,columns:p,"row-key":"nodeNumber","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)(e=>[(0,a.bF)(v,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{key:"nodeNumber",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.nodeNumber),1)]),_:2},1032,["props"]),(0,a.bF)(s,{key:"name",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.name),1)]),_:2},1032,["props"]),(0,a.bF)(s,{key:"group",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.group),1)]),_:2},1032,["props"]),(0,a.bF)(s,{key:"actions",props:e},{default:(0,a.k6)(()=>[e.row.editVariables?((0,a.uX)(),(0,a.Wv)(r,{key:0,dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Variables",onClick:t=>h(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])):(0,a.Q3)("",!0),e.row.allowDelete?((0,a.uX)(),(0,a.Wv)(r,{key:1,dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:t=>_(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])):(0,a.Q3)("",!0)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1}),(0,a.bF)((0,n.R1)(sl),{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),nodeNumber:d.value,eventIdentifier:e.eventIdentifier},null,8,["modelValue","nodeNumber","eventIdentifier"]),(0,a.bF)((0,n.R1)(mt),{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=e=>u.value=e),callingModule:"Node List",message:c.value,onWaitingOnBusTrafficDialogEvent:l[2]||(l[2]=e=>m.value=e)},null,8,["modelValue","message"])],64)}}},Cd=Vd,Id=Cd;L()(Vd,"components",{QCard:K.A,QCardSection:A.A,QTable:wt.A,QTr:qt.A,QTd:Ft.A,QBtn:Ce.A});const Ed={class:"text-h6"},Ad="LinkedNodesDialog",Qd={__name:"LinkedNodesDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),s=e,i=t,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(d,()=>{});const r=(0,n.KR)([]),u=(0,a.EW)(()=>l.state.nodes.updateTimestamp);(0,a.wB)(u,()=>{s.eventIdentifier&&c()});const c=async()=>{try{r.value=[];let e=Object.values(l.state.nodes);e.forEach(e=>{if(e.storedEventsNI&&Object.values(e.storedEventsNI).length>0){let t=Object.values(e.storedEventsNI);t.forEach(async t=>{t.eventIdentifier==s.eventIdentifier&&r.value.push(parseInt(e.nodeNumber))})}})}catch(e){console.log(Ad+": update__nodes_table "+e)}};return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(()=>{s.eventIdentifier&&c()}),(t,i)=>{const u=(0,a.g2)("q-btn"),c=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-card"),b=(0,a.g2)("q-dialog"),p=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(b,{modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=e=>d.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(v,{class:"q-pa-none q-ma-none",style:{"min-width":"850px"}},{default:(0,a.k6)(()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(u,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[p]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Ed," Nodes linked to event: "+(0,o.v_)((0,n.R1)(l).getters.event_name(s.eventIdentifier)),1)]),_:1})]),_:1}),(0,a.bF)(v,null,{default:(0,a.k6)(()=>[(0,a.bF)((0,n.R1)(Id),{nodeNumberList:r.value,eventIdentifier:e.eventIdentifier},null,8,["nodeNumberList","eventIdentifier"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Rd=Qd,Ld=Rd;L()(Qd,"components",{QDialog:dt.A,QCard:K.A,QCardSection:A.A,QBanner:ft.A,QBtn:Ce.A}),L()(Qd,"directives",{ClosePopup:ut.A});const Sd={class:"text-h6",style:{"min-width":"250px"}},Wd="EventsView",Bd={__name:"EventsView",setup(e){const t=(0,s.A)(),l=(0,a.WQ)("store"),i=(0,n.KR)(""),d={rowsPerPage:0};let u=(0,n.KR)([]);const c=(0,n.KR)(!1),m=(0,n.KR)(!1),v=(0,n.KR)(!1),b=(0,n.KR)(!1),p=(0,n.KR)(!1),g=(0,n.KR)(!1),f=(0,n.KR)(""),y=(0,n.KR)(),_=(0,n.KR)(0),h=(0,n.KR)(0),k=((0,n.KR)(!1),(0,n.KR)([])),N=[{name:"eventName",field:"name",required:!0,label:"Event Name",align:"left",sortable:!0},{name:"eventGroup",field:"eventGroup",label:"Group",align:"left",sortable:!0},{name:"eventIdentifier",field:"eventIdentifier",label:"Event Identifier",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event Node Number",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event Number",align:"left",sortable:!0},{name:"type",field:"type",required:!0,label:"Type",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"linkedNodes",field:"linkedNodes",required:!0,label:"Linked Nodes",align:"left",sortable:!1},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],x=(0,a.EW)(()=>l.state.layout.updateTimestamp);(0,a.wB)(x,()=>{F()});const w=(0,a.EW)(()=>l.state.nodes.updateTimestamp);(0,a.wB)(w,()=>{F()});const q=(0,a.EW)(()=>Object.values(l.state.busEvents));(0,a.wB)(q,()=>{F()});const F=()=>{let e=[],t=l.state.layout.eventDetails;for(let n of Object.keys(t).sort())if(8==n.length){var a=parseInt(n.substring(0,4),16);if(void 0==l.state.event_view_status[n]&&(l.state.event_view_status[n]="unknown"),"short"==l.state.events_view_mode&&a>0||"long"==l.state.events_view_mode&&0==a||"named"==l.state.events_view_mode&&""==t[n].name);else{let o={};o["eventIdentifier"]=n,o["nodeNumber"]=a,o["eventNumber"]=parseInt(n.slice(4,8),16),o["type"]=0==a?"short":"long",o["name"]=l.getters.event_name(n),o["colour"]=t[n].colour,o["eventGroup"]=t[n].group,o["status"]=l.state.event_view_status[n],o["linkedNodeCount"]=C(n),e.push(o)}}u.value=e},V=e=>e in l.state.layout.eventDetails?l.state.layout.eventDetails[e].colour:"blue",C=e=>{var t=0;let a=Object.keys(l.state.nodes);try{a.forEach(a=>{e in l.state.nodes[a].storedEventsNI&&t++})}catch{}return t};l.eventBus.on("BUS_TRAFFIC_EVENT",e=>{r.Qn(Wd+": BUS_TRAFFIC_EVENT : opcode "+e.json.opCode);var t=e.json.eventIdentifier,a=e.json.opCode,n="unknown";"90"!=a&&"98"!=a&&"B0"!=a&&"B8"!=a&&"D0"!=a&&"D8"!=a&&"F0"!=a&&"F8"!=a||(r.Qn(Wd+": BUS_TRAFFIC_EVENT : ON event "+t),n="on"),"91"!=a&&"99"!=a&&"B1"!=a&&"B9"!=a&&"D1"!=a&&"D9"!=a&&"F1"!=a&&"F9"!=a||(r.Qn(Wd+": BUS_TRAFFIC_EVENT : OFF event "+t),n="off"),"unknown"!=n&&(void 0!=l.state.event_view_status[t]&&(l.state.event_view_status[t]=n),F())}),(0,a.KC)(()=>{F(),I()});const I=()=>{void 0==l.state.layout.settings&&(l.state.layout["settings"]={EventsByNodeView:{}}),void 0==l.state.layout.settings.EventsByNodeView&&(l.state.layout.settings["EventsByNodeView"]={}),void 0==l.state.layout.settings.enableEventIdentifier&&(l.state.layout.settings["enableEventIdentifier"]=!0,l.state.update_layout_needed=!0),void 0==l.state.layout.settings.EventsByNodeView.enableEventIndex&&(l.state.layout.settings.EventsByNodeView["enableEventIndex"]=!0,l.state.update_layout_needed=!0),void 0==l.state.layout.settings.enableEventGroup&&(l.state.layout.settings["enableEventGroup"]=!0,l.state.update_layout_needed=!0),r.rL(k.value,"eventIdentifier",l.state.layout.settings.enableEventIdentifier),r.rL(k.value,"eventIndex",l.state.layout.settings.EventsByNodeView.enableEventIndex),r.rL(k.value,"eventGroup",l.state.layout.settings.enableEventGroup)};l.eventBus.on("LAYOUT_DATA",()=>{I()});const E=()=>{r.Qn(Wd+": clickAddEvent"),c.value=!0},A=e=>{r.Qn(Wd+": clickDelete");t.notify({message:"Are you sure you want to delete event "+l.getters.event_name(e),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{delete l.state.layout.eventDetails[e],l.state.update_layout_needed=!0,F()}},{label:"NO",color:"white",handler:()=>{}}]})},Q=e=>{r.Qn(Wd+": clickDeleteUnused");t.notify({message:"Continue with delete?",caption:"To be deleted, events must have no linked nodes and also no user provided name",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{let e=l.state.layout.eventDetails,t=0;for(let a of Object.keys(e).sort()){parseInt(a.substring(0,4),16);0==l.state.layout.eventDetails[a].name.length&&0==C(a)&&(r.Qn(Wd+`: ${a} ${l.getters.event_name(a)}`),t++,delete l.state.layout.eventDetails[a],l.state.update_layout_needed=!0)}r.Qn(Wd+`: events deleted ${t}`),F()}},{label:"NO",color:"white",handler:()=>{}}]})},R=()=>{r.Qn(Wd+`: click_enableEventIdentifier ${l.state.layout.settings.enableEventIdentifier}`),r.rL(k.value,"eventIdentifier",l.state.layout.settings.enableEventIdentifier),l.state.update_layout_needed=!0},L=()=>{r.Qn(Wd+`: click_enableEventGroup ${l.state.layout.settings.enableEventGroup}`),r.rL(k.value,"eventGroup",l.state.layout.settings.enableEventGroup),l.state.update_layout_needed=!0},S=e=>{r.Qn(Wd+": clickEventName "+e),f.value=e,y.value=l.getters.event_name(e),m.value=!0},W=()=>{r.Qn(Wd+": clickInfo"),p.value=!0},B=e=>{r.Qn(Wd+": clickLinkedNodes "+e),f.value=e,g.value=!0},T=()=>{r.Qn(Wd+": clickScanNodes");var e=Object.keys(l.state.nodes);e.forEach(e=>{EventFunctions.requestAllNodeEvents(e)})},D=(e,t)=>{r.Qn(Wd+": send OFF "+e+" "+t);var a=parseInt(t.slice(0,4),16),n=parseInt(t.slice(4,8),16);0==a?l.methods.short_off_event(e,n):l.methods.long_off_event(a,n)},K=(e,t)=>{r.Qn(Wd+": send ON "+e+" "+t);var a=parseInt(t.slice(0,4),16),n=parseInt(t.slice(4,8),16);0==a?l.methods.short_on_event(e,n):l.methods.long_on_event(a,n)},U=e=>{r.Qn(Wd+": clickTeach "+e),f.value=e,b.value=!0},O=()=>{switch(r.Qn(Wd+": clickToggleViewMode"),l.state.events_view_mode){case"all":l.state.events_view_mode="short";break;case"short":l.state.events_view_mode="long";break;case"long":l.state.events_view_mode="named";break;case"named":l.state.events_view_mode="all";break;default:l.state.events_view_mode="all"}F()};return(e,t)=>{const s=(0,a.g2)("q-btn"),r=(0,a.g2)("q-space"),y=(0,a.g2)("q-icon"),x=(0,a.g2)("q-input"),w=(0,a.g2)("q-checkbox"),q=(0,a.g2)("q-item"),F=(0,a.g2)("q-list"),C=(0,a.g2)("q-menu"),I=(0,a.g2)("q-banner"),X=(0,a.g2)("q-td"),M=(0,a.g2)("q-chip"),z=(0,a.g2)("q-tr"),P=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",null,[(0,a.bF)(I,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Toggle","no-caps":"",onClick:t[0]||(t[0]=e=>O())}),(0,a.Lk)("div",Sd,"view "+(0,o.v_)((0,n.R1)(l).state.events_view_mode)+" events",1),t[15]||(t[15]=(0,a.eW)("      ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:t[1]||(t[1]=e=>W())}),(0,a.bF)(r),t[16]||(t[16]=(0,a.eW)("      ")),(0,a.bF)(x,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),placeholder:"Search"},{default:(0,a.k6)(()=>[(0,a.bF)(y,{size:"sm",name:"search"})]),_:1},8,["modelValue"]),t[17]||(t[17]=(0,a.eW)("      ")),(0,a.bF)(r),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Delete Unused",onClick:t[3]||(t[3]=e=>Q())}),(0,a.bF)(r),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"SCAN NODES","no-caps":"",onClick:t[4]||(t[4]=e=>T())}),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Add Event",onClick:t[5]||(t[5]=e=>E())}),(0,a.bF)(s,{square:"",unelevated:"",color:"primary",icon:"settings"},{default:(0,a.k6)(()=>[(0,a.bF)(C,{"auto-close":""},{default:(0,a.k6)(()=>[(0,a.bF)(F,{style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(q,null,{default:(0,a.k6)(()=>[(0,a.bF)(w,{class:"no-margin no-padding",modelValue:(0,n.R1)(l).state.layout.settings.enableEventIdentifier,"onUpdate:modelValue":t[6]||(t[6]=e=>(0,n.R1)(l).state.layout.settings.enableEventIdentifier=e),onClick:R,label:"show Event Identifier column"},null,8,["modelValue"])]),_:1}),(0,a.bF)(q,null,{default:(0,a.k6)(()=>[(0,a.bF)(w,{class:"no-margin no-padding",modelValue:(0,n.R1)(l).state.layout.settings.enableEventGroup,"onUpdate:modelValue":t[7]||(t[7]=e=>(0,n.R1)(l).state.layout.settings.enableEventGroup=e),onClick:L,label:"show Group column"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),default:(0,a.k6)(()=>[t[18]||(t[18]=(0,a.Lk)("div",{class:"text-h6"},"Events View",-1))]),_:1,__:[18]}),(0,a.Lk)("div",null,[(0,a.bF)(P,{class:"eventsView-table",bordered:"",dense:"",rows:(0,n.R1)(u),columns:N,filter:i.value,"row-key":"eventIdentifier","virtual-scroll":"",pagnation:d,"onUpdate:pagnation":t[8]||(t[8]=e=>d=e),"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"visible-columns":k.value,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(z,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(X,{key:"eventName",props:e,class:(0,o.C4)("text-"+V(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.name),1)]),_:2},1032,["props","class"]),(0,a.bF)(X,{key:"eventGroup",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventGroup),1)]),_:2},1032,["props"]),(0,a.bF)(X,{key:"eventIdentifier",props:e,class:(0,o.C4)("text-"+V(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventIdentifier),1)]),_:2},1032,["props","class"]),(0,a.bF)(X,{key:"nodeNumber",props:e,class:(0,o.C4)("text-"+V(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.nodeNumber),1)]),_:2},1032,["props","class"]),(0,a.bF)(X,{key:"eventNumber",props:e,class:(0,o.C4)("text-"+V(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventNumber),1)]),_:2},1032,["props","class"]),(0,a.bF)(X,{key:"type",props:e,class:(0,o.C4)("text-"+V(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.type),1)]),_:2},1032,["props","class"]),(0,a.bF)(X,{key:"status",props:e},{default:(0,a.k6)(()=>["on"==e.row.status?((0,a.uX)(),(0,a.Wv)(M,{key:0,color:"white","text-color":"green"},{default:(0,a.k6)(()=>t[19]||(t[19]=[(0,a.eW)("ON")])),_:1,__:[19]})):"off"==e.row.status?((0,a.uX)(),(0,a.Wv)(M,{key:1,color:"white","text-color":"red"},{default:(0,a.k6)(()=>t[20]||(t[20]=[(0,a.eW)("OFF")])),_:1,__:[20]})):((0,a.uX)(),(0,a.Wv)(M,{key:2,color:"white","text-color":"blue"},{default:(0,a.k6)(()=>t[21]||(t[21]=[(0,a.eW)("unknown")])),_:1,__:[21]}))]),_:2},1032,["props"]),(0,a.bF)(X,{key:"linkedNodes",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.linkedNodeCount)+" ",1),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"sm",label:"view",onClick:t=>B(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])]),_:2},1032,["props"]),(0,a.bF)(X,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:t=>S(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:t=>U(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>K(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>t[22]||(t[22]=[(0,a.eW)("send ON")])),_:2,__:[22]},1032,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>D(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>t[23]||(t[23]=[(0,a.eW)("send OFF")])),_:2,__:[23]},1032,["onClick"]),(0,a.bF)(s,{disabled:0!=e.row.linkedNodeCount,dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:t=>A(e.row.eventIdentifier),"no-caps":""},null,8,["disabled","onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter","visible-columns"])])]),(0,a.bF)((0,n.R1)(Fl),{modelValue:c.value,"onUpdate:modelValue":t[9]||(t[9]=e=>c.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)($l),{modelValue:m.value,"onUpdate:modelValue":t[10]||(t[10]=e=>m.value=e),eventIdentifier:f.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,n.R1)(Ol),{modelValue:b.value,"onUpdate:modelValue":t[11]||(t[11]=e=>b.value=e),eventIdentifier:f.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,n.R1)(Ld),{modelValue:g.value,"onUpdate:modelValue":t[12]||(t[12]=e=>g.value=e),eventIdentifier:f.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,n.R1)(ta),{modelValue:v.value,"onUpdate:modelValue":t[13]||(t[13]=e=>v.value=e),sendingNodeNumber:_.value,eventNumber:h.value,eventIdentifier:f.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,n.R1)(qd),{modelValue:p.value,"onUpdate:modelValue":t[14]||(t[14]=e=>p.value=e)},null,8,["modelValue"])],64)}}},Td=(0,J.A)(Bd,[["__scopeId","data-v-501feede"]]),Dd=Td;L()(Bd,"components",{QBanner:ft.A,QBtn:Ce.A,QSpace:Ie.A,QInput:oe.A,QIcon:ia.A,QMenu:da.A,QList:ra.A,QItem:ua.A,QCheckbox:Q.A,QTable:wt.A,QTr:qt.A,QTd:Ft.A,QChip:Pt.A,QCardActions:et.A,QCardSection:A.A,QField:se.A});const Kd={__name:"BusEventsViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){(0,a.WQ)("store");const l=e,n=t,o=(0,a.EW)({get(){return l.modelValue},set(e){n("update:modelValue",e)}});return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])]),default:(0,a.k6)(()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Bus Events View ",-1))]),_:1,__:[1]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[2]||(t[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Bus Events view is intended to show the event activity on the CAN Bus from the start of the application ",-1),(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," There are some significant differences to how this view works compared to the 'Events View' ",-1)])),_:1,__:[2]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[3]||(t[3]=[(0,a.Lk)("div",{class:"text_body1"}," Events read from node will not appear in this view until they have been sent by a node & captured from the CAN Bus ",-1)])),_:1,__:[3]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[4]||(t[4]=[(0,a.Lk)("div",{class:"text_body1"}," For some nodes, default events can't be read from the node (as some do not treat them as 'stored events') ",-1),(0,a.Lk)("div",{class:"text_body1"}," But these default events will appear in this view once they've been sent ",-1)])),_:1,__:[4]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[5]||(t[5]=[(0,a.Lk)("div",{class:"text_body1"}," This view takes account of the source node, so if the same event has been sent by two different nodes, there will be two entries for that event ",-1),(0,a.Lk)("div",{class:"text_body1"}," This is intended to make it easy to see which nodes are sending which events ",-1)])),_:1,__:[5]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[6]||(t[6]=[(0,a.Lk)("div",{class:"text_body1"}," In this view, the 'send ON/OFF' feature will use the Source Node Number of the row selected, thus replicating the event from that specific node ",-1)])),_:1,__:[6]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[7]||(t[7]=[(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status for each event will be the most recent instance of that event, captured from the CAN Bus, from that particular sending node ",-1)])),_:1,__:[7]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[8]||(t[8]=[(0,a.Lk)("div",{class:"text_body1"}," The Bus Events view will be empty at startup, and can also be cleared, to only show events from that point onwards ",-1)])),_:1,__:[8]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>t[9]||(t[9]=[(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1)])),_:1,__:[9]})]),_:1})]),_:1},8,["modelValue"])}}},Ud=Kd,Od=Ud;L()(Kd,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A}),L()(Kd,"directives",{ClosePopup:ut.A});const Xd={class:"text-h6",style:{"min-width":"250px"}},Md={class:"q-pa-xs row"},zd={class:"text-body2"},Pd="BusEventsView",$d={__name:"BusEventsView",setup(e){const t=(0,s.A)(),l=(0,a.WQ)("store"),i=((0,n.KR)("nodes"),(0,n.KR)("")),d={rowsPerPage:0};let u=(0,n.KR)();const c=(0,n.KR)(!1),m=(0,n.KR)(!1),v=(0,n.KR)(!1),b=(0,n.KR)(!1),p=(0,n.KR)(""),g=(0,n.KR)(),f=(0,n.KR)(0),y=(0,n.KR)(0),_=(0,n.KR)(!1),h=(0,n.KR)([]),k=[{name:"eventName",field:"name",required:!0,label:"Event Name",align:"left",sortable:!0},{name:"eventGroup",field:"eventGroup",label:"Group",align:"left",sortable:!0},{name:"eventIdentifier",field:"eventIdentifier",label:"Event Identifier",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Source Node Number",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event Number",align:"left",sortable:!0},{name:"type",field:"type",required:!0,label:"Type",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],N=(0,a.EW)(()=>Object.values(l.state.busEvents)),x=(0,a.EW)(()=>l.state.layout);(0,a.wB)(N,()=>{w()}),(0,a.wB)(x,()=>{w()});const w=()=>{let e=[];try{let n=l.state.busEvents;if(n)for(let o of Object.keys(n).sort(function(e,t){return n[e].eventIdentifier<n[t].eventIdentifier?-1:1})){var t=n[o].eventIdentifier,a=parseInt(n[o].eventIdentifier.slice(0,4),16);if("short"==l.state.events_view_mode&&a>0||"long"==l.state.events_view_mode&&0==a||"named"==l.state.events_view_mode&&""==l.state.layout.eventDetails[t].name.length);else{let a={};a["eventIdentifier"]=t,a["nodeNumber"]=n[o].nodeNumber,a["eventNumber"]=n[o].eventNumber,a["status"]=n[o].status,a["type"]=n[o].type,a["count"]=n[o].count,a["name"]=l.getters.event_name(t),a["colour"]=l.getters.event_colour(t),a["eventGroup"]=l.getters.event_group(t),e.push(a)}}}catch(e){r.Qn(Pd+": update_bus_events "+e)}u.value=e},q=e=>l.getters.event_colour(e);(0,a.KC)(()=>{l.methods.refresh_bus_events(),w(),F()}),(0,a.sV)(()=>{l.methods.refresh_bus_events(),w()});const F=()=>{void 0==l.state.layout.settings&&(l.state.layout["settings"]={EventsByNodeView:{}}),void 0==l.state.layout.settings.EventsByNodeView&&(l.state.layout.settings["EventsByNodeView"]={}),void 0==l.state.layout.settings.enableEventIdentifier&&(l.state.layout.settings["enableEventIdentifier"]=!0,l.state.update_layout_needed=!0),void 0==l.state.layout.settings.EventsByNodeView.enableEventIndex&&(l.state.layout.settings.EventsByNodeView["enableEventIndex"]=!0,l.state.update_layout_needed=!0),void 0==l.state.layout.settings.enableEventGroup&&(l.state.layout.settings["enableEventGroup"]=!0,l.state.update_layout_needed=!0),r.rL(h.value,"eventIdentifier",l.state.layout.settings.enableEventIdentifier),r.rL(h.value,"eventIndex",l.state.layout.settings.EventsByNodeView.enableEventIndex),r.rL(h.value,"eventGroup",l.state.layout.settings.enableEventGroup)};l.eventBus.on("LAYOUT_DATA",()=>{F()});const V=()=>{r.Qn(Pd+": clickClearAllBusEvents");t.notify({message:"Are you sure you want to clear all bus events?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{l.methods.clear_bus_events()}},{label:"NO",color:"white",handler:()=>{}}]})},C=()=>{r.Qn(Pd+`: click_enableEventIdentifier ${l.state.layout.settings.enableEventIdentifier}`),r.rL(h.value,"eventIdentifier",l.state.layout.settings.enableEventIdentifier),l.state.update_layout_needed=!0},I=()=>{r.Qn(Pd+`: click_enableEventGroup ${l.state.layout.settings.enableEventGroup}`),r.rL(h.value,"eventGroup",l.state.layout.settings.enableEventGroup),l.state.update_layout_needed=!0},E=e=>{r.Qn(Pd+": clickEventName "+e),p.value=e,g.value=l.getters.event_name(e),c.value=!0},A=()=>{r.Qn(Pd+": clickInfo"),b.value=!0},Q=(e,t)=>{r.Qn(Pd+": send OFF "+e+" "+t);var a=parseInt(t.slice(0,4),16),n=parseInt(t.slice(4,8),16);0==a?l.methods.short_off_event(e,n):l.methods.long_off_event(a,n)},R=(e,t)=>{r.Qn(Pd+": send ON "+e+" "+t);var a=parseInt(t.slice(0,4),16),n=parseInt(t.slice(4,8),16);0==a?l.methods.short_on_event(e,n):l.methods.long_on_event(a,n)},L=e=>{r.Qn(Pd+": clickTeach"),p.value=e,v.value=!0},S=()=>{r.Qn(Pd+": clickToggleShowBusEventsJSON"),_.value?_.value=!1:_.value=!0},W=()=>{switch(r.Qn(Pd+": clickToggleViewMode"),l.state.events_view_mode){case"all":l.state.events_view_mode="short";break;case"short":l.state.events_view_mode="long";break;case"long":l.state.events_view_mode="named";break;case"named":l.state.events_view_mode="all";break;default:l.state.events_view_mode="all"}w()};return(e,t)=>{const s=(0,a.g2)("q-btn"),r=(0,a.g2)("q-icon"),g=(0,a.g2)("q-input"),N=(0,a.g2)("q-checkbox"),x=(0,a.g2)("q-item"),w=(0,a.g2)("q-list"),F=(0,a.g2)("q-menu"),B=(0,a.g2)("q-banner"),T=(0,a.g2)("q-td"),D=(0,a.g2)("q-chip"),K=(0,a.g2)("q-tr"),U=(0,a.g2)("q-table"),O=(0,a.g2)("q-card-section"),X=(0,a.g2)("q-card"),M=(0,a.g2)("q-card-actions");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",null,[(0,a.bF)(B,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Toggle","no-caps":"",onClick:t[0]||(t[0]=e=>W())}),(0,a.Lk)("div",Xd,"view "+(0,o.v_)((0,n.R1)(l).state.events_view_mode)+" events",1),t[12]||(t[12]=(0,a.eW)("      ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:t[1]||(t[1]=e=>A())}),t[13]||(t[13]=(0,a.eW)("      ")),(0,a.bF)(g,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),placeholder:"Search"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{size:"sm",name:"search"})]),_:1},8,["modelValue"]),t[14]||(t[14]=(0,a.eW)("      ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"CLEAR BUS EVENTS",onClick:t[3]||(t[3]=e=>V()),"no-caps":""}),(0,a.bF)(s,{square:"",unelevated:"",color:"primary",icon:"settings"},{default:(0,a.k6)(()=>[(0,a.bF)(F,{"auto-close":""},{default:(0,a.k6)(()=>[(0,a.bF)(w,{style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(x,null,{default:(0,a.k6)(()=>[(0,a.bF)(N,{class:"no-margin no-padding",modelValue:(0,n.R1)(l).state.layout.settings.enableEventIdentifier,"onUpdate:modelValue":t[4]||(t[4]=e=>(0,n.R1)(l).state.layout.settings.enableEventIdentifier=e),onClick:C,label:"show Event Identifier column"},null,8,["modelValue"])]),_:1}),(0,a.bF)(x,null,{default:(0,a.k6)(()=>[(0,a.bF)(N,{class:"no-margin no-padding",modelValue:(0,n.R1)(l).state.layout.settings.enableEventGroup,"onUpdate:modelValue":t[5]||(t[5]=e=>(0,n.R1)(l).state.layout.settings.enableEventGroup=e),onClick:I,label:"show Group column"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),default:(0,a.k6)(()=>[t[15]||(t[15]=(0,a.Lk)("div",{class:"text-h6"}," Bus Events ",-1))]),_:1,__:[15]}),(0,a.bF)(X,null,{default:(0,a.k6)(()=>[(0,a.bF)(O,{class:"no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(U,{class:"bus-events-table",dense:"",rows:(0,n.R1)(u),columns:k,filter:i.value,"row-key":"eventIdentifier","virtual-scroll":"",pagnation:d,"onUpdate:pagnation":t[6]||(t[6]=e=>d=e),"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"visible-columns":h.value,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(K,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(T,{key:"eventName",props:e,class:(0,o.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.name),1)]),_:2},1032,["props","class"]),(0,a.bF)(T,{key:"eventGroup",props:e,class:(0,o.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventGroup),1)]),_:2},1032,["props","class"]),(0,a.bF)(T,{key:"eventIdentifier",props:e,class:(0,o.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventIdentifier),1)]),_:2},1032,["props","class"]),(0,a.bF)(T,{key:"nodeNumber",props:e,class:(0,o.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.nodeNumber),1)]),_:2},1032,["props","class"]),(0,a.bF)(T,{key:"eventNumber",props:e,class:(0,o.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.eventNumber),1)]),_:2},1032,["props","class"]),(0,a.bF)(T,{key:"type",props:e,class:(0,o.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.type),1)]),_:2},1032,["props","class"]),(0,a.bF)(T,{key:"status",props:e},{default:(0,a.k6)(()=>["on"==e.row.status?((0,a.uX)(),(0,a.Wv)(D,{key:0,color:"white","text-color":"green"},{default:(0,a.k6)(()=>t[16]||(t[16]=[(0,a.eW)("ON")])),_:1,__:[16]})):((0,a.uX)(),(0,a.Wv)(D,{key:1,color:"white","text-color":"red"},{default:(0,a.k6)(()=>t[17]||(t[17]=[(0,a.eW)("OFF")])),_:1,__:[17]}))]),_:2},1032,["props"]),(0,a.bF)(T,{key:"count",props:e,class:(0,o.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(e.row.count),1)]),_:2},1032,["props","class"]),(0,a.bF)(T,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:t=>E(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:t=>L(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>R(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>t[18]||(t[18]=[(0,a.eW)("send ON")])),_:2,__:[18]},1032,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:t=>Q(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>t[19]||(t[19]=[(0,a.eW)("send OFF")])),_:2,__:[19]},1032,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter","visible-columns"]),_.value?((0,a.uX)(),(0,a.Wv)(O,{key:0,class:"q-pa-sm"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Md,[t[20]||(t[20]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Bus events"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",zd,[(0,a.Lk)("pre",null,(0,o.v_)((0,n.R1)(l).state.busEvents),1)])])]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1}),(0,a.bF)(M,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{flat:"",label:"Toggle bus events json",onClick:t[7]||(t[7]=e=>S())})]),_:1})]),(0,a.bF)((0,n.R1)($l),{modelValue:c.value,"onUpdate:modelValue":t[8]||(t[8]=e=>c.value=e),eventIdentifier:p.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,n.R1)(Ol),{modelValue:v.value,"onUpdate:modelValue":t[9]||(t[9]=e=>v.value=e),eventIdentifier:p.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,n.R1)(ta),{modelValue:m.value,"onUpdate:modelValue":t[10]||(t[10]=e=>m.value=e),sendingNodeNumber:f.value,eventNumber:y.value,eventIdentifier:p.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,n.R1)(Od),{modelValue:b.value,"onUpdate:modelValue":t[11]||(t[11]=e=>b.value=e)},null,8,["modelValue"])],64)}}},Gd=(0,J.A)($d,[["__scopeId","data-v-44cab2b8"]]),jd=Gd;L()($d,"components",{QBanner:ft.A,QBtn:Ce.A,QInput:oe.A,QIcon:ia.A,QMenu:da.A,QList:ra.A,QItem:ua.A,QCheckbox:Q.A,QCard:K.A,QCardSection:A.A,QTable:wt.A,QTr:qt.A,QTd:Ft.A,QChip:Pt.A,QCardActions:et.A,QField:se.A});const Hd="SendCbusDialog",Yd={__name:"SendCbusDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,a.WQ)("store"),o=((0,s.A)(),(0,n.KR)()),i=(0,n.KR)(),d=(0,n.KR)(["0","0","0","0","0","0","0"]),u=(0,n.KR)(),c=(0,n.KR)(!1);let m;const v=e,b=t,p=(0,a.EW)({get(){return v.modelValue},set(e){b("update:modelValue",e)}});(0,a.wB)(o,()=>{console.log(Hd+": Watch opCode");try{let e=o.value.toUpperCase().split("X");m=e.length>1?parseInt(e[1],16):parseInt(e[0]),console.log(Hd+`: opcode ${m}`),m<32?i.value=0:m<64?i.value=1:m<96?i.value=2:m<128?i.value=3:m<160?i.value=4:m<192?i.value=5:m<224?i.value=6:m<=255&&(i.value=7),m>0&&(c.value=!0),console.log(Hd+`: data length ${i.value}`)}catch(e){console.log(Hd+`: Watch opCode ${e}`)}}),(0,a.$u)(()=>{});const g=()=>{console.log(Hd+": clickSend"),u.value=(0,r.xT)(m,2);for(let e=0;e<i.value;e++){let t=d.value[e].toUpperCase().split("X"),l=0;l=t.length>1?parseInt(t[1],16):parseInt(t[0]),u.value=u.value+(0,r.xT)(l,2)}u.value=":SB780N"+u.value+";",console.log(Hd+": clickSend: commandString "+u.value),l.methods.send_cbus_message(u.value)};return(e,t)=>{const l=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-input"),u=(0,a.g2)("q-card"),m=(0,a.g2)("q-card-actions"),v=(0,a.g2)("q-dialog"),b=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(v,{modelValue:p.value,"onUpdate:modelValue":t[9]||(t[9]=e=>p.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{width:"600px","min-height":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(l,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[b]])]),default:(0,a.k6)(()=>[t[10]||(t[10]=(0,a.Lk)("div",{class:"text-h6"}," Send CBUS message ",-1))]),_:1,__:[10]}),(0,a.bF)(s,null,{default:(0,a.k6)(()=>t[11]||(t[11]=[(0,a.Lk)("div",{class:"text-body"},"Enter the bytes to construct & send a CBUS/VLCB command",-1)])),_:1,__:[11]}),(0,a.bF)(u,{class:"q-pa-sm q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(s,null,{default:(0,a.k6)(()=>t[12]||(t[12]=[(0,a.Lk)("div",{class:"text-body"},"Enter either decimal numbers",-1),(0,a.Lk)("div",{class:"text-body"},"Or hexidecimal number preceeded by '0x'",-1),(0,a.Lk)("div",{class:"text-body"},"E.g. a NERD command to node 256, in hexidecimal would be",-1),(0,a.Lk)("div",{class:"text-body"},"0x57 0x01 0x00",-1)])),_:1,__:[12]}),(0,a.bF)(s,null,{default:(0,a.k6)(()=>t[13]||(t[13]=[(0,a.Lk)("div",{class:"text-body"},"enter the opcode in the first field, which will then expose further fields to complete as required by that opcode",-1)])),_:1,__:[13]}),(0,a.bF)(u,{class:"row"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{dense:"",modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),type:"text",class:"text-h6",style:{width:"50px"},autofocus:""},null,8,["modelValue"])]),_:1}),i.value>0?((0,a.uX)(),(0,a.Wv)(s,{key:0,class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{dense:"",modelValue:d.value[0],"onUpdate:modelValue":t[1]||(t[1]=e=>d.value[0]=e),type:"text",class:"text-h6",style:{width:"50px"}},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0),i.value>1?((0,a.uX)(),(0,a.Wv)(s,{key:1,class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{dense:"",modelValue:d.value[1],"onUpdate:modelValue":t[2]||(t[2]=e=>d.value[1]=e),type:"text",class:"text-h6",style:{width:"50px"}},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0),i.value>2?((0,a.uX)(),(0,a.Wv)(s,{key:2,class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{dense:"",modelValue:d.value[2],"onUpdate:modelValue":t[3]||(t[3]=e=>d.value[2]=e),type:"text",class:"text-h6",style:{width:"50px"}},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0),i.value>3?((0,a.uX)(),(0,a.Wv)(s,{key:3,class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{dense:"",modelValue:d.value[3],"onUpdate:modelValue":t[4]||(t[4]=e=>d.value[3]=e),type:"text",class:"text-h6",style:{width:"50px"}},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0),i.value>4?((0,a.uX)(),(0,a.Wv)(s,{key:4,class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{dense:"",modelValue:d.value[4],"onUpdate:modelValue":t[5]||(t[5]=e=>d.value[4]=e),type:"text",class:"text-h6",style:{width:"50px"}},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0),i.value>5?((0,a.uX)(),(0,a.Wv)(s,{key:5,class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{dense:"",modelValue:d.value[5],"onUpdate:modelValue":t[6]||(t[6]=e=>d.value[5]=e),type:"text",class:"text-h6",style:{width:"50px"}},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0),i.value>6?((0,a.uX)(),(0,a.Wv)(s,{key:6,class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{dense:"",modelValue:d.value[6],"onUpdate:modelValue":t[7]||(t[7]=e=>d.value[6]=e),type:"text",class:"text-h6",style:{width:"50px"}},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1}),(0,a.bF)(s,null,{default:(0,a.k6)(()=>[(0,a.bF)(m,{align:"right",class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(l,{disable:!c.value,color:"blue",label:"Send",onClick:t[8]||(t[8]=e=>g())},null,8,["disable"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Jd=Yd,Zd=Jd;L()(Yd,"components",{QDialog:dt.A,QCard:K.A,QBanner:ft.A,QBtn:Ce.A,QCardSection:A.A,QInput:oe.A,QCardActions:et.A}),L()(Yd,"directives",{ClosePopup:ut.A});const er={class:"text-h6 no-margin no-padding"},tr={class:"text-h6 no-margin no-padding float-right"},lr={class:"float-right"},ar={class:"float-right"},nr={class:"float-right"},or={class:"float-right"},sr={class:"text-h6 float-right"},ir={class:"text-bold text-blue"},dr={class:"text-bold"},rr="MainLayout",ur={__name:"MainLayout",setup(e){const{getVerticalScrollPosition:t,setVerticalScrollPosition:l}=i.Ay,u=(0,s.A)(),c=(0,a.WQ)("store"),m=(0,n.KR)({}),v=(0,n.KR)(!1),b=(0,n.KR)(!1),p=(0,n.KR)(!1),g=(0,n.KR)(!1),f=(0,n.KR)(!1),_=(0,n.KR)(!1),h=(0,n.KR)(!1),k=(0,n.KR)(!1),N=(0,n.KR)(!1),x=(0,n.KR)(!1),w=(0,n.KR)(0),q=(0,n.KR)(""),F=(0,n.KR)(!1),V=(0,n.KR)(!1),C=(0,n.KR)("dummyModule/index.html"),I=(0,n.KR)(null),E=(0,n.KR)("NodesView");var A=null;const Q=(0,n.KR)(!1),R=(0,n.KR)([]),L=(0,n.KR)([]),S=(0,n.KR)(!1),W=(0,n.KR)(!1),B=(0,a.EW)(()=>{var e="";try{e=c.state.layout.layoutDetails.title}catch(e){}return e});(0,a.KC)(()=>{c.methods.request_server_status(),c.methods.request_layout_list(),O()}),(0,a.sV)(()=>{setInterval(T,5e3),setInterval(D,1e3),setInterval(K,100)}),(0,a.$u)(()=>{});const T=()=>{c.methods.request_server_status()},D=()=>{1==c.state.update_layout_needed&&(c.state.update_layout_needed=!1,c.state.layout.updateTimestamp=Date.now(),c.methods.update_layout())},K=()=>{Date.now(),c.state.cbusTrafficTimeStamp},U=()=>{try{I.value.setScrollPercentage("vertical",1)}catch{}};c.eventBus.on("GENERAL_MESSAGE_EVENT",(e,t,l,a)=>{try{a>0&&a<=2e3?u.notify({message:e,caption:t,timeout:a,type:l,position:"center"}):u.notify({message:e,caption:t,timeout:a,type:l,position:"center",actions:[{label:"Dismiss"}]})}catch(e){r.Qn(rr+": MESSAGE_EVENT: "+e)}}),c.eventBus.on("REQUEST_NODE_NUMBER_EVENT",(e,t)=>{w.value=e,q.value=t,N.value=!0}),c.eventBus.on("NETWORK_CONNECTION_FAILURE",(e,t,l,a)=>{if(c.state.notification_settings.networkConnection_notify)try{u.notify({message:e,caption:t,timeout:a,type:l,position:"center",actions:[{label:"Don't remind me again",handler:()=>{c.state.notification_settings.networkConnection_notify=!1}},{label:"Dismiss"}]})}catch(e){r.Qn(rr+": NETWORK_CONNECTION_FAILURE: "+e)}}),c.eventBus.on("SERIAL_CONNECTION_FAILURE",(e,t,l,a)=>{if(c.state.notification_settings.serialConnection_notify)try{u.notify({message:e,caption:t,timeout:a,type:l,position:"center",actions:[{label:"Don't remind me again",handler:()=>{c.state.notification_settings.serialConnection_notify=!1}},{label:"Dismiss"}]})}catch(e){r.Qn(rr+": SERIAL_CONNECTION_FAILURE: "+e)}}),c.eventBus.on("SERVER_CONNECT",()=>{A&&A(),u.notify({message:"MMC-server has connected",timeout:1e3,type:"info",position:"center"})}),c.eventBus.on("SERVER_DISCONNECT",()=>{A=u.notify({message:"MMC-server has disconnected",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]})}),c.eventBus.on("LAYOUT_DATA",()=>{O()});const O=()=>{void 0==c.state.layout.settings&&(c.state.layout["settings"]={}),void 0==c.state.layout.settings.MainLayout&&(c.state.layout.settings["MainLayout"]={}),void 0==c.state.layout.settings.enableBusTraffic&&(c.state.layout.settings["enableBusTraffic"]=!0,c.state.update_layout_needed=!0),void 0==c.state.layout.settings.MainLayout.showEventsOnly&&(c.state.layout.settings.MainLayout["showEventsOnly"]=!1,c.state.update_layout_needed=!0),X()};c.eventBus.on("BUS_TRAFFIC_EVENT",e=>{R.value.push(e),R.value.length>32&&R.value.shift(),X()});const X=()=>{L.value=[];for(let e=0;e<R.value.length;e++){let t=R.value[e],l=t.json;c.state.layout.settings.MainLayout.showEventsOnly?void 0!=y(l).type&&(t["displayText"]=l.mnemonic,t["displayText"]+=" Node:"+l.nodeNumber,"LONG"==y(l).type?t["displayText"]+=" Event:"+l.eventNumber:t["displayText"]+=" Event:"+l.deviceNumber,t["displayText"]+=" "+c.state.layout.eventDetails[l.eventIdentifier].name,L.value.push(t)):(t["displayText"]=l.text,L.value.push(t))}setTimeout(U,200)},M=e=>{r.Qn(rr+": clickAllBusTraffic"),c.methods.request_log_file("bustraffic.txt"),b.value=!0},z=()=>{r.Qn(rr+": clickBusEventsView"),E.value="BusEventsView"},P=async()=>{r.Qn(rr+": clickBusTrafficSettings"),await r.yy(5e3),S.value=!1},$=()=>{r.Qn(rr+": clickCbusErrors"),p.value=!0},G=()=>{r.Qn(rr+": clickClearBusTraffic"),R.value=[],X()},j=()=>{r.Qn(rr+": click_enableBusTraffic")},H=()=>{r.Qn(rr+": clickEventView"),E.value="EventsView"},Y=()=>{r.Qn(rr+": clickExample"),F.value=!0},J=()=>{r.Qn(rr+": clickNodeView"),E.value="NodesView"},Z=()=>{r.Qn(rr+": clickExit");u.notify({message:"Are you sure you want to close the application?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{c.methods.STOP_SERVER(),await sleep(50)}},{label:"NO",color:"white",handler:()=>{}}]})},ee=()=>{r.Qn(rr+": clickExport"),g.value=!0},te=()=>{r.Qn(rr+": clickiframe"),V.value=!0},le=()=>{r.Qn(rr+": clickImport"),_.value=!0},ae=()=>{r.Qn(rr+": clickJson"),f.value=!0},ne=()=>{r.Qn(rr+": clickLogs"),h.value=!0},oe=()=>{r.Qn(rr+": clickResetSettings"),c.state.layout.settings={},c.state.update_layout_needed=!0},se=()=>{r.Qn(rr+": clickTest"),W.value=!0},ie=()=>{r.Qn(rr+": clickShowEventsOnly"),c.state.update_layout_needed=!0,X()},de=e=>{r.Qn(rr+": clickSingleBusEvent"),m.value=e,k.value=!0},re=()=>{r.Qn(rr+": clickSendCBUS"),Q.value=!0},ue=()=>{r.Qn(rr+": clickSystem"),x.value=!0};return(e,t)=>{const l=(0,a.g2)("q-item-section"),s=(0,a.g2)("q-item"),i=(0,a.g2)("q-list"),r=(0,a.g2)("q-menu"),u=(0,a.g2)("q-btn"),y=(0,a.g2)("q-toolbar-title"),A=(0,a.g2)("q-toolbar"),R=(0,a.g2)("q-space"),T=(0,a.g2)("q-checkbox"),D=(0,a.g2)("q-header"),K=(0,a.g2)("q-banner"),U=(0,a.g2)("q-item-label"),O=(0,a.g2)("q-scroll-area"),X=(0,a.g2)("q-card"),ce=(0,a.g2)("q-drawer"),me=(0,a.g2)("q-page"),ve=(0,a.g2)("q-page-container"),be=(0,a.g2)("q-layout");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(be,{view:"hHh lpR fFf"},{default:(0,a.k6)(()=>[(0,a.bF)(D,{class:"row bg-primary text-white no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(A,{class:"col no-margin no-padding",style:{"min-width":"180px"}},{default:(0,a.k6)(()=>[(0,a.bF)(u,{flat:"",dense:"",size:"md",icon:"menu",class:"no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{"auto-close":""},{default:(0,a.k6)(()=>[(0,a.bF)(i,{style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,{clickable:"",onClick:t[0]||(t[0]=e=>ee())},{default:(0,a.k6)(()=>[(0,a.bF)(l,null,{default:(0,a.k6)(()=>t[37]||(t[37]=[(0,a.eW)("Export")])),_:1,__:[37]})]),_:1}),(0,a.bF)(s,{clickable:"",onClick:t[1]||(t[1]=e=>le())},{default:(0,a.k6)(()=>[(0,a.bF)(l,null,{default:(0,a.k6)(()=>t[38]||(t[38]=[(0,a.eW)("Import")])),_:1,__:[38]})]),_:1}),(0,a.bF)(s,{clickable:"",onClick:t[2]||(t[2]=e=>ne())},{default:(0,a.k6)(()=>[(0,a.bF)(l,null,{default:(0,a.k6)(()=>t[39]||(t[39]=[(0,a.eW)("Logs")])),_:1,__:[39]})]),_:1}),(0,a.bF)(s,{clickable:"",onClick:t[3]||(t[3]=e=>ae())},{default:(0,a.k6)(()=>[(0,a.bF)(l,null,{default:(0,a.k6)(()=>t[40]||(t[40]=[(0,a.eW)("JSON")])),_:1,__:[40]})]),_:1}),(0,a.bF)(s,{clickable:"",onClick:t[4]||(t[4]=e=>$())},{default:(0,a.k6)(()=>[(0,a.bF)(l,null,{default:(0,a.k6)(()=>t[41]||(t[41]=[(0,a.eW)("CBUS errors")])),_:1,__:[41]})]),_:1}),(0,a.bF)(s,{clickable:"",onClick:t[5]||(t[5]=e=>re())},{default:(0,a.k6)(()=>[(0,a.bF)(l,null,{default:(0,a.k6)(()=>t[42]||(t[42]=[(0,a.eW)("Send CBUS message")])),_:1,__:[42]})]),_:1}),(0,a.bF)(s,{clickable:"",onClick:t[6]||(t[6]=e=>ue())},{default:(0,a.k6)(()=>[(0,a.bF)(l,null,{default:(0,a.k6)(()=>t[43]||(t[43]=[(0,a.eW)("System")])),_:1,__:[43]})]),_:1}),(0,n.R1)(c).state.develop?((0,a.uX)(),(0,a.Wv)(s,{key:0,clickable:"",onClick:t[7]||(t[7]=e=>Y())},{default:(0,a.k6)(()=>[(0,a.bF)(l,null,{default:(0,a.k6)(()=>t[44]||(t[44]=[(0,a.eW)("Example")])),_:1,__:[44]})]),_:1})):(0,a.Q3)("",!0),(0,n.R1)(c).state.develop?((0,a.uX)(),(0,a.Wv)(s,{key:1,clickable:"",onClick:t[8]||(t[8]=e=>te())},{default:(0,a.k6)(()=>[(0,a.bF)(l,null,{default:(0,a.k6)(()=>t[45]||(t[45]=[(0,a.eW)("Example iFrame")])),_:1,__:[45]})]),_:1})):(0,a.Q3)("",!0),(0,n.R1)(c).state.develop?((0,a.uX)(),(0,a.Wv)(s,{key:2,clickable:"",onClick:t[9]||(t[9]=e=>se())},{default:(0,a.k6)(()=>[(0,a.bF)(l,null,{default:(0,a.k6)(()=>t[46]||(t[46]=[(0,a.eW)("Test")])),_:1,__:[46]})]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1})]),_:1}),(0,a.bF)(y,{style:{"min-height":"0"},class:"no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",er,"   MMC   "+(0,o.v_)((0,n.R1)(d).version),1)]),_:1})]),_:1}),(0,a.bF)(A,{class:"col no-margin no-padding float-right",style:{"min-width":"400px"}},{default:(0,a.k6)(()=>[(0,a.bF)(R),(0,a.Lk)("div",tr,(0,o.v_)(B.value),1),(0,a.bF)(R)]),_:1}),(0,a.bF)(A,{class:"col no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",lr,[(0,a.bF)(u,{size:"md",color:"secondary",label:"Bus Events",onClick:t[10]||(t[10]=e=>z()),"no-caps":""})])]),_:1}),(0,a.bF)(A,{class:"col no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",ar,[(0,a.bF)(u,{size:"md",color:"secondary",label:"Events view",onClick:t[11]||(t[11]=e=>H()),"no-caps":""})])]),_:1}),(0,a.bF)(A,{class:"col no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",nr,[(0,a.bF)(u,{size:"md",color:"secondary",label:"Nodes view",onClick:t[12]||(t[12]=e=>J()),"no-caps":""})])]),_:1}),(0,a.bF)(A,{class:"col no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(R),(0,a.Lk)("div",or,[(0,a.bF)(u,{square:"",unelevated:"",size:"md",color:"primary",icon:"settings"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{"auto-close":""},{default:(0,a.k6)(()=>[(0,a.bF)(i,{style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,null,{default:(0,a.k6)(()=>[(0,a.bF)(T,{class:"no-margin no-padding",modelValue:(0,n.R1)(c).state.layout.settings.enableBusTraffic,"onUpdate:modelValue":t[13]||(t[13]=e=>(0,n.R1)(c).state.layout.settings.enableBusTraffic=e),onClick:j,label:"show Bus Traffic"},null,8,["modelValue"])]),_:1}),(0,a.bF)(s,null,{default:(0,a.k6)(()=>[(0,a.bF)(u,{size:"md",color:"primary",outline:"",label:"Reset all settings",onClick:t[14]||(t[14]=e=>oe()),"no-caps":""})]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.bF)(u,{size:"md",color:"negative",label:"Exit",onClick:t[15]||(t[15]=e=>Z()),"no-caps":""})])]),_:1})]),_:1}),(0,n.R1)(c).state.layout.settings.enableBusTraffic?((0,a.uX)(),(0,a.Wv)(ce,{key:0,class:"no-margin no-padding",modelValue:v.value,"onUpdate:modelValue":t[22]||(t[22]=e=>v.value=e),"show-if-above":"",side:"left",width:250,dense:"",bordered:""},{default:(0,a.k6)(()=>[(0,a.bF)(K,{"inline-actions":"",style:{"min-height":"0px"},class:"bg-primary text-white dense no-margin q-py-none q-px-xs row"},{action:(0,a.k6)(()=>[(0,a.Lk)("div",sr,[(0,a.bF)(u,{size:"sm",color:"blue",label:"All",onClick:t[16]||(t[16]=e=>M())}),(0,a.bF)(u,{square:"",unelevated:"",color:"primary",icon:"settings",onClick:t[21]||(t[21]=e=>P())},{default:(0,a.k6)(()=>[(0,a.bF)(r,{"auto-close":"",modelValue:S.value,"onUpdate:modelValue":t[20]||(t[20]=e=>S.value=e)},{default:(0,a.k6)(()=>[(0,a.bF)(i,{style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,null,{default:(0,a.k6)(()=>[(0,a.bF)(T,{class:"no-margin no-padding",label:"show events only",modelValue:(0,n.R1)(c).state.layout.settings.MainLayout.showEventsOnly,"onUpdate:modelValue":t[17]||(t[17]=e=>(0,n.R1)(c).state.layout.settings.MainLayout.showEventsOnly=e),onClick:t[18]||(t[18]=e=>ie())},null,8,["modelValue"])]),_:1}),(0,a.bF)(s,null,{default:(0,a.k6)(()=>[(0,a.bF)(u,{size:"md",color:"primary",outline:"",label:"Clear bus traffic",onClick:t[19]||(t[19]=e=>G()),"no-caps":""})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),default:(0,a.k6)(()=>[t[47]||(t[47]=(0,a.Lk)("div",{class:"text-h6"},"Bus Traffic",-1))]),_:1,__:[47]}),(0,a.bF)(X,{class:"no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(O,{id:"demo",ref_key:"scrollAreaRef",ref:I,style:{height:"87vh"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,null,{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(L.value,e=>((0,a.uX)(),(0,a.Wv)(s,{key:e,clickable:"",dense:"",onClick:t=>de(e)},{default:(0,a.k6)(()=>[(0,a.bF)(U,{dense:"",caption:"",class:"q-pa-none q-my-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("span",ir,(0,o.v_)(e.direction),1),t[48]||(t[48]=(0,a.Lk)("span",null,": ",-1)),(0,a.Lk)("span",dr,(0,o.v_)(e.displayText),1)]),_:2,__:[48]},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"])):(0,a.Q3)("",!0),0==(0,n.R1)(c).state.inStartup?((0,a.uX)(),(0,a.Wv)(ve,{key:1,class:"main-page no-shadow no-margin q-pa-none"},{default:(0,a.k6)(()=>["BusEventsView"==E.value?((0,a.uX)(),(0,a.Wv)(me,{key:0},{default:(0,a.k6)(()=>[(0,a.bF)((0,n.R1)(jd))]),_:1})):(0,a.Q3)("",!0),"EventsView"==E.value?((0,a.uX)(),(0,a.Wv)(me,{key:1},{default:(0,a.k6)(()=>[(0,a.bF)((0,n.R1)(Dd))]),_:1})):(0,a.Q3)("",!0),"NodesView"==E.value?((0,a.uX)(),(0,a.Wv)(me,{key:2},{default:(0,a.k6)(()=>[(0,a.bF)((0,n.R1)(Es))]),_:1})):(0,a.Q3)("",!0)]),_:1})):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)((0,n.R1)(Bs),{modelValue:b.value,"onUpdate:modelValue":t[23]||(t[23]=e=>b.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(Us),{modelValue:p.value,"onUpdate:modelValue":t[24]||(t[24]=e=>p.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(li),{modelValue:g.value,"onUpdate:modelValue":t[25]||(t[25]=e=>g.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(si),{modelValue:f.value,"onUpdate:modelValue":t[26]||(t[26]=e=>f.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(_i),{modelValue:_.value,"onUpdate:modelValue":t[27]||(t[27]=e=>_.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(wi),{modelValue:h.value,"onUpdate:modelValue":t[28]||(t[28]=e=>h.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(Ai),{modelValue:k.value,"onUpdate:modelValue":t[29]||(t[29]=e=>k.value=e),busMessage:m.value},null,8,["modelValue","busMessage"]),(0,a.bF)((0,n.R1)(Wi),{modelValue:N.value,"onUpdate:modelValue":t[30]||(t[30]=e=>N.value=e),previousNodeNumber:w.value,moduleName:q.value},null,8,["modelValue","previousNodeNumber","moduleName"]),(0,a.bF)((0,n.R1)(Ki),{modelValue:W.value,"onUpdate:modelValue":t[31]||(t[31]=e=>W.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(Zd),{modelValue:Q.value,"onUpdate:modelValue":t[32]||(t[32]=e=>Q.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(md),{modelValue:(0,n.R1)(c).state.inStartup,"onUpdate:modelValue":t[33]||(t[33]=e=>(0,n.R1)(c).state.inStartup=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(fd),{modelValue:x.value,"onUpdate:modelValue":t[34]||(t[34]=e=>x.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(Nd),{modelValue:F.value,"onUpdate:modelValue":t[35]||(t[35]=e=>F.value=e)},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(qs),{modelValue:V.value,"onUpdate:modelValue":t[36]||(t[36]=e=>V.value=e),URL:C.value},null,8,["modelValue","URL"])],64)}}};var cr=l(2008),mr=l(8416),vr=l(6914),br=l(9150),pr=l(6056),gr=l(8958),fr=l(5205),yr=l(7716);const _r=(0,J.A)(ur,[["__scopeId","data-v-540d4f6c"]]),hr=_r;L()(ur,"components",{QLayout:cr.A,QHeader:mr.A,QToolbar:vr.A,QBtn:Ce.A,QMenu:da.A,QList:ra.A,QItem:ua.A,QItemSection:Ls.A,QToolbarTitle:br.A,QSpace:Ie.A,QCheckbox:Q.A,QDrawer:pr.A,QBanner:ft.A,QCard:K.A,QScrollArea:gr.A,QItemLabel:Ss.A,QPageContainer:fr.A,QPage:yr.A})}}]);